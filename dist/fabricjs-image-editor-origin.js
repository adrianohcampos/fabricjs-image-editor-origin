(()=>{var e={687:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(601),o=n.n(i),a=n(314),r=n.n(a),s=n(417),l=n.n(s),c=new URL(n(678),n.b),d=new URL(n(420),n.b),p=new URL(n(135),n.b),h=r()(o());h.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap);"]),h.push([e.id,"@import url(https://unicons.iconscout.com/release/v4.0.8/css/line.css);"]);var u=l()(c),g=l()(d),v=l()(p);h.push([e.id,`/* Reset and Global Settings */\n.default-container * {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: "Work Sans", sans-serif\n}\n\n.default-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #eaeaea;\n}\n\n\n.default-container button {\n  cursor: pointer;\n}\n\n.default-container .grp-handler-cp-c {\n  margin-left: -20px;\n}\n\n.toolbar {\n  line-height: 0;\n  background-color: #f2f2f2;\n  box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.toolbar button {\n  width: 40px;\n  height: 35px;\n  opacity: .55;\n  clear: both;\n  border: 0;\n  border-radius: unset;\n  outline: none;\n  cursor: pointer;\n}\n\n.toolbar button.active,\n.toolbar button:hover {\n  opacity: 1;\n  border-left: 1px solid #ccc;\n  border-right: 1px solid #ccc;\n  box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n}\n\n.toolbar button img,\n.toolbar button svg {\n  width: 16px;\n  height: 16px;\n}\n\n.main-panel {\n  height: 100%;\n  display: flex;\n  position: relative;\n  overflow: hidden;\n}\n\n#footerbar {\n  background-color: #f2f2f2;\n  box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n  order: 3;\n  position: relative;\n  color:#6d6d6d;\n  display: flex;\n  justify-content: space-between;\n    align-items: center;\n}\n\n.zoom-level-container { \n  margin-left: auto;\n  display: flex;\n  align-content: center;\n  align-items: center;\n}\n\n.zoom-level-container #zoom-value {\n  min-width: 45px;\n  display: inline-block;\n  font-size: 0.8em;\n}\n\n.zoom-level-container #input-zoom-level {\n  accent-color: #6d6d6d;\n}\n\n.canvas-holder {\n  margin: auto;\n  width: calc(100%);\n  height: 100%;\n  overflow: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #eaeaea;\n  position: relative;\n}\n\n.canvas-holder.canvas-layers {\n  margin-right: 200px;\n  width: calc(100% - 200px);\n}\n\n.canvas-holder.fixed-canvas {\n  margin-left: 300px;\n  width: calc(100% - 500px);\n}\n\n.canvas-holder.fixed-canvas.canvas-layers {\n  margin-right: 200px;\n  margin-left: 300px;\n  width: calc(100% - 500px);\n}\n\n.canvas-container {\n  background-image: url(${u});\n  background-size: 30px 30px;\n  border: 1px solid #ccc;\n  margin: auto;\n}\n\n.toolpanel {\n  background-color: #f9f9f9;\n  width: 300px;\n  top: 0;\n  left: 0;\n  height: 100%;\n  border: 1px solid #ddd;\n  transition: all .4s;\n  box-sizing: border-box;\n  text-align: left;\n  font-size: 13px;\n  color: #777;\n  display: none;\n  position: absolute;\n  z-index: 9999;\n}\n\n.toolpanel h4 {\n  font-size: 1rem;\n  font-weight: normal;\n}\n\n.toolpanel.closed {\n  left: -300px;\n}\n\n.toolpanel.visible {\n  display: initial;\n}\n\n.toolpanel.visible:not(.closed) ~ .canvas-holder {\n  margin-left: 300px;\n  width: calc(100% - 500px);\n}\n\n.toolpanel .content {\n  padding: 20px;\n  position: relative;\n  height: -webkit-fill-available;\n  height: -ms-fill-available;\n  height: fill-available;\n  height: -moz-fill-available;\n  overflow-y: auto;\n  scrollbar-width: thin; /* Para navegadores Firefox */\n  scrollbar-color: rgba(0, 0, 0, 0.5) transparent; /* Para navegadores Firefox */\n  transition: padding 0.2s ease;\n}\n.toolpanel .content::-webkit-scrollbar {\n  width: 8px;\n}\n.toolpanel .content::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.5); \n  border-radius: 4px; \n}\n.toolpanel .content::-webkit-scrollbar-track {\n  background: transparent; \n}\n\n.toolpanel .title {\n  font-size: 14px;\n  font-weight: 700;\n  margin: 0;\n  padding-bottom: 10px;\n  width: 100%;\n  border-bottom: 1px solid #ddd;\n  color: #333;\n  text-transform: uppercase;\n}\n\n.toolpanel  .hide-show-handler {\n  display: none;\n  position: absolute;\n  top: calc(50% - 40px);\n  right: -42px;\n  width: 40px;\n  height: 80px;\n  background: #f9f9f9;\n  border: 1px solid #ddd;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n  cursor: pointer;\n\n  /* background-image: url('caret-left.svg'); */\n  background-image: url(${g});\n  background-size: 10px;\n  background-repeat: no-repeat;\n  background-position: center center;\n}\n\n.toolpanel.closed  .hide-show-handler {\n  /* background-image: url('caret-right.svg'); */\n  background-image: url(${v});\n}\n\n.spectrum.with-add-on {\n  width: 40px;\n}\n\n#shapes-panel .button {\n  cursor: pointer;\n  line-height: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: inline-block;\n  margin: 8px;\n}\n#images-panel  .list-images {\n  display: flex;\n  flex-wrap: wrap;\n}\n#images-panel .button {\n  cursor: pointer;\n  line-height: 0;\n  overflow: hidden;\n  padding: 0; \n  display: inline-block;\n  margin: 0; \n  width: 25%; \n}\n\n#images-panel .button:hover {\n  opacity: 0.8;\n}\n\n#images-panel .button img {  \n  width: 100%;\n  height: 60px;\n  object-fit: cover;\n}\n\n#background-panel .canvas-size-setting input {\n  width: 60px;\n  background-color: #fff;\n  border-radius: 6px;\n  border: 2px solid #e4e4e4;\n  padding: 4px 10px;\n  line-height: 18px;\n  font-size: 13px;\n}\n\n#select-panel .text-section .style button,\n#select-panel .alignment-section button,\n#select-panel .object-options button {\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  text-align: center;\n  outline: none;\n}\n\n#select-panel .text-section .style button:hover,\n#select-panel .alignment-section button:hover,\n#select-panel .object-options button:hover {  \n  background-color: #d6d6d6;  \n}\n\n#select-panel button svg {\n  opacity: .7;\n  width: 18px;\n  height: 18px;\n  vertical-align: middle;\n}\n\n#select-panel .text-section .style,\n#select-panel .text-section .family,\n#select-panel .text-section .sizes,\n#select-panel .text-section .align,\n#select-panel .text-section .color {\n  margin-bottom: 20px;\n}\n\n#select-panel .text-section .sizes input {\n  width: 50px;\n}\n\n.toolpanel#select-panel .text-section,\n.toolpanel#select-panel .effect-section {\n  display: none;\n}\n\n.toolpanel#select-panel.type-group .border-section {\n  display: none;\n}\n\n.toolpanel#select-panel.type-group .fill-section {\n  display: none;\n}\n\n.toolpanel#select-panel.type-textbox .text-section,\n.toolpanel#select-panel.type-i-text .text-section {\n  display: block;\n}\n\n.toolpanel#select-panel.type-textbox .fill-section,\n.toolpanel#select-panel.type-i-text .fill-section  {\n  display: none;\n}\n\n.toolpanel#select-panel.type-image .effect-section {\n  display: block;\n}\n\n.toolpanel#select-panel.type-image .fill-section {\n  display: none;\n}\n\n.custom-modal-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #3333;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.custom-modal-content {\n  background: white;\n  width: max-content;\n  padding: 20px;\n}\n\n.custom-modal-content .button-download {\n  border: 1px solid #ccc;\n  padding: 10px;\n  cursor: pointer;\n  margin: 5px;\n  border-radius: 3px;\n}\n\n.custom-modal-content .button-download:hover {\n  background: #ccc;\n  transition: 0.3s;\n}\n\n.toolpanel .input-container {\n  display: flex;\n  align-items: center;\n  padding-top: 5px;\n  padding-bottom: 5px;\n}\n\n.toolpanel .input-container label {\n  width: 50%;\n}\n\n.toolpanel .input-container select {\n  width: 50%;\n  height: 29px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  outline: none;\n}\n\n.toolpanel .tab-content .sp-replacer {\n  width: 100%;\n}\n\n.toolpanel .input-container .sp-replacer {\n  width: 50%;\n}\n\n.toolpanel .input-container .custom-number-input {\n  background: #ebebeb;\n  display: flex;\n  align-items: center;\n  padding: 1px;\n  height: 30px;\n  background-color: #e4e4e4;\n  border-radius: 6px;\n  text-align: center;\n}\n\n.toolpanel .input-container .custom-number-input button {\n  width: 36px !important;\n  height: 30px !important;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-radius: 6px;\n  color: #333;\n  border: 1px solid transparent;\n  font-size: 16px;\n  cursor: pointer;\n  outline: none;\n}\n\n.toolpanel .input-container .custom-number-input input {\n  height: 30px !important;\n  width: 60px !important;\n  background: transparent !important;\n  border: none;\n  outline: none;\n  text-align: center;\n}\n\n.toolpanel .input-container .custom-number-input input::-webkit-outer-spin-button,\n.toolpanel .input-container .custom-number-input input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n/* Firefox */\n.toolpanel .input-container .custom-number-input input[type=number] {\n  -moz-appearance: textfield;\n}\n\n.tab-container .tabs {\n  display: flex;\n  justify-content: space-between;\n}\n\n.tab-container .tabs .tab-label {\n  font-size: 16px;\n  cursor: pointer;\n}\n\n.tab-container .tabs .tab-label.active {\n  color: black\n}\n\n.gradient-orientation-container {\n  padding-top: 40px;\n}\n\n.drag-drop-input {\n  background-color: #fff;\n  width: 100%;\n  box-sizing: border-box;\n  border: 2px dashed #ccc;\n  border-radius: 6px;\n  text-align: center;\n  padding: 120px;\n}\n\n.drag-drop-input.dragging {\n  border-color: #4368a9;\n}\n\n.toolpanel#images-panel .content .drag-drop-input { \n  padding: 20px;\n  margin: 10px 0;\n}\n\n#tip-container {\n  padding: 10px;\n  text-align: center;\n  touch-action: none;\n  cursor: default;\n  color: #888;\n  font-size: 0.8em;\n}\n\n\n.main-panel .toolpanel .tab-container button {\n      height: 30px !important;      \n      background-color: #fff;\n      background-clip: padding-box;\n      border-radius: 4px;\n      color: #333;\n      border: 1px solid #ddd;\n      text-align: center;  \n      cursor: pointer;\n      outline: none;\n      font-size: 13px;\n}\n\n.toast-notification{\n  min-width: 200px;\n  height:50px;\n  background-color:white;\n  border-radius: 10px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  top:20px;\n  right: 20px;\n  margin-bottom:20px;\n  margin-left:0;\n  position:absolute;\n  z-index:1;\n  display:flex;\n  flex-direction:row;\n  align-items: center;   \n  gap: 10px;\n}\n\n.toast-notification .message-container{\n  width:80%;  \n  color:white;\n  font-size: 0.8rem;\n  padding: 10px 10px 10px 15px;\n}\n\n.toast-notification .close-notification{\n  width:20%;\n  text-align: center;\n}\n.toast-notification .close-notification > svg {\n \n  font-weight:900;\n  color:white;\n  cursor:pointer;\n \n    width: 16px;\n    height: 16px;\n\n}\n\n/* Estilos para Réguas e Guias */\n.ruler {\n  position: absolute;\n  background-color: #f0f0f0;\n  z-index: 100;\n}\n\n.horizontal-ruler {\n  top: 0;\n  left: 20px;\n  right: 0;\n  height: 20px;\n  cursor: row-resize;\n}\n\n.vertical-ruler {\n  top: 20px;\n  left: 0;\n  width: 20px;\n  bottom: 0;\n  cursor: col-resize;\n}\n\n.ruler-corner {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 20px;\n  height: 20px;\n  background-color: #f0f0f0;\n  border-right: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n  z-index: 101;\n  cursor: pointer;\n}\n\n.ruler-corner:hover {\n  background-color: #e0e0e0;\n}\n\n.ruler-menu {\n  position: absolute;\n  top: 25px;\n  left: 25px;\n  padding: 5px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-shadow: 0px 2px 5px rgba(0,0,0,0.2);\n  z-index: 1000;\n}\n\n.ruler-menu button {\n  display: block;\n  margin: 5px 0;\n  padding: 5px 10px;\n  width: 100%;\n  text-align: left;\n  background: none;\n  border: none;\n  cursor: pointer;\n  font-size: 12px;\n  color: #333;\n}\n\n.ruler-menu button:hover {\n  background-color: #f0f0f0;\n}\n\n.guide-tooltip {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  padding: 5px;\n  border-radius: 3px;\n  font-size: 11px;\n  pointer-events: none;\n  z-index: 1000;\n}\n\n.canvas-holder .content.with-rulers {\n  padding-top: 20px;\n  padding-left: 20px;\n  transition: padding 0.2s ease;\n}\n\n.canvas-holder .content .canvas-container.dragging {\n  border: 2px #4368a9 dashed;\n  border-radius: 10px;\n}\n\n.ContextMenu {\n  display: none;\n  list-style: none;\n  margin: 0;\n  max-width: 250px;\n  min-width: 125px;\n  padding: 0;\n  position: absolute;\n  user-select: none;\n  z-index: 99999;\n}\n\n.ContextMenu--theme-default {\n  background-color: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n  font-size: 13px;\n  outline: 0;\n  padding: 2px 0;\n}\n\n.ContextMenu--theme-default .ContextMenu-item {\n  padding: 6px 12px;\n}\n\n.ContextMenu--theme-default .ContextMenu-item:hover,\n.ContextMenu--theme-default .ContextMenu-item:focus {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.ContextMenu--theme-default .ContextMenu-item:focus {\n  outline: 0;\n}\n\n.ContextMenu--theme-default .ContextMenu-divider {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n\n.ContextMenu.is-open {\n  display: block;\n}\n\n.ContextMenu-item {\n  cursor: pointer;\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.ContextMenu-divider {\n  height: 1px;\n  margin: 4px 0;\n}\n\n#templates-panel .list-templates {\n  display: flex;\n  flex-direction: row;\n  gap: 15px;\n  margin: 10px 0;\n  flex-wrap: wrap;\n}\n#templates-panel .list-templates-item {\n  text-align: center;\n  cursor: pointer;\n  width: 45%;\n  border: 1px solid #ccc;\n}\n#templates-panel .list-templates-item:hover {\n  background-color: #f0f0f0;\n  border: 1px solid #333;\n  opacity: 0.8;\n}\n#templates-panel .list-templates-item img {\n  background-image: url(${u});\n  background-size: 10px 10px; \n  max-width: 100%;\n}\n\n#templates-panel .btn {\n  margin-top: 10px;\n}\n\n.default-container .btn {\n  height: 30px !important;\n  background-color: #fff;\n  background-clip: padding-box;\n  border-radius: 4px;\n  color: #333;\n  border: 1px solid #ddd;\n  text-align: center;\n  cursor: pointer;\n  outline: none;\n  font-size: 13px;\n}\n\n.default-container .btn:hover {\n  background-color: #d6d6d6;\n}\n\n/* Estilos para o botão EyeDropper (conta-gotas) */\n.color-picker-container {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 50%;\n}\n\n.eyedropper-btn {\n  padding: 6px;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  min-width: 32px;\n  height: 32px;\n}\n\n.eyedropper-btn:hover {\n  background-color: #f0f0f0;\n  border-color: #999;\n}\n\n.eyedropper-btn:active {\n  background-color: #e0e0e0;\n  transform: scale(0.95);\n}\n\n.eyedropper-btn svg {\n  width: 16px;\n  height: 16px;\n  color: #4c4c4c;\n}\n\n.eyedropper-btn:hover svg {\n  color: #333;\n}\n\n/* Ajuste para o spectrum quando dentro do container */\n.color-picker-container .sp-replacer {\n  flex: 1;\n  width: auto !important;\n}\n\n/* Estilos específicos para diferentes seções */\n.text-section .color-picker-container,\n.fill-section .color-picker-container,\n.border-section .color-picker-container {\n  width: 50%;\n}\n\n/* Estilo específico para o background panel */\n#background-panel .color-picker-container {\n  width: 100%;\n  margin-bottom: 10px;\n}\n\n#background-panel .color-picker-container .sp-replacer {\n  flex: 1;\n  width: auto !important;\n}\n\n/* Responsividade para telas menores */\n@media (max-width: 768px) {\n  .color-picker-container {\n    gap: 4px;\n  }\n  \n  .eyedropper-btn {\n    min-width: 28px;\n    height: 28px;\n    padding: 4px;\n  }\n  \n  .eyedropper-btn svg {\n    width: 14px;\n    height: 14px;\n  }\n}\n\n/* Indicador visual quando EyeDropper está ativo */\n.eyedropper-btn.active {\n  background-color: #6d6d6d !important;\n  border-color: #6d6d6d !important;\n}\n\n.eyedropper-btn.active svg {\n  color: white !important;\n}\n\n/* Tooltip melhorado para o botão */\n.eyedropper-btn[title] {\n  position: relative;\n}\n\n.eyedropper-btn[title]:hover::after {\n  content: attr(title);\n  position: absolute;\n  bottom: -35px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  z-index: 1000;\n  opacity: 0.9;\n}\n\n/* Mensagem de aviso para navegadores não suportados */\n.eyedropper-not-supported {\n  color: #888;\n  font-size: 11px;\n  font-style: italic;\n  margin-top: 4px;\n  display: none;\n}\n\n/* Ajustes para melhor alinhamento em diferentes seções */\n.toolpanel .input-container:has(.color-picker-container) {\n  align-items: stretch;\n}\n\n.toolpanel .input-container:has(.color-picker-container) label {\n  align-self: center;\n}\n\n/* Layers */\n.image-editor-layers {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 200px;\n  height: 100%;\n  background: #f2f2f2;\n  box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n  color: #333;\n  /* box-sizing: border-box; */\n  overflow-x: hidden;\n  overflow-y: auto; \n}\n\n.image-editor-layers > div > p {\n  font-size: 14px;\n  font-weight: 700;\n  margin: 0;\n  padding: 10px;\n  width: 100%;\n  border-bottom: 1px solid #ddd;\n  color: #333;\n  text-transform: uppercase;\n}\n\n.image-editor-layers .layers-list .layer-item {\n  padding: 5px;\n  margin: 2px 0;\n  background: #f2f2f2;\n  cursor: move;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  /* border: 2px solid transparent; */\n  transition: all 0.2s ease;\n  user-select: none;\n}\n\n.image-editor-layers .layers-list .layer-item:hover {\n  /* outline: 1px solid #ccc; */\n  box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls button {\n  cursor: pointer;\n  background: none; \n  border: none; \n  color: #fff; \n}\n\n.image-editor-layers .layers-list .layer-item .layer-info .layer-name {\n  font-size: 0.75rem;\n  text-transform: uppercase;\n} \n\n.image-editor-layers .layers-list .layer-item .layer-controls .layer-visibility {  \n  opacity: 1;\n}\n\n.image-editor-layers .layers-list .layer-item-placeholder {\n  padding: 0;\n  margin: 0;\n  background: #f2f2f2;\n  outline: 1px dashed #6d6d6d;\n  box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n  margin:1px 3px;\n}\n\n\n\n\n\n\n\n/* Main Actions Menu */\n#obj-menu {\n  width: fit-content;\n  border-radius: 20px;\n  background: #fff;\n  box-shadow: 0 12px 35px rgba(0,0,0,0.1);\n  position: relative;\n  display: none;\n  color: #4c4c4c;\n}\n\n#obj-menu .actions {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0px;\n  position: relative;\n}\n\n/* Menu Action Items */\n#obj-menu .actions-item {\n  padding: 5px;\n  cursor: pointer;\n  border-radius: 20px;\n  font-size: 20px;\n  position: relative;\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#obj-menu .actions-item:hover {\n  background: #e0e0e0;\n}\n\n#obj-menu .actions-item span {\n  font-size: 12px;\n  line-height: 1;\n  display: inline-block;\n  padding: 0 5px;\n  font-weight: 600;\n}\n\n\n\n/* Dropdown Menu Wrapper */\n.menu-wrapper {\n  visibility: hidden;\n  position: absolute;\n  min-width: 250px;\n  max-width: 300px;\n  border-radius: 10px;\n  background: #fff;\n  box-shadow: 0 12px 35px rgba(0,0,0,0.1);\n  overflow: visible;\n  color: #4c4c4c\n}\n\n/* Scrollbar Styling */\n.content::-webkit-scrollbar {\n  width: 16px;\n}\n\n.content::-webkit-scrollbar-thumb {\n  background-color: #888;\n  border: 4px solid transparent;\n  border-radius: 20px;\n  background-clip: padding-box;\n}\n\n/* Menu Content */\n.menu-wrapper .menu {\n  padding: 10px 0;\n}\n\n.menu-wrapper .content .item {\n  list-style: none;\n  font-size: 20px;\n  height: 30px;\n  display: flex;\n  width: 100%;\n  cursor: pointer;\n  align-items: center;\n  border-radius: 5px;\n  margin-bottom: 2px;\n  padding: 0 12px;\n}\n\n.menu-wrapper .content .item:hover {\n  background: #e0e0e0;\n}\n\n.menu-wrapper .content .item > div {\n  display: flex;\n  align-items: center;\n}\n\n.menu-wrapper .content .item span {\n  margin-left: 8px;\n  font-size: 12px;\n  display: flex;\n  margin-right: 10px;\n}\n\n/* Keyboard Shortcuts */\n.menu-wrapper .content .item .shortcutkey {\n  font-size: 10px;  \n  background: #e0e0e0;\n  padding: 2px 4px;\n  border-radius: 4px;\n  margin-left: auto;\n  margin-right: 0;\n  font-family: monospace;\n}\n\n/* Dividers */\n.menu-wrapper .content .divisor {\n  border-top: 1px solid #ccc;\n  margin: 5px 0;\n}\n\n/* Submenu */\n.menu-wrapper .sub-nivel {\n  position: relative;\n  justify-content: space-between;\n}\n\n.menu-wrapper .sub-nivel .sub-nivel-menu {\n  position: absolute;\n  background: #fff;\n  width: 250px;\n  top: 0;\n  padding: 13px 0;\n  opacity: 0;\n  pointer-events: none;\n  border-radius: 10px;\n  box-shadow: 0 5px 10px rgba(0,0,0,0.08);\n  transition: 0.1s ease;\n}\n\n.menu-wrapper .sub-nivel.active .sub-nivel-menu {\n  opacity: 1;\n  pointer-events: auto;\n}`,""]);const f=h},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&r[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{"use strict";e.exports=function(e){return e[1]}},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},r=[],s=0;s<e.length;s++){var l=e[s],c=i.base?l[0]+i.base:l[0],d=a[c]||0,p="".concat(c," ").concat(d);a[c]=d+1;var h=n(p),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var g=o(u,i);i.byIndex=s,t.splice(s,0,{identifier:p,updater:g,references:1})}r.push(p)}return r}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=i(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<a.length;r++){var s=n(a[r]);t[s].references--}for(var l=i(e,o),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},159:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},678:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVQ4jWNgYGAQIYAJglEDhoUBg9+FowbQ2gAARjwKARjtnN8AAAAASUVORK5CYII="},420:e=>{"use strict";e.exports='data:image/svg+xml,<%3Fxml version="1.0"%3F><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 292.359 292.359" style="enable-background:new 0 0 292.359 292.359;" xml:space="preserve"><g transform="matrix%28-1, -0, 0, 1, 292.359, 0%29"><g><path d="M222.979,133.331L95.073,5.424C91.456,1.807,87.178,0,82.226,0c-4.952,0-9.233,1.807-12.85,5.424 c-3.617,3.617-5.424,7.898-5.424,12.847v255.813c0,4.948,1.807,9.232,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428 c4.949,0,9.23-1.811,12.847-5.428l127.906-127.907c3.614-3.613,5.428-7.897,5.428-12.847 C228.407,141.229,226.594,136.948,222.979,133.331z" data-original="%23000000" class="active-path" fill="%23000000"/></g></g></svg>'},135:e=>{"use strict";e.exports='data:image/svg+xml,<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="292.359px" height="292.359px" viewBox="0 0 292.359 292.359" style="enable-background:new 0 0 292.359 292.359;" xml:space="preserve"><g><path d="M222.979,133.331L95.073,5.424C91.456,1.807,87.178,0,82.226,0c-4.952,0-9.233,1.807-12.85,5.424c-3.617,3.617-5.424,7.898-5.424,12.847v255.813c0,4.948,1.807,9.232,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428c4.949,0,9.23-1.811,12.847-5.428l127.906-127.907c3.614-3.613,5.428-7.897,5.428-12.847C228.407,141.229,226.594,136.948,222.979,133.331z"/></g></svg>'}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document.baseURI||self.location.href,n.nc=void 0,function(){"use strict";var e=function(e,t){const{buttons:n,shapes:i,images:o,dimensions:a,api:r,templates:s,canvasSizeBlock:l=!1,fonts:c=[],fixedCanvas:d=!1,layers:p=!1}=t;this.containerSelector=e,this.containerEl=$(e),this.dimensions={width:a&&a.width>0?a.width:800,height:a&&a.height>0?a.height:600},this.buttons=n,this.shapes=i,this.images=o,this.templates=s,this.fonts=c,this.fixedCanvas=d,this.layers=p,this.api={upload:r&&r.upload?r.upload:null},this.containerEl.addClass("default-container"),this.canvas=null,this.activeTool=null,this.activeSelection=null,this.canvasSizeBlock=!0===l,this.loadCustomFonts=async()=>{const e=this.fonts.map((e=>new FontFace(e.name,`url(${e.path})`,{style:e.style||"normal",weight:e.weight||"normal"}).load().then((e=>(document.fonts.add(e),e)))));try{await Promise.all(e)}catch(e){console.error("Error loading custom fonts:",e)}},this.getCanvasJSON=()=>this.canvas.toJSON(),this.setCanvasJSON=e=>{e&&this.canvas.loadFromJSON(JSON.parse(e),this.canvas.renderAll.bind(this.canvas))},this.setActiveTool=t=>{if($(`${e} .toolpanel`).removeClass("visible"),this.activeSelection&&this.activeSelection.metadata&&(this.activeSelection.metadata.isGuide||this.activeSelection.metadata.isRuler||this.activeSelection.metadata.isMargin))return this.activeTool=null,void(this.activeSelection=null);switch(this.activeTool=t,"select"===t&&this.activeSelection?($(`${e} .toolbar .active`).removeClass("active"),$(`${e} .toolpanel#${t}-panel`).attr("class",`toolpanel visible type-${this.activeSelection.type}`).addClass("visible"),this.setSelectionValues()):($(`${e} .toolpanel#${t}-panel`).addClass("visible"),this.canvas.discardActiveObject(),this.canvas.renderAll(),this.activeSelection=null),this.canvas.isDrawingLineMode=!1,this.canvas.isDrawingPathMode=!1,this.canvas.isDrawingMode=!1,this.canvas.isDrawingTextMode=!1,this.canvas.isDrawingRectMode=!1,this.canvas.isDrawingCircleMode=!1,this.canvas.isDrawingTriangleMode=!1,this.canvas.defaultCursor="default",this.canvas.selection=!0,this.canvas.forEachObject((e=>{e.selectable=!0,e.evented=!0})),t){case"draw":this.canvas.isDrawingMode=!0;break;case"rect":this.canvas.isDrawingRectMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case"ellipse":this.canvas.isDrawingCircleMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case"triangle":this.canvas.isDrawingTriangleMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case"line":this.canvas.isDrawingLineMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case"path":this.canvas.isDrawingPathMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1})),this.updateTip("Tip: click to place points, press and pull for curves! Click outside or press Esc to cancel!");break;case"textbox":this.canvas.isDrawingTextMode=!0,this.canvas.defaultCursor="crosshair",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case"upload":this.openDragDropPanel();break;default:this.updateTipRandom()}},this.undo=()=>{console.log("undo");try{let e=this.history.getValues().undo;if(e.length){let t=e[e.length-1];this.history.undo(),t&&this.canvas.loadFromJSON(JSON.parse(t),this.canvas.renderAll.bind(this.canvas))}}catch(e){console.error("undo failed")}},this.redo=()=>{console.log("redo");try{let e=this.history.getValues().redo;if(e.length){let t=e[e.length-1];this.history.redo(),t&&this.canvas.loadFromJSON(JSON.parse(t),this.canvas.renderAll.bind(this.canvas))}}catch(e){console.error("redo failed")}},this.setActiveSelection=e=>{this.activeSelection=e&&e[0]?e[0]:e,this.activeSelection&&this.setActiveTool("select")},this.configUndoRedoStack=()=>{this.history=window.UndoRedoStack(),document.addEventListener("keydown",(e=>{const t=e.which||e.keyCode;e.ctrlKey&&0===document.querySelectorAll("textarea:focus, input:focus").length&&(90===t&&this.undo(),89===t&&this.redo())}))},this.init=async()=>{await this.loadCustomFonts(),this.initializeRuler(),this.configUndoRedoStack(),this.initializeToolbar(),this.initializeMainPanel(),this.initializeShapes(),this.initializeImages();try{this.initializeTemplates()}catch(e){console.error("can't initialize templates",e)}this.initializeFreeDrawSettings(),this.initializeCanvasSettingPanel(),this.initializeSelectionSettings(),this.canvas=this.initializeCanvas(),this.initializeAligningGuidelines(this.canvas),this.initializeCenteringGuidelines(this.canvas),this.initializeCanvasActionsMenu(this.canvas),this.fixedCanvas&&$(`${this.containerSelector} #canvas-holder`).addClass("fixed-canvas"),this.layers&&$(`${this.containerSelector} #canvas-holder`).addClass("canvas-layers"),this.initializeLineDrawing(this.canvas),this.initializePathDrawing(this.canvas),this.initializeTextBoxDrawing(this.canvas),this.initializeRectDrawing(this.canvas),this.initializeCircleDrawing(this.canvas),this.initializeTriangleDrawing(this.canvas),this.initializeUpload(this.canvas),this.initializeCopyPaste(this.canvas),this.initializeAnimations(this.canvas),this.initializeTipSection(),this.initializeUtilsEvents(),this.initializeZoomEvents(),this.initializeLayers(),this.initializeFullscreenEvents(),this.initializeNotification(),this.extendHideShowToolPanel(),this.extendNumberInput(),this.fitZoom()},this.initializeMainPanel=()=>{$(`${e}`).append('<div class="main-panel"></div>')},this.extendHideShowToolPanel=()=>{$(`${this.containerSelector} .toolpanel`).each((function(){$(this).append('<div class="hide-show-handler"></div>')})),$(`${this.containerSelector} .toolpanel  .hide-show-handler`).click((function(){$(this).closest(".toolpanel").toggleClass("closed")}))},this.extendNumberInput=()=>{$(`${e} .decrease`).click((function(){let e=$(this).closest(".custom-number-input").find("input[type=number]"),t=e.attr("step");t=t?parseFloat(t):1;let n=parseFloat(e.val());e.val((n-t).toFixed(t.countDecimals())),e.change()})),$(`${e} .increase`).click((function(){let e=$(this).closest(".custom-number-input").find("input[type=number]"),t=e.attr("step");t=t?parseFloat(t):1;let n=parseFloat(e.val());e.val((n+t).toFixed(t.countDecimals())),e.change()}))},this.deleteObject=(e,t)=>{var n=t.target,i=n.canvas;i.remove(n),i.requestRenderAll()},this.cloneObject=(e,t)=>{var n=t.target,i=n.canvas;n.clone((function(e){e.left+=10,e.top+=10,i.add(e)}))},this.renderIcon=e=>{var t=document.createElement("img");return t.src=e,function(e,n,i,o,a){var r=t,s=r.naturalWidth,l=r.naturalHeight,c=this.cornerSize,d=s/l,p=c,h=p/d;h>c&&(p=(h=c)*d),e.save(),e.translate(n,i),e.rotate(fabric.util.degreesToRadians(a.angle)),e.drawImage(r,-p/2,-h/2,p,h),e.restore()}},this.init()};e.prototype.destroy=function(){$(document).off("keydown",this.ctrZY),$(this.containerSelector).empty(),this.canvas=null,this.activeTool=null,this.activeSelection=null},window.ImageEditor=e}(),function(){"use strict";window.ImageEditor.prototype.initializeUtilsEvents=function(){this.generateFabricGradientFromColorStops=(e,t,n,i,o)=>{let a={},r=[];for(var s in e)r.push({id:s,color:e[s].color,offset:e[s].position/100});if("linear"===i){let e=(e=>{let t=-parseInt(e,10)*(Math.PI/180);return{x1:Math.round(50+50*Math.sin(t))/100,y1:Math.round(50+50*Math.cos(t))/100,x2:Math.round(50+50*Math.sin(t+Math.PI))/100,y2:Math.round(50+50*Math.cos(t+Math.PI))/100}})(o);a=new fabric.Gradient({type:"linear",coords:{x1:e.x1*t,y1:e.y1*n,x2:e.x2*t,y2:e.y2*n},colorStops:r})}else"radial"===i&&(a=new fabric.Gradient({type:"radial",coords:{x1:t/2,y1:n/2,r1:0,x2:t/2,y2:n/2,r2:t/2},colorStops:r}));return a},this.getRealBBox=async e=>{let t,n,i,o;var a;return(e=>{var t,n,a,r,s=new Uint32Array(e),l=i,c=0;for(n=0;n<o;n++)for(t=0;t<i;t++)if(4278190080&s[n*i+t]){a=n,n=o;break}for(n=o-1;n>a;n--)for(t=0;t<i;t++)if(4278190080&s[n*i+t]){r=n,n=0;break}for(n=a;n<r;n++)for(t=0;t<i;t++)if(t<l&&4278190080&s[n*i+t]){l=t;break}for(n=a;n<r;n++)for(t=i-1;t>l;t--)if(t>c&&4278190080&s[n*i+t]){c=t;break}return{x1:l,x2:c,y1:a,y2:r,width:c-l,height:r-a}})(await(a=e.toDataURL(),null==t&&(t=document.createElement("canvas"),t.style.border="1px solid blue",t.style.position="absolute",t.style.top="-100%",t.style.visibility="hidden",n=t.getContext("2d"),document.body.appendChild(t)),new Promise((function(e,r){if(null==a)return r();var s=new Image;s.addEventListener("load",(()=>{i=s.width,o=s.height,t.width=i,t.height=o,n.drawImage(s,0,0,i,o);var a=n.getImageData(0,0,i,o).data.buffer;e(a,!1)})),s.src=a}))))},this.alignObject=(e,t,n)=>{switch(n){case"left":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("left",t.left-n.left-i.x1),t.setCoords(),e.renderAll(),e.fire("object:modified")})();break;case"center-h":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("left",t.left-n.left-i.x1+e.width/2-i.width/2),t.setCoords(),e.renderAll(),e.fire("object:modified")})();break;case"right":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("left",t.left-n.left-i.x1+e.width-i.width),t.setCoords(),e.renderAll(),e.fire("object:modified")})();break;case"top":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("top",t.top-n.top-i.y1),t.setCoords(),e.renderAll(),e.fire("object:modified")})();break;case"center-v":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("top",t.top-n.top-i.y1+e.height/2-i.height/2),t.setCoords(),e.renderAll(),e.fire("object:modified")})();break;case"bottom":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set("top",t.top-n.top-i.y1+(e.height-i.height)),t.setCoords(),e.renderAll(),e.fire("object:modified")})()}},this.getCurrentEffect=e=>{let t={opacity:100,blur:0,brightness:50,saturation:50,gamma:{r:45,g:45,b:45}};t.opacity=100*e.opacity;let n=e.filters.find((e=>e.blur));n&&(t.blur=100*n.blur);let i=e.filters.find((e=>e.brightness));i&&(t.brightness=(i.brightness+1)/2*100);let o=e.filters.find((e=>e.saturation));o&&(t.saturation=(o.saturation+1)/2*100);let a=e.filters.find((e=>e.gamma));return a&&(t.gamma.r=Math.round(a.gamma[0]/.022),t.gamma.g=Math.round(a.gamma[1]/.022),t.gamma.b=Math.round(a.gamma[2]/.022)),t},this.getUpdatedFilter=(e,t,n)=>{let i={...e};switch(t){case"gamma.r":i.gamma.r=n;break;case"gamma.g":i.gamma.g=n;break;case"gamma.b":i.gamma.b=n;break;default:i[t]=n}let o=[];return(e=i).blur>0&&o.push(new fabric.Image.filters.Blur({blur:e.blur/100})),50!==e.brightness&&o.push(new fabric.Image.filters.Brightness({brightness:e.brightness/100*2-1})),50!==e.saturation&&o.push(new fabric.Image.filters.Saturation({saturation:e.saturation/100*2-1})),45===e.gamma.r&&45===e.gamma.g&&45===e.gamma.b||o.push(new fabric.Image.filters.Gamma({gamma:[Math.round(.022*e.gamma.r*10)/10,Math.round(.022*e.gamma.g*10)/10,Math.round(.022*e.gamma.b*10)/10]})),o},this.getActiveFontStyle=(e,t)=>{if(e.getSelectionStyles&&e.isEditing){let n=e.getSelectionStyles();return n.find((e=>""===e[t]))?"":n[0][t]}return e[t]||""},this.setActiveFontStyle=(e,t,n)=>{if(e.setSelectionStyles&&e.isEditing){let i={};i[t]=n,e.setSelectionStyles(i),e.setCoords()}else e.set(t,n)},this.downloadImage=(e,t="png",n="image/png")=>{const i=e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,""),o=atob(i),a=new Array(o.length);for(let e=0;e<o.length;e+=1)a[e]=o.charCodeAt(e);const r=new Uint8Array(a),s=new Blob([r],{type:n+";base64"}),l=window.URL.createObjectURL(s);if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(s);const c=document.createElement("a");c.href=l,c.download="image."+t,c.dispatchEvent(new MouseEvent("click")),setTimeout((()=>{window.URL.revokeObjectURL(l)}),60)},this.downloadSVG=e=>{const t="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.href=t,n.download="image.svg",n.dispatchEvent(new MouseEvent("click")),setTimeout((()=>{window.URL.revokeObjectURL(t)}),60)},this.downloadJSON=e=>{var t=JSON.stringify(e),n=document.createElement("a");n.href="data:text/json;charset=utf-8,"+encodeURIComponent(t),n.download="canvas.json",n.click()},this.addImageFromUrl=e=>{const t=this,n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){fabric.Image.fromURL(e,(e=>{const n=.9*t.canvas.originalH,i=.9*t.canvas.originalW,o=e.height,a=e.width;(o>=n||a>=i)&&(o>=a?e.scaleToHeight(n):e.scaleToWidth(i));const r=t.canvas.originalW/2,s=t.canvas.originalH/2;e.set({left:r-e.getScaledWidth()/2,top:s-e.getScaledHeight()/2}),t.canvas.add(e),t.canvas.setActiveObject(e),t.canvas.renderAll(),t.canvas.fire("object:modified"),$(`${t.containerSelector} #toolbar button`).removeClass("active")}),{crossOrigin:"anonymous"})},n.onerror=function(){console.error("Error loading image. Check that the URL is correct and that the image allows CORS.")}},this.setCanvasStatus=e=>{const t=this;e&&t.canvas.loadFromJSON(e,t.canvas.renderAll.bind(t.canvas))},this.animateObject=e=>{const t=this.canvas;if(e.animation){const n=fabric.util.ease?.[e.animation.easing]||fabric.util.ease.linear||(e=>e);let i=e.left+100;e.set({opacity:1,left:i}),e.animate("left",e.animation.to,{duration:800,onChange:t.renderAll.bind(t),easing:n,onComplete:function(){console.log("Animação concluída!")}})}},this.clearGuidesline=e=>{e.getObjects().forEach((t=>{(t.id&&t.id.startsWith("vertical-")||t.id&&t.id.startsWith("horizontal-"))&&e.remove(t)})),e.renderAll()},this.guidelines=[],this.setGuidelines=e=>{this.guidelines.forEach((t=>{e.add(t)}))},this.handleObjectMoving=(e,t)=>{const n=10,i=e.getZoom(),o=e.width/i,a=e.height/i,r=t.left-t.width*t.scaleX/2,s=t.top-t.height*t.scaleY/2,l=r+t.width*t.scaleX,c=s+t.height*t.scaleY,d=t.left,p=t.top;let h=[];this.clearGuidesline(e);let u=!1;if(Math.abs(r)<n){if(t.set({left:t.width*t.scaleX/2}),!this.guidelineExists(e,"vertical-left")){const t=this.createVerticalGuideline(e,0,"vertical-left");h.push(t),e.add(t)}u=!0}if(Math.abs(s)<n){if(t.set({top:t.height*t.scaleY/2}),!this.guidelineExists(e,"horizontal-top")){const t=this.createHorizontalGuideline(e,0,"horizontal-top");h.push(t),e.add(t)}u=!0}if(Math.abs(l-o)<n){if(t.set({left:o-t.width*t.scaleX/2}),!this.guidelineExists(e,"vertical-right")){const t=this.createVerticalGuideline(e,o-1,"vertical-right");h.push(t),e.add(t)}u=!0}if(Math.abs(c-a)<n){if(t.set({top:a-t.height*t.scaleY/2}),!this.guidelineExists(e,"horizontal-bottom")){const t=this.createHorizontalGuideline(e,a,"horizontal-bottom");h.push(t),e.add(t)}u=!0}if(Math.abs(d-o/2)<n){if(t.set({left:o/2}),!this.guidelineExists(e,"vertical-center")){const t=this.createVerticalGuideline(e,o/2,"vertical-center");h.push(t),e.add(t)}u=!0}if(Math.abs(p-a/2)<n){if(t.set({top:a/2}),!this.guidelineExists(e,"horizontal-center")){const t=this.createHorizontalGuideline(e,a/2,"horizontal-center");h.push(t),e.add(t)}u=!0}u?this.setGuidelines(h):this.clearGuidesline(e),e.renderAll()},this.createVerticalGuideline=(e,t,n)=>new fabric.Line([t,0,t,e.height],{stroke:"red",strokeWidth:1,selectable:!1,evented:!1,name:n,id:n,opacity:.8,strokeDashArray:[5,5]}),this.createHorizontalGuideline=(e,t,n)=>new fabric.Line([0,t,e.width,t],{stroke:"red",strokeWidth:1,selectable:!1,evented:!1,name:n,id:n,opacity:.8,strokeDashArray:[5,5]}),this.guidelineExists=(e,t)=>e.getObjects().some((e=>e.name===t||e.id===t)),this.onObjectMoving=(e,t)=>{}}}(),window.saveInBrowser={save:(e,t)=>{t instanceof Object&&(t=JSON.stringify(t)),localStorage.setItem(e,t);const n=new CustomEvent("ImageEditor.storageSave",{detail:{name:e,value:t}});window.dispatchEvent(n)},load:e=>{let t=localStorage.getItem(e);return t=JSON.parse(t),t},remove:e=>{localStorage.removeItem(e)}},function(){"use strict";var e=[{name:"select",title:"Select/move object (V)",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M423.547,323.115l-320-320c-3.051-3.051-7.637-3.947-11.627-2.304s-6.592,5.547-6.592,9.856V480 c0,4.501,2.837,8.533,7.083,10.048c4.224,1.536,8.981,0.192,11.84-3.285l85.205-104.128l56.853,123.179 c1.792,3.883,5.653,6.187,9.685,6.187c1.408,0,2.837-0.277,4.203-0.875l74.667-32c2.645-1.131,4.736-3.285,5.76-5.973 c1.024-2.688,0.939-5.675-0.277-8.299l-57.024-123.52h132.672c4.309,0,8.213-2.603,9.856-6.592 C427.515,330.752,426.598,326.187,423.547,323.115z"></path></g></g></svg>'},{name:"shapes",title:"Shapes",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 490.927 490.927" xml:space="preserve"><path d="M336.738,178.502c-12.645,0-24.852,1.693-36.627,4.582L202.57,11.786c-5.869-10.321-22.84-10.321-28.709,0L2.163,313.311 c-2.906,5.105-2.889,11.385,0.078,16.466c2.953,5.088,8.389,8.216,14.275,8.216l166.314,0.009 c2.818,82.551,70.688,148.88,153.906,148.88c85.012,0,154.19-69.167,154.19-154.186S421.749,178.502,336.738,178.502z  M44.917,304.964l143.299-251.63L331.515,304.97L44.917,304.964z"></path></svg>'},{name:"images",title:"Images",icon:'<svg viewBox="0 0 576 512"><path d="M160 80H512c8.8 0 16 7.2 16 16V320c0 8.8-7.2 16-16 16H490.8L388.1 178.9c-4.4-6.8-12-10.9-20.1-10.9s-15.7 4.1-20.1 10.9l-52.2 79.8-12.4-16.9c-4.5-6.2-11.7-9.8-19.4-9.8s-14.8 3.6-19.4 9.8L175.6 336H160c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM96 96V320c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H160c-35.3 0-64 28.7-64 64zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120V344c0 75.1 60.9 136 136 136H456c13.3 0 24-10.7 24-24s-10.7-24-24-24H136c-48.6 0-88-39.4-88-88V120zm208 24a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>'},{name:"draw",title:"Free draw",icon:'<svg height="512pt" viewBox="0 -3 512 512" width="512pt"><g id="surface1"><path d="M 497.171875 86.429688 C 506.734375 76.867188 512 64.152344 512 50.628906 C 512 37.105469 506.734375 24.390625 497.171875 14.828125 C 487.609375 5.265625 474.894531 0 461.371094 0 C 447.847656 0 435.132812 5.265625 425.570312 14.828125 L 198.296875 242.105469 L 269.894531 313.703125 Z M 497.171875 86.429688 " style="stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;"></path><path d="M 65.839844 506.65625 C 92.171875 507.21875 130.371094 496.695312 162.925781 459.074219 C 164.984375 456.691406 166.894531 454.285156 168.664062 451.855469 C 179.460938 435.875 184.695312 418.210938 183.855469 400.152344 C 182.945312 380.5625 174.992188 362.324219 161.460938 348.796875 C 150.28125 337.613281 134.722656 331.457031 117.648438 331.457031 C 95.800781 331.457031 73.429688 341.296875 56.277344 358.449219 C 31.574219 383.152344 31.789062 404.234375 31.976562 422.839844 C 32.15625 440.921875 32.316406 456.539062 11.101562 480.644531 L 0 493.257812 C 0 493.257812 26.828125 505.820312 65.839844 506.65625 Z M 65.839844 506.65625 " style="stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;"></path><path d="M 209.980469 373.621094 L 248.496094 335.101562 L 176.894531 263.503906 L 137.238281 303.160156 C 154.691406 306.710938 170.464844 315 182.859375 327.394531 C 195.746094 340.285156 205.003906 356.1875 209.980469 373.621094 Z M 209.980469 373.621094 " style="stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g></svg>'},{name:"rect",title:"Rectangle",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2z"/></svg>'},{name:"ellipse",title:"Ellipse",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8"/></svg>'},{name:"triangle",title:"Triangle",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767z"/></svg>'},{name:"line",title:"Line",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M349.091,0v124.516L124.516,349.091H0V512h162.909V387.484l224.574-224.574H512V0H349.091z M54.303,457.696v-54.303 h54.303v54.303H54.303z M457.696,108.605h-54.303V54.303h54.303V108.605z"></path></svg>'},{name:"path",title:"Connectable lines & curves",icon:'<svg id="svg8" viewBox="28 55 140 140"><path d="m 28.386086,150.01543 v 43.10301 H 71.489092 V 178.7505 H 120.75466 V 164.38283 H 71.355237 L 71.488872,150.0086 H 57.121421 c 0,-49.247 14.367449,-63.614929 63.633239,-63.614929 v -14.36768 c -63.633239,0 -78.000906,28.735609 -78.000906,77.982609 l -14.367888,0.007 z m 14.367669,28.73507 v -14.36767 h 14.367668 v 14.36767 z" id="path840" style="stroke-width: 0.264583;"></path><path d="m 120.74975,150.00843 v 43.10301 h 43.10301 V 150.0016 l -43.10301,0.007 z m 14.36767,28.73507 v -14.36767 h 14.36767 v 14.36767 z" id="path840-1" style="stroke-width: 0.264583;"></path><path d="m 120.74975,57.658601 v 43.103009 h 43.10301 V 57.651771 l -43.10301,0.007 z m 14.36767,28.73507 v -14.36767 h 14.36767 v 14.36767 z" id="path840-1-0" style="stroke-width: 0.264583;"></path></svg>'},{name:"textbox",title:"Text box",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M497,90c8.291,0,15-6.709,15-15V15c0-8.291-6.709-15-15-15h-60c-8.291,0-15,6.709-15,15v15H90V15c0-8.401-6.599-15-15-15 H15C6.599,0,0,6.599,0,15v60c0,8.399,6.599,15,15,15h15v332H15c-8.291,0-15,6.709-15,15v60c0,8.291,6.709,15,15,15h60 c8.291,0,15-6.709,15-15v-15h332v15c0,8.399,6.599,15,15,15h60c8.401,0,15-6.601,15-15v-60c0-8.401-6.599-15-15-15h-15V90H497z  M452,422h-15c-8.401,0-15,6.599-15,15v15H90v-15c0-8.291-6.709-15-15-15H60V90h15c8.401,0,15-6.601,15-15V60h332v15 c0,8.291,6.709,15,15,15h15V422z"></path></g></g><g><g><path d="M361,105H151c-8.291,0-15,6.709-15,15v60c0,6.064,3.647,11.543,9.258,13.857c5.625,2.329,12.056,1.04,16.348-3.252 L187.211,165H226v176.459l-27.48,42.221c-3.062,4.6-3.354,10.518-0.747,15.396S205.463,407,211,407h90 c5.537,0,10.62-3.047,13.228-7.925c2.608-4.878,2.314-10.796-0.747-15.396L286,341.459V165h38.789l25.605,25.605 c4.307,4.307,10.781,5.596,16.348,3.252c5.61-2.314,9.258-7.793,9.258-13.857v-60C376,111.709,369.291,105,361,105z"></path></g></g></svg>'},{name:"upload",title:"Upload image",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M412.907,214.08C398.4,140.693,333.653,85.333,256,85.333c-61.653,0-115.093,34.987-141.867,86.08 C50.027,178.347,0,232.64,0,298.667c0,70.72,57.28,128,128,128h277.333C464.213,426.667,512,378.88,512,320 C512,263.68,468.16,218.027,412.907,214.08z M298.667,277.333v85.333h-85.333v-85.333h-64L256,170.667l106.667,106.667H298.667z"></path></svg>'},{name:"background",title:"Canvas option",icon:'<svg viewBox="0 0 512 512"><path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>'},{name:"ruler",title:"Mostrar réguas e guias (Shift+R)",icon:'<svg viewBox="0 0 512 512"><path d="M177.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L17.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L177.9 494.1z"/></svg>'},{name:"templates",title:"Tempaltes",icon:'<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.675 3h.825v18h-2.175c-3.59 0-5.385 0-6.61-.966a4.497 4.497 0 0 1-.749-.748C3 18.06 3 16.266 3 12.675v-1.35c0-3.59 0-5.385.966-6.61a4.5 4.5 0 0 1 .748-.749C5.94 3 7.734 3 11.325 3h1.35Zm6.61 17.034c-.926.73-2.178.909-4.285.952v-9.968h6v1.657c0 3.59 0 5.386-.966 6.61-.22.279-.47.53-.748.749Zm1.709-10.516H15V3.014c2.107.044 3.36.222 4.286.952.278.22.529.47.748.748.788 1 .933 2.38.96 4.804Z" fill="currentColor"></path></svg>'}];const t=[{name:"animation",title:"Play animation",icon:'<svg viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" >  <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/></svg>'},{name:"clear",title:"Clear",icon:'<svg  fill="currentColor" class="bi bi-eraser-fill" viewBox="0 0 16 16"><path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z"/></svg>'},{name:"undo",title:"Undo",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512.011 512.011" xml:space="preserve"><path d="M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432             c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128             c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392             c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64             c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z"></path></svg>'},{name:"redo",title:"Redo",icon:'<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512.011 512.011" xml:space="preserve" style="transform: scale(-1, 1);"><path d="M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432             c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128             c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392             c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64             c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z"></path></svg>'},{name:"save",title:"Save",icon:'<svg viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>'},{name:"download",title:"Download",icon:'<svg viewBox="0 0 512 512"><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>'},{name:"fullscreen",title:"Fullscreen",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>'}];window.ImageEditor.prototype.initializeToolbar=function(){const n=this;let i=[],o=[];Array.isArray(this.buttons)&&this.buttons.length?(e.forEach((e=>{this.buttons.includes(e.name)&&i.push(e)})),t.forEach((e=>{this.buttons.includes(e.name)&&o.push(e)}))):(i=e,o=t),this.getCanvasJSON=function(){const e=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t=e.map((e=>({obj:e,excludeFromExport:e.excludeFromExport})));e.forEach((e=>{e.excludeFromExport=!1}));const n=JSON.stringify(this.canvas.toJSON(["metadata","excludeFromExport"]));return t.forEach((e=>{e.obj.excludeFromExport=e.excludeFromExport})),n},this.toJSONWithGuides=function(){const e=this.canvas.toJSON(["metadata"]),t=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))).map((e=>e.toObject(["metadata"])));return 0===t.length||(e.objects||(e.objects=[]),e.objects=e.objects.concat(t)),e},this.saveToBrowser=function(){const e=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t=e.map((e=>({obj:e,excludeFromExport:e.excludeFromExport})));e.forEach((e=>{e.excludeFromExport=!1})),console.log("saving canvas",this.canvas.toJSON(["metadata","excludeFromExport","locked"])),saveInBrowser.save("canvasEditor",this.canvas.toJSON(["metadata","excludeFromExport","locked"])),t.forEach((e=>{e.obj.excludeFromExport=e.excludeFromExport}))},this.checkSnapping=function(e){if(!this.canvas||!e)return!1;if(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))return!1;const t=10/this.canvas.getZoom(),n=e.getBoundingRect(),i=n.left,o=n.top,a=n.left+n.width,r=n.top+n.height,s=i+n.width/2,l=o+n.height/2,c=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));let d=null,p=t;if(c.forEach((e=>{if(e.metadata.isGuide&&e.metadata.isHorizontal||e.metadata.isMargin&&("marginTop"===e.metadata.id||"marginBottom"===e.metadata.id)){const t=e.y1,n=Math.abs(t-o);n<p&&(p=n,d={axis:"y",target:o,value:t,guide:e});const i=Math.abs(t-l);i<p&&(p=i,d={axis:"y",target:l,value:t,guide:e});const a=Math.abs(t-r);a<p&&(p=a,d={axis:"y",target:r,value:t,guide:e})}else if(e.metadata.isGuide&&!e.metadata.isHorizontal||e.metadata.isMargin&&("marginLeft"===e.metadata.id||"marginRight"===e.metadata.id)){const t=e.x1,n=Math.abs(t-i);n<p&&(p=n,d={axis:"x",target:i,value:t,guide:e});const o=Math.abs(t-s);o<p&&(p=o,d={axis:"x",target:s,value:t,guide:e});const r=Math.abs(t-a);r<p&&(p=r,d={axis:"x",target:a,value:t,guide:e})}})),d){if(d.guide.metadata.isGuide&&d.guide.set({stroke:"#ff3860",strokeWidth:2,opacity:1}),"y"===d.axis){const t=d.value-d.target;e.set({top:e.top+t})}else{const t=d.value-d.target;e.set({left:e.left+t})}const t=this;return setTimeout((()=>{d.guide&&d.guide.metadata&&d.guide.metadata.isGuide&&(d.guide.active||d.guide.set({stroke:"#00a8ff",strokeWidth:2,opacity:.7}),t.canvas.renderAll())}),300),!0}return!1},this.forceGuidesMovable=function(){if(!this.canvas)return;const e=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==e.length&&(e.forEach(((e,t)=>{try{const t=e.metadata.isHorizontal;e.set({selectable:!0,evented:!0,lockMovementX:t,lockMovementY:!t,hasControls:!1,hasBorders:!0,padding:8,strokeWidth:2,hoverCursor:t?"ns-resize":"ew-resize",moveCursor:t?"ns-resize":"ew-resize",excludeFromExport:!0,opacity:e.active?1:.7})}catch(e){console.error(`Erro ao configurar guia ${t+1}:`,e)}})),this.canvas.renderAll())};try{this.containerEl.append('<div class="toolbar" id="toolbar"><div class="main-buttons"></div><div class="extended-buttons"></div></div>'),(()=>{i.forEach((e=>{$(`${this.containerSelector} #toolbar .main-buttons`).append(`<button id="${e.name}">${e.icon}</button>`)})),$(`${this.containerSelector} #toolbar .main-buttons button`).click((function(){let e=$(this).attr("id");if("ruler"===e)return n.toggleRulers(),void $(this).toggleClass("active");$(`${n.containerSelector} #toolbar button`).removeClass("active"),$(`${n.containerSelector} #toolbar button#${e}`).addClass("active"),n.setActiveTool(e)}))})(),(()=>{o.forEach((e=>{$(`${this.containerSelector} #toolbar .extended-buttons`).append(`<button id="${e.name}">${e.icon}</button>`)})),$(`${this.containerSelector} #toolbar .extended-buttons button`).click((function(){let e=$(this).attr("id");"save"===e?(console.log(n.canvas),console.log(n.canvas.toJSON()),console.log(n.canvas.toJSON(["metadata","excludeFromExport"])),n.saveToBrowser(),n.toast("Success")):"clear"===e?window.confirm("This will clear the canvas! Are you sure?")&&(n.canvas.clear(),saveInBrowser.remove("canvasEditor")):"download"===e?($(n.containerSelector).append('<div class="custom-modal-container">\n              <div class="custom-modal-content">\n                <div class="button-download" id="svg">Download as SVG</div>\n                <div class="button-download" id="png">Download as PNG</div>\n                <div class="button-download" id="jpg">Download as JPG</div>\n                <div class="button-download" id="webp">Download as WEBP</div>\n                <div class="button-download" id="json">Download as JSON</div>\n              </div>\n            </div>'),$(".custom-modal-container").click((function(){$(this).remove()})),$(".custom-modal-container .button-download").click((function(e){let t=$(this).attr("id"),i=n.canvas;i.setBackgroundColor("#FFFFFF");const o=i.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));if(o.forEach((e=>{e.visible=!1})),i.renderAll(),"svg"===t)n.downloadSVG(i.toSVG({suppressPreamble:!0}));else if("png"===t)n.downloadImage(i.toDataURL());else if("jpg"===t)n.downloadImage(i.toDataURL({format:"jpeg"}),"jpg","image/jpeg");else if("webp"===t)n.downloadImage(i.toDataURL({format:"webp"}),"webp","image/webp");else if("json"===t){const e=n.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t={};e.forEach(((e,n)=>{t[n]=e.excludeFromExport,e.excludeFromExport=!1}));const i=JSON.stringify(n.canvas.toJSON(["metadata","excludeFromExport"]));n.downloadJSON(i),e.forEach(((e,n)=>{e.excludeFromExport=t[n]}))}o.forEach((e=>{e.visible=!0})),i.renderAll()}))):"undo"===e?n.undo():"redo"===e?n.redo():"animation"===e&&n.animations.runAnimation()}))})(),$(`${this.containerSelector}`).append('<div id="footerbar" class="toolbar"></div>')}catch(e){console.error("can't create toolbar")}}}(),window.ImageEditor.prototype.initializeAligningGuidelines=function(e){var t,n=e.getSelectionContext(),i=1,o="rgb(0,255,0)",a=1;function r(e){s(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5)}function s(e,r,s,l){n.save(),n.lineWidth=i,n.strokeStyle=o,n.beginPath(),n.moveTo(e*a+t[4],r*a+t[5]),n.lineTo(s*a+t[4],l*a+t[5]),n.stroke(),n.restore()}function l(e,t){e=Math.round(e),t=Math.round(t);for(var n=e-4,i=e+4;n<=i;n++)if(n===t)return!0;return!1}var c=[],d=[];e.on("mouse:down",(function(){t=e.viewportTransform,a=e.getZoom()})),e.on("object:moving",(function(n){var i=n.target,o=e.getObjects(),a=i.getCenterPoint(),r=a.x,s=a.y,p=i.getBoundingRect(),h=p.height/t[3],u=p.width/t[0],g=!1,v=!1;if(e._currentTransform){for(var f=o.length;f--;)if(o[f]!==i){var m=o[f].getCenterPoint(),b=m.x,w=m.y,y=o[f].getBoundingRect(),x=y.height/t[3],k=y.width/t[0];l(r+u/2,b-k/2)&&(v=!0,c.push({x:b-k/2,y1:w<s?w-x/2-5:w+x/2+5,y2:s>w?s+h/2+5:s-h/2-5}),i.setPositionByOrigin(new fabric.Point(b-k/2-u/2,s),"center","center")),l(r-u/2,b+k/2)&&(v=!0,c.push({x:b+k/2,y1:w<s?w-x/2-5:w+x/2+5,y2:s>w?s+h/2+5:s-h/2-5}),i.setPositionByOrigin(new fabric.Point(b+k/2+u/2,s),"center","center")),l(w+x/2,s-h/2)&&(g=!0,d.push({y:w+x/2,x1:b<r?b-k/2-5:b+k/2+5,x2:r>b?r+u/2+5:r-u/2-5}),i.setPositionByOrigin(new fabric.Point(r,w+x/2+h/2),"center","center")),l(w-x/2,s+h/2)&&(g=!0,d.push({y:w-x/2,x1:b<r?b-k/2-5:b+k/2+5,x2:r>b?r+u/2+5:r-u/2-5}),i.setPositionByOrigin(new fabric.Point(r,w-x/2-h/2),"center","center")),l(b,r)&&(v=!0,c.push({x:b,y1:w<s?w-x/2-5:w+x/2+5,y2:s>w?s+h/2+5:s-h/2-5}),i.setPositionByOrigin(new fabric.Point(b,s),"center","center")),l(b-k/2,r-u/2)&&(v=!0,c.push({x:b-k/2,y1:w<s?w-x/2-5:w+x/2+5,y2:s>w?s+h/2+5:s-h/2-5}),i.setPositionByOrigin(new fabric.Point(b-k/2+u/2,s),"center","center")),l(b+k/2,r+u/2)&&(v=!0,c.push({x:b+k/2,y1:w<s?w-x/2-5:w+x/2+5,y2:s>w?s+h/2+5:s-h/2-5}),i.setPositionByOrigin(new fabric.Point(b+k/2-u/2,s),"center","center")),l(w,s)&&(g=!0,d.push({y:w,x1:b<r?b-k/2-5:b+k/2+5,x2:r>b?r+u/2+5:r-u/2-5}),i.setPositionByOrigin(new fabric.Point(r,w),"center","center")),l(w-x/2,s-h/2)&&(g=!0,d.push({y:w-x/2,x1:b<r?b-k/2-5:b+k/2+5,x2:r>b?r+u/2+5:r-u/2-5}),i.setPositionByOrigin(new fabric.Point(r,w-x/2+h/2),"center","center")),l(w+x/2,s+h/2)&&(g=!0,d.push({y:w+x/2,x1:b<r?b-k/2-5:b+k/2+5,x2:r>b?r+u/2+5:r-u/2-5}),i.setPositionByOrigin(new fabric.Point(r,w+x/2-h/2),"center","center"))}g||(d.length=0),v||(c.length=0)}})),e.on("before:render",(function(){e.contextTop&&e.clearContext(e.contextTop)})),e.on("after:render",(function(){for(var e=c.length;e--;)s((t=c[e]).x+.5,t.y1>t.y2?t.y2:t.y1,t.x+.5,t.y2>t.y1?t.y2:t.y1);var t;for(e=d.length;e--;)r(d[e]);c.length=d.length=0})),e.on("mouse:up",(function(){c.length=d.length=0,e.renderAll()}))},window.ImageEditor.prototype.initializeCenteringGuidelines=function(e){for(var t,n=e.getWidth(),i=e.getHeight(),o=n/2,a=i/2,r={},s={},l=e.getSelectionContext(),c=o-4,d=o+4;c<=d;c++)r[Math.round(c)]=!0;for(c=a-4,d=a+4;c<=d;c++)s[Math.round(c)]=!0;function p(e,n,i,o){l.save(),l.strokeStyle="rgba(255,0,241,0.5)",l.lineWidth=1,l.beginPath(),l.moveTo(e*t[0],n*t[3]),l.lineTo(i*t[0],o*t[3]),l.stroke(),l.restore()}var h,u;e.on("mouse:down",(function(){t=e.viewportTransform})),e.on("object:moving",(function(t){var n=t.target,i=n.getCenterPoint();e._currentTransform&&(h=Math.round(i.x)in r,((u=Math.round(i.y)in s)||h)&&n.setPositionByOrigin(new fabric.Point(h?o:i.x,u?a:i.y),"center","center"))})),e.on("before:render",(function(){e.contextTop&&e.clearContext(e.contextTop)})),e.on("after:render",(function(){h&&p(o+.5,0,o+.5,i),u&&p(0,a+.5,n,a+.5)})),e.on("mouse:up",(function(){h=u=null,e.renderAll()}))},function(){"use strict";window.ImageEditor.prototype.initializeCanvas=function(){try{$(`${this.containerSelector} .main-panel`).append('<div class="canvas-holder" id="canvas-holder"><div class="content"><canvas id="c"></canvas></div></div>'),fabric.Object.prototype.toObject=(t=fabric.Object.prototype.toObject,function(e){var n=t.call(this,e);return n.animation=this.animation,n}),fabric.Object.prototype.initialize=(e=fabric.Object.prototype.initialize,function(t){e.call(this,t),this.animation=t.animation||null}),fabric.Object.prototype.originX="center",fabric.Object.prototype.originY="center";const n={renderOnAddRemove:!1},i=new fabric.Canvas("c",n).setDimensions(this.dimensions);i.originalW=i.width,i.originalH=i.height,fabric.Object.prototype.transparentCorners=!1,fabric.Object.prototype.cornerStyle="circle",fabric.Object.prototype.borderColor="#8b3dff",fabric.Object.prototype.cornerColor="#ffffff",fabric.Object.prototype.cornerStrokeColor="#6d6d6d",fabric.Object.prototype.padding=0;const o=`data:image/svg+xml;utf8,${encodeURIComponent('\n        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <g filter="url(#filter0_d)">\n            <circle cx="9" cy="9" r="5" fill="white"/>\n            <circle cx="9" cy="9" r="4.75" stroke="black" stroke-opacity="0.3" stroke-width="0.5"/>\n          </g>\n            <path d="M10.8047 11.1242L9.49934 11.1242L9.49934 9.81885" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M6.94856 6.72607L8.25391 6.72607L8.25391 8.03142" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M9.69517 6.92267C10.007 7.03301 10.2858 7.22054 10.5055 7.46776C10.7252 7.71497 10.8787 8.01382 10.9517 8.33642C11.0247 8.65902 11.0148 8.99485 10.9229 9.31258C10.831 9.63031 10.6601 9.91958 10.4262 10.1534L9.49701 11.0421M8.25792 6.72607L7.30937 7.73554C7.07543 7.96936 6.90454 8.25863 6.81264 8.57636C6.72073 8.89408 6.71081 9.22992 6.78381 9.55251C6.8568 9.87511 7.01032 10.174 7.23005 10.4212C7.44978 10.6684 7.72855 10.8559 8.04036 10.9663" stroke="black" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <defs>\n          <filter id="filter0_d" x="0" y="0" width="18" height="18" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n            <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n            <feOffset/>\n            <feGaussianBlur stdDeviation="2"/>\n            <feColorMatrix type="matrix" values="0 0 0 0 0.137674 0 0 0 0 0.190937 0 0 0 0 0.270833 0 0 0 0.15 0"/>\n            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n          </filter>\n          </defs>\n        </svg>\n        ')}`,a=document.createElement("img");function r(e,t,n,i,o){var r=this.cornerSize;e.save(),e.translate(t,n),e.rotate(fabric.util.degreesToRadians(o.angle)),e.drawImage(a,-r/2,-r/2,r,r),e.restore()}a.src=o,fabric.Object.prototype.controls.mtr=new fabric.Control({x:0,y:.5,offsetX:0,offsetY:40,actionHandler:fabric.controlsUtils.rotationWithSnapping,actionName:"rotate",render:r,cornerSize:38,withConnection:!0}),i.preserveObjectStacking=!0,i.on("selection:created",(e=>this.setActiveSelection(e.selected))),i.on("selection:updated",(e=>this.setActiveSelection(e.selected))),i.on("selection:cleared",(e=>this.setActiveSelection(null))),i.on("object:rotating",(e=>{e.e.shiftKey?e.target.snapAngle=15:e.target.snapAngle=!1})),i.on("object:rotating",(e=>{var t=e.target,n=Math.round(t.angle);if(t.angleText)o=t.angleText.item(1),a=t.angleText.item(0),o.set("text",n+"°"),a.set({width:o.width+20,height:o.height+20}),t.angleText.setCoords();else{var o=new fabric.Text(n+"°",{fontSize:18,fill:"white",fontFamily:"sans-serif",originX:"center",originY:"center"}),a=new fabric.Rect({fill:"#333333",width:o.width+20,height:o.height+20,rx:5,ry:5,stroke:"white",strokeWidth:1,originX:"center",originY:"center"});t.angleText=new fabric.Group([a,o],{originX:"center",originY:"center"}),i.on("mouse:move",(function(e){if(t.angleText){const n=i.getPointer(e.e);t.angleText.set({left:n.x+50,top:n.y+50}),i.renderAll()}})),i.add(t.angleText)}t.angleText.set({left:t.left,top:t.top-10}),t.set({hasControls:!1}),i.renderAll()})),i.on("mouse:up",(function(e){i.getActiveObject()&&i.getActiveObject().angleText&&(i.remove(i.getActiveObject().angleText),i.getActiveObject().angleText=null,i.renderAll())})),i.on("object:moving",(e=>{var t=e.target;this.handleObjectMoving(i,t),t.set({hasControls:!1})})),i.on("object:scaling",(e=>{e.target.set({hasControls:!1})})),i.on("object:modified",(e=>{if(this.canvas){let e=this.canvas.toJSON();this.history?this.history.push(JSON.stringify(e)):console.error("History (this.history) is not defined.")}else console.error("Canvas (this.canvas) is not defined.");this.clearGuidesline(i);var t=e.target;t&&t.set({hasControls:!0})}));let s=null;if(window.saveInBrowser)try{s=window.saveInBrowser.load("canvasEditor"),s&&(console.log("loading canvas from local storage",s),i.loadFromJSON(s,(()=>{i.getObjects().forEach((e=>{e.locked&&(e.lockMovementX=!0,e.lockMovementY=!0,e.lockScalingX=!0,e.lockScalingY=!0,e.lockRotation=!0,e.lockUniScaling=!0,e.lockSkewingX=!0,e.lockSkewingY=!0,e.selectable=!0,e.hasControls=!0,e.hasRotatingPoint=!0)})),i.renderAll()})))}catch(l){console.error("Erro ao carregar canvas salvo:",l)}else console.warn("saveInBrowser não está disponível. O canvas não será carregado do armazenamento local.");return document.addEventListener("keydown",(e=>{const t=e.which||e.keyCode;let n;document.querySelectorAll("textarea:focus, input:focus").length>0||(37!==t&&38!==t&&39!==t&&40!==t||(e.preventDefault(),n=i.getActiveObject(),n))&&(37===t?n.left-=1:39===t?n.left+=1:38===t?n.top-=1:40===t&&(n.top+=1),37!==t&&38!==t&&39!==t&&40!==t||(n.setCoords(),i.renderAll(),i.fire("object:modified")))})),document.addEventListener("keydown",(e=>{46===(e.which||e.keyCode)&&0===document.querySelectorAll("textarea:focus, input:focus").length&&(i.getActiveObjects().forEach((e=>{i.remove(e)})),i.discardActiveObject().requestRenderAll(),i.fire("object:modified"))})),document.addEventListener("mousedown",(e=>{document.getElementById("canvas-holder")==e.target&&(i.discardActiveObject(),i.renderAll())})),setTimeout((()=>{let e=i.toJSON();this.history&&this.history.push(JSON.stringify(e))}),1e3),this.canvas=i,this.initRulerComponent?this.initRulerComponent():console.warn("initRulerComponent não está disponível"),setTimeout((()=>{this.setupRulerAfterCanvasReady?this.setupRulerAfterCanvasReady():console.warn("setupRulerAfterCanvasReady não está disponível")}),500),i}catch(c){return console.error("can't create canvas instance",c),null}var e,t}}(),function(){"use strict";const e=['<svg viewBox="-10 -10 120 120"><polygon points="0 0, 0 100, 100 100, 100 0" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-8 -8 120 120"><polygon fill="none" stroke-width="8" stroke="black" points="50 0, 85 50, 50 100, 15 50"></polygon></svg>','<svg viewBox="-10 -10 120 120"><polygon points="25 0, 0 100, 75 100, 100 0" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-8 -8 120 120"><polygon points="0,100 30,10 70,10 100,100" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-10 -10 120 120"><path d="M 80,80 V 20 H 20 v 60 z m 20,20 V 0 H 0 v 100 z" stroke-width="8" stroke="#000" fill-rule="evenodd" fill="none"></path></svg>','<svg viewBox="0 0 100 100"><polygon points="26,86 11.2,40.4 50,12.2 88.8,40.4 74,86 " stroke="#000" stroke-width="8" fill="none"></polygon></svg>','<svg viewBox="0 0 100 100"><polygon points="30.1,84.5 10.2,50 30.1,15.5 69.9,15.5 89.8,50 69.9,84.5" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="0 0 100 100"><polygon points="34.2,87.4 12.3,65.5 12.3,34.5 34.2,12.6 65.2,12.6 87.1,34.5 87.1,65.5 65.2,87.4" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="0 0 100 100"><polygon points="11.2,70 11.2,40 50,12.2 88.8,40 88.8,70" stroke="#000" stroke-width="8" fill="none"></polygon></svg>','<svg viewBox="0 0 100 100"><polygon points="10.2,70 10.2,35 30.1,15 69.9,15 89.8,35 89.8,70" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-10 -10 120 120"><polygon points="50 15, 100 100, 0 100" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-10 -10 120 120"><polygon points="0 0, 100 100, 0 100" stroke-width="8" stroke="#000" fill="none"></polygon></svg>','<svg viewBox="-10 -10 120 120"><path d="M 26,85 50,45 74,85 Z m -26,15 50,-85 50,85 z" stroke-width="8" stroke="#000" fill="none"></path></svg>','<svg viewBox="8 50 100 100"><path d="M 62.68234,131.5107 H 26.75771 V 96.075507 Z M 11.572401,146.76255 V 59.66782 l 87.983665,87.09473 z" stroke-width="8" stroke="#000" fill="none" fill-rule="evenodd"></path></svg>','<svg viewBox="-2 -2 100 100"><circle cx="50" cy="50" r="40" stroke="#000" stroke-width="8" fill="none"></circle></svg>','<svg x="0px" y="0px" viewBox="0 0 96 120" xml:space="preserve"><path stroke="#000" stroke-width="8" fill="none" d="M9.113,65.022C11.683,45.575,28.302,30.978,48,30.978c19.696,0,36.316,14.598,38.887,34.045H9.113z"></path></svg>','<svg viewBox="-15 -15 152 136"><path stroke="#000000" stroke-width="8" d="m0 0l57.952755 0l0 0c32.006428 -1.4055393E-14 57.952755 23.203636 57.952755 51.82677c0 28.623135 -25.946327 51.82677 -57.952755 51.82677l-57.952755 0z" fill="none"></path></svg>','<svg viewBox="-5 -50 140 140"><path stroke="#000000" stroke-width="8" d="m20.013628 0l84.37401 0l0 0c11.053215 -1.04756605E-14 20.013626 9.282301 20.013626 20.7326c0 11.450296 -8.960411 20.7326 -20.013626 20.7326l-84.37401 0l0 0c-11.053222 0 -20.013628 -9.282303 -20.013628 -20.7326c-5.2380687E-15 -11.450298 8.960406 -20.7326 20.013628 -20.7326z" fill="none"></path></svg>','<svg viewBox="-8 -8 136 136"><path stroke="#000000" stroke-width="8" d="m0 51.82677l0 0c0 -28.623135 23.203636 -51.82677 51.82677 -51.82677l0 0c13.745312 0 26.927654 5.4603047 36.64706 15.17971c9.719406 9.719404 15.17971 22.901749 15.17971 36.64706l0 0c0 28.623135 -23.203636 51.82677 -51.82677 51.82677l0 0c-28.623135 0 -51.82677 -23.203636 -51.82677 -51.82677zm25.913385 0l0 0c0 14.311565 11.60182 25.913387 25.913385 25.913387c14.311565 0 25.913387 -11.601822 25.913387 -25.913387c0 -14.311565 -11.601822 -25.913385 -25.913387 -25.913385l0 0c-14.311565 0 -25.913385 11.60182 -25.913385 25.913385z" fill="none"></path></svg>','<svg viewBox="-7 -35 133 105"><path stroke="#000000" stroke-width="8" d="m0 57.952755l0 0c0 -32.006424 25.946333 -57.952755 57.952755 -57.952755c32.006428 0 57.952755 25.946333 57.952755 57.952755l-28.97638 0c0 -16.003212 -12.97316 -28.976377 -28.976376 -28.976377c-16.003212 0 -28.976377 12.9731655 -28.976377 28.976377z" fill="none"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m0 51.82677l42.665005 -9.161766l9.161766 -42.665005l9.161766 42.665005l42.665005 9.161766l-42.665005 9.161766l-9.161766 42.665005l-9.161766 -42.665005z" fill-rule="evenodd" fill="none"></path></svg>','<svg viewBox="-15 -15 137 130"><path stroke="#000000" stroke-width="8" d="m1.09633125E-4 37.631077l39.59224 2.632141E-4l12.234421 -37.63134l12.234425 37.63134l39.59224 -2.632141E-4l-32.030952 23.257183l12.234924 37.631172l-32.030636 -23.257607l-32.03064 23.257607l12.234926 -37.631172z" fill="none"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m0 59.82677l27.527777 -8.654488l-19.512508 -21.258898l28.167 6.268881l-6.268881 -28.167l21.258898 19.512508l8.654488 -27.527777l8.654491 27.527777l21.258896 -19.512508l-6.2688828 28.167l28.167 -6.268881l-19.512512 21.258898l27.527779 8.654488l-27.527779 8.654491l19.512512 21.258896l-28.167 -6.2688828l6.2688828 28.167l-21.258896 -19.512512l-8.654491 27.527779l-8.654488 -27.527779l-21.258898 19.512512l6.268881 -28.167l-28.167 6.2688828l19.512508 -21.258896z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m0 59.82677l33.496998 -3.4664993l-31.45845 -12.017807l33.252647 5.321434l-27.275928 -19.750513l30.742428 13.746485l-21.234838 -26.137014l26.137014 21.234838l-13.746485 -30.742428l19.750513 27.275928l-5.321434 -33.252647l12.017807 31.45845l3.4664993 -33.496998l3.4664993 33.496998l12.017811 -31.45845l-5.321434 33.252647l19.750511 -27.275928l-13.746483 30.742428l26.137009 -21.234838l-21.234833 26.137014l30.742424 -13.746485l-27.275925 19.750513l33.252647 -5.321434l-31.45845 12.017807l33.496994 3.4664993l-33.496994 3.4664993l31.45845 12.017811l-33.252647 -5.321434l27.275925 19.750511l-30.742424 -13.746483l21.234833 26.137009l-26.137009 -21.234833l13.746483 30.742424l-19.750511 -27.275925l5.321434 33.252647l-12.017811 -31.45845l-3.4664993 33.496994l-3.4664993 -33.496994l-12.017807 31.45845l5.321434 -33.252647l-19.750513 27.275925l13.746485 -30.742424l-26.137014 21.234833l21.234838 -26.137009l-30.742428 13.746483l27.275928 -19.750511l-33.252647 5.321434l31.45845 -12.017811z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m0 59.82677l9.952638 -6.5662766l-7.91409 -8.91803l11.312678 -3.7663116l-5.3359585 -10.662767l11.902236 -0.7101288l-2.3946476 -11.680401l11.680401 2.3946476l0.7101288 -11.902236l10.662767 5.3359585l3.7663116 -11.312678l8.91803 7.91409l6.5662766 -9.952638l6.5662804 9.952638l8.91803 -7.91409l3.7663116 11.312678l10.6627655 -5.3359585l0.7101288 11.902236l11.680397 -2.3946476l-2.3946457 11.680401l11.902237 0.7101288l-5.3359604 10.662767l11.312683 3.7663116l-7.914093 8.91803l9.952637 6.5662766l-9.952637 6.5662804l7.914093 8.91803l-11.312683 3.7663116l5.3359604 10.6627655l-11.902237 0.7101288l2.3946457 11.680397l-11.680397 -2.3946457l-0.7101288 11.902237l-10.6627655 -5.3359604l-3.7663116 11.312683l-8.91803 -7.914093l-6.5662804 9.952637l-6.5662766 -9.952637l-8.91803 7.914093l-3.7663116 -11.312683l-10.662767 5.3359604l-0.7101288 -11.902237l-11.680401 2.3946457l2.3946476 -11.680397l-11.902236 -0.7101288l5.3359585 -10.6627655l-11.312678 -3.7663116l7.91409 -8.91803z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -40 140 140" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m0 14.960629l89.732285 0l0 -14.960629l29.921257 29.921259l-29.921257 29.921259l0 -14.9606285l-89.732285 0z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -60 180 180" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0 32.238846l27.590551 -27.590551l0 13.795275l82.80315 0l0 -13.795275l27.590553 27.590551l-27.590553 27.59055l0 -13.795273l-82.80315 0l0 13.795273z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0.005249344 89.74016l29.913385 -29.913387l0 14.956692l44.87008 0l0 -44.87008l-14.956692 0l29.913387 -29.913385l29.913383 29.913385l-14.956688 0l0 74.78347l-74.78347 0l0 14.956688z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -20 200 200" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0.005249344 89.74016l29.913385 -29.913387l0 14.956692l40.35827 0l0 -44.87008l-14.956692 0l29.913387 -29.913385l29.913383 29.913385l-14.956688 0l0 44.87008l40.35826 0l0 -14.956692l29.913391 29.913387l-29.913391 29.913383l0 -14.956688l-110.62992 0l0 14.956688z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 150 150" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0.005249344 59.82677l26.922047 -19.30849l0 9.424511l23.020744 0l0 -23.020744l-9.424511 0l19.30849 -26.922047l19.30849 26.922047l-9.424507 0l0 23.020744l23.020744 0l0 -9.424511l26.922043 19.30849l-26.922043 19.30849l0 -9.424507l-23.020744 0l0 23.020744l9.424507 0l-19.30849 26.922043l-19.30849 -26.922043l9.424511 0l0 -23.020744l-23.020744 0l0 9.424507z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 158 136" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0 77.22078l81.043304 0l0 -51.480316l-12.870079 0l25.740158 -25.740158l25.740158 25.740158l-12.870079 0l0 77.220474l-106.78346 0z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 136 136" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0 102.96063l0 -57.915356l0 0c0 -24.87782 20.167458 -45.045277 45.045277 -45.045277l0 0l0 0c11.946751 0 23.404194 4.7458277 31.851818 13.193456c8.447632 8.447627 13.193459 19.905071 13.193459 31.851822l0 6.4350395l12.870079 0l-25.740158 25.740158l-25.740158 -25.740158l12.870079 0l0 -6.4350395c0 -10.661922 -8.643196 -19.305119 -19.305119 -19.305119l0 0l0 0c-10.661922 0 -19.305119 8.643196 -19.305119 19.305119l0 57.915356z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 180 180" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linecap="butt" d="m0 0l25.742783 0l0 0l38.614174 0l90.09974 0l0 52.74803l0 0l0 22.6063l0 15.070862l-90.09974 0l-61.5304 52.813744l22.916225 -52.813744l-25.742783 0l0 -15.070862l0 -22.6063l0 0z" fill-rule="evenodd"></path></svg>','<svg viewBox="-10 -10 180 180" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10"><path stroke="#000000" stroke-width="8" stroke-linejoin="round" stroke-linecap="butt" d="m1.0425826 140.35696l25.78009 -49.87359l0 0c-30.142242 -17.309525 -35.62507 -47.05113 -12.666686 -68.71045c22.958385 -21.65932 66.84442 -28.147947 101.387596 -14.990329c34.543175 13.1576185 48.438576 41.655407 32.10183 65.83693c-16.336761 24.181526 -57.559166 36.132935 -95.233955 27.61071z" fill-rule="evenodd"></path></svg>','<svg viewBox="0 -5 100 100" x="0px" y="0px"><path fill="none" stroke="#000" stroke-width="6" d="M55.2785222,56.3408313 C51.3476874,61.3645942 45.2375557,64.5921788 38.3756345,64.5921788 C31.4568191,64.5921788 25.3023114,61.3108505 21.3754218,56.215501 C10.6371566,55.0276798 2.28426396,45.8997866 2.28426396,34.8156425 C2.28426396,27.0769445 6.35589452,20.2918241 12.4682429,16.4967409 C14.7287467,7.0339786 23.2203008,0 33.3502538,0 C38.667844,0 43.5339584,1.93827732 47.284264,5.14868458 C51.0345695,1.93827732 55.9006839,0 61.2182741,0 C73.0769771,0 82.6903553,9.6396345 82.6903553,21.5307263 C82.6903553,22.0787821 82.6699341,22.6220553 82.629813,23.1598225 C87.1459866,27.1069477 90,32.9175923 90,39.396648 C90,51.2877398 80.3866218,60.9273743 68.5279188,60.9273743 C63.5283115,60.9273743 58.9277995,59.2139774 55.2785222,56.3408313 L55.2785222,56.3408313 Z M4.79695431,82 C7.44623903,82 9.59390863,80.6668591 9.59390863,79.0223464 C9.59390863,77.3778337 7.44623903,76.0446927 4.79695431,76.0446927 C2.1476696,76.0446927 0,77.3778337 0,79.0223464 C0,80.6668591 2.1476696,82 4.79695431,82 Z M13.7055838,71.9217877 C18.4995275,71.9217877 22.3857868,69.4606044 22.3857868,66.424581 C22.3857868,63.3885576 18.4995275,60.9273743 13.7055838,60.9273743 C8.91163999,60.9273743 5.02538071,63.3885576 5.02538071,66.424581 C5.02538071,69.4606044 8.91163999,71.9217877 13.7055838,71.9217877 Z"></path></svg>','<svg viewBox="-25 -25 550 550" x="0px" y="0px"><path d="M369.214 159.814c-91.389-55.601-48.533-134.078-46.693-137.34A14.999 14.999 0 0 0 309.515 0c-47.043 0-83.881 13.366-109.49 39.729-43.759 45.044-41.729 115.151-40.862 145.088.097 3.317.179 6.182.179 8.311 0 22.228 3.566 42.748 6.713 60.854 2.028 11.668 3.779 21.744 4.091 29.664.333 8.482-1.216 10.424-1.281 10.503-.221.263-2.062 1.241-7.036 1.241-5.674 0-9.856-1.854-13.563-6.009-14.476-16.233-15.477-60.554-12.709-84.667a14.999 14.999 0 0 0-14.898-16.732c-38.945 0-68.047 63.688-68.047 120.632 0 26.769 5.385 52.991 16.004 77.94 10.266 24.119 24.904 45.885 43.512 64.696C150.877 490.425 201.97 512 255.993 512c54.242 0 105.321-21.27 143.831-59.889 38.41-38.521 59.564-89.482 59.564-143.499 0-68.921-53.927-126.746-90.174-148.798z" fill="#000000" stroke-width="0" stroke="transparent"></path></svg>','<svg  viewBox="0 -28 512 512"><path d="M471.383 44.578C444.879 15.832 408.512 0 368.973 0c-29.555 0-56.621 9.344-80.45 27.77C276.5 37.07 265.605 48.45 256 61.73c-9.602-13.277-20.5-24.66-32.527-33.96C199.648 9.344 172.582 0 143.027 0c-39.539 0-75.91 15.832-102.414 44.578C14.426 72.988 0 111.801 0 153.871c0 43.3 16.137 82.938 50.781 124.742 30.992 37.395 75.535 75.356 127.117 119.313 17.614 15.012 37.579 32.027 58.309 50.152A30.023 30.023 0 0 0 256 455.516a30.03 30.03 0 0 0 19.785-7.43c20.73-18.129 40.707-35.152 58.328-50.172 51.575-43.95 96.117-81.906 127.11-119.305C495.867 236.81 512 197.172 512 153.867c0-42.066-14.426-80.879-40.617-109.289zm0 0" fill="#000000" stroke-width="0" stroke="transparent"></path></svg>','<svg viewBox="0 0 24 24"><path d="M6 0H1a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm0 8.5H1a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1zm9.5 6v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1zm0-8.5V1a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1zM23 0h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm-5 15.5h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1zm0 8.5h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1zM0 18v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1zm8.5 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1z" fill="#00000" stroke-width="0" stroke="transparent"></path></svg>','<svg viewBox="0 0 511.999 511.999" ><path d="M498.523 246.291c37.941-67.923-8.514-149.499-85.88-157.204l-28.232-2.813c-20.59-2.053-38.982-10.974-54.263-28.128-53.185-59.695-152.219-44.954-184.82 26.764-7.94 17.466-22.298 31.438-40.428 39.344l-39.773 17.34c-63.399 27.64-84.894 104.334-44.848 159.183l25.236 34.563c5.481 7.508 9.482 15.807 11.893 24.666l12.532 46.073c17.167 63.115 88.755 97.22 151.241 70.693l5.35-2.271c15.901-6.751 33.992-8.387 50.932-4.616l82.048 18.269c79.933 17.798 150.39-51.574 132.54-127.825l-10.384-44.351c-4.203-17.953-1.524-36.78 7.544-53.012l9.312-16.675z" fill="#00000" stroke-width="0" stroke="transparent"></path></svg>','<svg  viewBox="0 0 200 200" ><path  d="M170 129.496C170 168.434 138.66 200 100 200s-70-31.566-70-70.504c0-36.857 35.84-81.29 65.113-122.542 2.4-3.381 7.425-3.415 9.861-.06C135.351 48.737 170 92.591 170 129.496Z" fill="#00000" stroke-width="0" stroke="transparent"></path></svg>'];window.ImageEditor.prototype.initializeShapes=function(){const t=this;let n=e;Array.isArray(this.shapes)&&this.shapes.length&&n.push(...this.shapes),$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="shapes-panel"><div class="content"><p class="title">Shapes</p></div></div>'),n.forEach((e=>{$(`${this.containerSelector} .toolpanel#shapes-panel .content`).append(`<div class="button">${e}</div>`)})),$(`${this.containerSelector} .toolpanel#shapes-panel .content .button`).click((function(){let e=$(this).html();try{fabric.loadSVGFromString(e,((e,n)=>{var i=fabric.util.groupSVGElements(e,n);i.scaleToWidth(300),i.scaleToHeight(300),i.set({left:100,top:100,strokeUniform:!0,strokeLineJoin:"miter",strokeWidth:0,fill:"#000000"}),t.canvas.add(i).setActiveObject(i).renderAll(),t.canvas.fire("object:modified")}))}catch(e){console.error("can't add shape")}}))}}(),function(){"use strict";const e=[];window.ImageEditor.prototype.initializeImages=function(){const t=this;let n=e;Array.isArray(this.images)&&this.images.length&&(n=this.images),$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="images-panel"><div class="content"><p class="title">Images</p></div></div>'),$(`${this.containerSelector} .toolpanel#images-panel .content`).append('<div class="drag-drop-input"><div>Drag & drop files<br>or click to browse.<br>JPG, PNG, WEBP or SVG only!</div></div>'),$(`${this.containerSelector} .toolpanel#images-panel .content`).append('<div class="list-images"></div>'),n.forEach((e=>{$(`${this.containerSelector} .toolpanel#images-panel .content .list-images`).append(`<div class="button"><img src="${e}" alt="" loading="lazy" /></div>`)})),$(`${this.containerSelector} .toolpanel#images-panel .content .list-images`).on("click",".button",(function(){let e=$(this).find("img").attr("src");try{t.addImageFromUrl(e)}catch(e){console.error("can't add image",e)}}))}}(),function(){"use strict";const e=[{uuid:"8a4c1398-bece-4e32-bf3b-edc1d557f208",preview:"data:image/png;base64,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",data:'{"version":"5.3.0","objects":[{"type":"image","version":"5.3.0","originX":"center","originY":"center","left":387.42,"top":405.49,"width":600,"height":667,"fill":"rgb(0, 0, 0)","stroke":null,"strokeWidth":0,"strokeDashArray":[],"strokeLineCap":"butt","strokeDashOffset":0,"strokeLineJoin":"circle","strokeUniform":true,"strokeMiterLimit":4,"scaleX":0.85,"scaleY":0.85,"angle":360,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"backgroundColor":"","fillRule":"nonzero","paintFirst":"fill","globalCompositeOperation":"source-over","skewX":0,"skewY":0,"cropX":0,"cropY":0,"animation":{"type":"spin","duration":1000,"easing":"easeInOutQuad"},"src":"http://127.0.0.1:5501/screenshots/astronaut.png","crossOrigin":"anonymous","filters":[]},{"type":"i-text","version":"5.3.0","originX":"center","originY":"center","left":1000.74,"top":363.83,"width":251.18,"height":33.9,"fill":"white","stroke":null,"strokeWidth":1,"strokeDashArray":[],"strokeLineCap":"butt","strokeDashOffset":0,"strokeLineJoin":"circle","strokeUniform":true,"strokeMiterLimit":4,"scaleX":2.03,"scaleY":2.03,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"backgroundColor":"","fillRule":"nonzero","paintFirst":"fill","globalCompositeOperation":"source-over","skewX":0,"skewY":0,"fontFamily":"Impact, Charcoal, sans-serif","fontWeight":"normal","fontSize":30,"text":"Your text goes here...","underline":false,"overline":false,"linethrough":false,"textAlign":"left","fontStyle":"normal","lineHeight":1.2,"textBackgroundColor":"","charSpacing":0,"styles":[],"direction":"ltr","path":null,"pathStartOffset":0,"pathSide":"left","pathAlign":"baseline","animation":null}],"background":{"type":"linear","coords":{"x1":462.40000000000003,"y1":522.24,"x2":462.40000000000003,"y2":0},"colorStops":[{"id":"0","color":"red","offset":0},{"id":"1","color":"blue","offset":1}],"offsetX":0,"offsetY":0,"gradientUnits":"pixels","gradientTransform":null}}',timestamp:1746456655399}];window.ImageEditor.prototype.initializeTemplates=function(){const t=this;let n=[...e];Array.isArray(this.templates)&&this.templates.length&&n.push(...this.templates),$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="templates-panel"><div class="content"><p class="title">Templates</p></div></div>');const i=(e,t)=>{const n=JSON.stringify(e.toJSON());return{uuid:t,preview:e.toDataURL({format:"png",multiplier:.2}),data:n,timestamp:(new Date).getTime()}},o=(e,t)=>{const n=document.querySelector(`${e} .toolpanel#templates-panel .content .list-templates`);n.innerHTML="",t.forEach(((e,t)=>{const i=document.createElement("div");i.className="button list-templates-item",i.setAttribute("data-index",t);const o=document.createElement("img");o.src=e.preview,o.setAttribute("data-index",t),i.appendChild(o),n.appendChild(i)}))},a=(e,t)=>{const n=new CustomEvent("ImageEditor."+t,{detail:e});window.dispatchEvent(n)},r=e=>{const t=this,i=n[e],o=JSON.parse(i.data);t.canvas.loadFromJSON(o,(()=>{t.canvas.renderAll()}))},s=document.createElement("button");s.className="button btn",s.innerHTML="Add Template",s.onclick=()=>{const e=crypto.randomUUID(),r=i(t.canvas,e);n.push(r),t.templates=n,t.toast("Template added successfully"),a(r,"newTemplate"),o(t.containerSelector,n)};const l=document.createElement("div");l.className="tab-content",l.append(s),$(`${this.containerSelector} .toolpanel#templates-panel .content`).append(l),$(`${this.containerSelector} .toolpanel#templates-panel .content`).append('<div class="list-templates"></div>'),o(t.containerSelector,n),new ContextMenu(".list-templates-item",[{name:"Preview",fn:function(e){alert("Coming soon"),console.log("Preview",e)}},{name:"Salvar",fn:function(e){const r=e.getAttribute("data-index");(e=>{if(e>=0&&e<n.length&&confirm("Are you sure you want to save and replace this template?")){const r=n[e].uuid,s=i(t.canvas,r);n[e]=s,t.templates=n,a(s,"saveTemplate"),o(t.containerSelector,n),t.toast("Template salvo com sucesso")}})(parseInt(r))}},{name:"Clone",fn:function(e){const i=e.getAttribute("data-index");(e=>{if(e>=0&&e<n.length){const i=n[e],r={...i,timestamp:(new Date).getTime(),uuid:crypto.randomUUID(),preview:i.preview};n.push(r),t.templates=n,a(r,"newTemplate"),o(t.containerSelector,n),t.toast("Template cloned successfully")}})(parseInt(i))}},{},{name:"Delete",fn:function(e){const i=e.getAttribute("data-index");(e=>{if(e>=0&&e<n.length&&confirm("Are you sure you want to delete this template?")){const i=n[e];n.splice(e,1),t.templates=n,a(i,"deleteTemplate"),o(t.containerSelector,n),t.toast("Template excluído com sucesso")}})(parseInt(i))}}]),$(`${this.containerSelector} .toolpanel#templates-panel .content .list-templates`).on("click",".button",(function(){try{let e=$(this).data("index");r(e)}catch(e){console.error("can't add template",e)}}))}}(),function(){"use strict";window.ImageEditor.prototype.initializeFreeDrawSettings=function(){let e=1,t="pencil",n="black";const i=this;$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="draw-panel"><div class="content"><p class="title">Free Draw</p></div></div>'),$(`${this.containerSelector} .toolpanel#draw-panel .content`).append('\n      <div>\n        <div class="input-container">\n          <label>Brush Width</label>\n          <div class="custom-number-input">\n          <button class="decrease">-</button>\n          <input type="number" min="1" value="1" id="input-brush-width"/>\n          <button class="increase">+</button>\n          </div>\n        </div>\n        <div class="input-container">\n          <label>Brush Type</label>\n          <select id="input-brush-type">\n            <option value="pencil" selected>Pencil</option>\n            <option value="circle">Circle</option>\n            <option value="spray">Spray</option>\n          </select>\n        </div>\n        <div class="input-container">\n          <label>Brush Color</label>\n          <input id="color-picker" value=\'black\'/>\n        </div>\n      </div>\n    ');let o=()=>{try{switch(t){case"circle":i.canvas.freeDrawingBrush=new fabric.CircleBrush(i.canvas);break;case"spray":i.canvas.freeDrawingBrush=new fabric.SprayBrush(i.canvas);break;default:i.canvas.freeDrawingBrush=new fabric.PencilBrush(i.canvas)}i.canvas.freeDrawingBrush.width=e,i.canvas.freeDrawingBrush.color=n}catch(e){}};$(`${this.containerSelector} .toolpanel#draw-panel .content #input-brush-width`).change((function(){try{e=parseInt($(this).val()),o()}catch(e){}})),$(`${this.containerSelector} .toolpanel#draw-panel .content #input-brush-type`).change((function(){t=$(this).val(),o()})),$(`${this.containerSelector} .toolpanel#draw-panel .content #color-picker`).spectrum({type:"color",showInput:"true",showInitial:"true",allowEmpty:"false"}),$(`${this.containerSelector} .toolpanel#draw-panel .content #color-picker`).change((function(){try{n=$(this).val(),o()}catch(e){}}))}}(),function(){"use strict";window.ImageEditor.prototype.initializeCanvasSettingPanel=function(){const e=this;$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="background-panel"><div class="content"><p class="title">Canvas Settings</p></div></div>');const t=(e,t,n)=>{if(window.EyeDropper)$(`${e} .eyedropper-btn[data-target="${t}"]`).click((async function(){try{$(this).addClass("active"),$("body").css("cursor","crosshair");const i=new EyeDropper,o=await i.open();o&&o.sRGBHex&&($(`${e} #${t}`).spectrum("set",o.sRGBHex),$(`${e} #${t}`).trigger("change"),n&&"function"==typeof n&&n(o.sRGBHex),console.log("Cor de fundo selecionada:",o.sRGBHex))}catch(e){"AbortError"!==e.name&&(console.error("Erro ao usar EyeDropper:",e),alert("Ocorreu um erro ao selecionar a cor. Tente novamente."))}finally{$(this).removeClass("active"),$("body").css("cursor","default")}}));else{console.warn("EyeDropper API não é suportada neste navegador");const t=$(`${e} .eyedropper-not-supported`);t.length&&t.show()}};!1===e.canvasSizeBlock&&(()=>{$(`${this.containerSelector} .toolpanel#background-panel .content`).append('\n        <div class="canvas-size-setting">\n          <p>Canvas Size</p>\n          <div class="input-container">\n            <label>Width</label>\n            <div class="custom-number-input">\n            <button class="decrease">-</button>\n            <input type="number" min="100" id="input-width" value="1360"/>\n            <button class="increase">+</button>\n            </div>\n          </div>\n          <div class="input-container">\n            <label>Height</label>\n            <div class="custom-number-input">\n            <button class="decrease">-</button>\n            <input type="number" min="100" id="input-height" value="768"/>\n            <button class="increase">+</button>\n            </div>\n          </div>\n        </div>\n      ');var t=()=>{try{let t=$(`${this.containerSelector} .toolpanel#background-panel .content #input-width`).val(),n=$(`${this.containerSelector} .toolpanel#background-panel .content #input-height`).val();e.canvas.setWidth(t),e.canvas.originalW=t,e.canvas.setHeight(n),e.canvas.originalH=n,e.canvas.renderAll(),e.canvas.fire("object:modified")}catch(e){}};$(`${this.containerSelector} .toolpanel#background-panel .content #input-width`).change(t),$(`${this.containerSelector} .toolpanel#background-panel .content #input-height`).change(t)})(),(()=>{$(`${this.containerSelector} .toolpanel#background-panel .content`).append(`\n      <div class="color-settings">\n        <p>Background Color</p>\n        <div class="tab-container">\n          <div class="tabs">\n            <div class="tab-label" data-value="color-fill">Color Fill</div>\n            <div class="tab-label" data-value="gradient-fill">Gradient Fill</div>\n          </div>\n          <div class="tab-content" data-value="color-fill">\n            <div class="color-picker-container">\n              <input id="color-picker" value=''/>\n              ${window.EyeDropper?'<button type="button" class="eyedropper-btn" data-target="color-picker" title="Conta-gotas (selecionar cor da tela)">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n          <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z"/>\n        </svg>\n      </button>':""}\n            </div>\n            ${window.EyeDropper?"":'<div class="eyedropper-not-supported">Conta-gotas não suportado neste navegador</div>'}\n            <br>\n          </div>\n          <div class="tab-content" data-value="gradient-fill">\n            <div id="gradient-picker"></div>\n\n            <div class="gradient-orientation-container">\n              <div class="input-container">\n                <label>Orientation</label>\n                <select id="select-orientation">\n                  <option value="linear">Linear</option>\n                  <option value="radial">Radial</option>\n                </select>\n              </div>\n              <div id="angle-input-container" class="input-container">\n                <label>Angle</label>\n                <div class="custom-number-input">\n                  <button class="decrease">-</button>\n                  <input type="number" min="0" max="360" value="0" id="input-angle">\n                  <button class="increase">+</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `),$(`${this.containerSelector} .toolpanel#background-panel .content .tab-label`).click((function(){$(`${e.containerSelector} .toolpanel#background-panel .content .tab-label`).removeClass("active"),$(this).addClass("active");let t=$(this).data("value");if($(this).closest(".tab-container").find(".tab-content").hide(),$(this).closest(".tab-container").find(`.tab-content[data-value=${t}]`).show(),"color-fill"===t){let t=$(`${e.containerSelector} .toolpanel#background-panel .content #color-picker`).val();try{e.canvas.backgroundColor=t,e.canvas.renderAll()}catch(e){console.log("can't update background color")}}else i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .tab-label[data-value=color-fill]`).click(),$(`${this.containerSelector} .toolpanel#background-panel .content #color-picker`).spectrum({showPalette:!0,showButtons:!1,type:"color",showInput:"true",allowEmpty:"false",move:function(t){let n="transparent";t&&(n=t.toHexString()),e.canvas.backgroundColor=n,e.canvas.renderAll()}}),t(this.containerSelector+" .toolpanel#background-panel .content","color-picker",(t=>{e.canvas.backgroundColor=t,e.canvas.renderAll()}));const n=new Grapick({el:`${this.containerSelector} .toolpanel#background-panel .content #gradient-picker`,colorEl:'<input id="colorpicker"/>'});n.setColorPicker((e=>{const t=e.getEl().querySelector("#colorpicker");$(t).spectrum({showPalette:!1,showButtons:!1,type:"color",showInput:"true",allowEmpty:"false",color:e.getColor(),showAlpha:!0,change(t){e.setColor(t.toRgbString())},move(t){e.setColor(t.toRgbString(),0)}})})),n.addHandler(0,"red"),n.addHandler(100,"blue");const i=()=>{let t=n.getHandlers(),i=$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #select-orientation`).val(),o=parseInt($(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #input-angle`).val()),a=e.generateFabricGradientFromColorStops(t,e.canvas.width,e.canvas.height,i,o);e.canvas.setBackgroundColor(a),e.canvas.renderAll()};n.on("change",(e=>{i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #select-orientation`).change((function(){"radial"===$(this).val()?$(this).closest(".gradient-orientation-container").find("#angle-input-container").hide():$(this).closest(".gradient-orientation-container").find("#angle-input-container").show(),i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #input-angle`).change((function(){i()}))})()}}(),function(){"use strict";const e=[{value:{strokeDashArray:[],strokeLineCap:"butt"},label:"Stroke"},{value:{strokeDashArray:[1,10],strokeLineCap:"butt"},label:"Dash-1"},{value:{strokeDashArray:[1,10],strokeLineCap:"round"},label:"Dash-2"},{value:{strokeDashArray:[15,15],strokeLineCap:"square"},label:"Dash-3"},{value:{strokeDashArray:[15,15],strokeLineCap:"round"},label:"Dash-4"},{value:{strokeDashArray:[25,25],strokeLineCap:"square"},label:"Dash-5"},{value:{strokeDashArray:[25,25],strokeLineCap:"round"},label:"Dash-6"},{value:{strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"square"},label:"Dash-7"},{value:{strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"round"},label:"Dash-8"}],t=[{pos:"left",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g transform="translate(1.4305e-6 -17.438)" stroke-width="1.2346"><rect x="14.815" y="48.16" width="85.185" height="24.691"></rect><rect x="14.815" y="87.025" width="45.679" height="24.691"></rect><rect y="34.877" width="8.642" height="90.123"></rect></g></svg>'},{pos:"center-h",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g stroke-width="1.2346"><rect x="7.4075" y="30.722" width="85.185" height="24.691"></rect><rect x="27.16" y="69.587" width="45.679" height="24.691"></rect><rect x="45.679" y="17.439" width="8.642" height="90.123"></rect></g></svg>'},{pos:"right",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g transform="translate(1.4305e-6 -17.438)" stroke-width="1.2346"><rect transform="scale(-1,1)" x="-85.185" y="48.16" width="85.185" height="24.691"></rect><rect transform="scale(-1,1)" x="-85.185" y="87.025" width="45.679" height="24.691"></rect><rect transform="scale(-1,1)" x="-100" y="34.877" width="8.642" height="90.123"></rect></g></svg>'},{pos:"top",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g transform="translate(1.4305e-6 -17.438)"><g transform="matrix(0 -1 -1 0 129.94 129.94)" stroke-width="1.2346"><rect transform="scale(-1,1)" x="-85.185" y="48.16" width="85.185" height="24.691"></rect><rect transform="scale(-1,1)" x="-85.185" y="87.025" width="45.679" height="24.691"></rect><rect transform="scale(-1,1)" x="-100" y="34.877" width="8.642" height="90.123"></rect></g></g></svg>'},{pos:"center-v",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g stroke-width="1.2346"><rect transform="rotate(90)" x="19.908" y="-81.779" width="85.185" height="24.691"></rect><rect transform="rotate(90)" x="39.66" y="-42.913" width="45.679" height="24.691"></rect><rect transform="rotate(90)" x="58.179" y="-95.062" width="8.642" height="90.123"></rect></g></svg>'},{pos:"bottom",icon:'<svg enable-background="new 0 0 100 100" viewBox="0 0 100 125" xml:space="preserve"><g transform="translate(1.4305e-6 -17.438)"><g transform="rotate(90 50 79.938)" stroke-width="1.2346"><rect transform="scale(-1,1)" x="-85.185" y="48.16" width="85.185" height="24.691"></rect><rect transform="scale(-1,1)" x="-85.185" y="87.025" width="45.679" height="24.691"></rect><rect transform="scale(-1,1)" x="-100" y="34.877" width="8.642" height="90.123"></rect></g></g></svg>'}];window.ImageEditor.prototype.initializeSelectionSettings=function(){const n=this;$(`${this.containerSelector} .main-panel`).append('<div class="toolpanel" id="select-panel"><div class="content"><p class="title">Selection Settings</p></div></div>');const i=(e,t)=>window.EyeDropper?`<button type="button" class="eyedropper-btn" data-target="${t}" title="Conta-gotas (selecionar cor da tela)">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n          <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z"/>\n        </svg>\n      </button>`:"",o=(e,t,n)=>{if(window.EyeDropper)$(`${e} .eyedropper-btn[data-target="${t}"]`).click((async function(){try{$(this).addClass("active"),$("body").css("cursor","crosshair");const i=new EyeDropper,o=await i.open();o&&o.sRGBHex&&($(`${e} #${t}`).spectrum("set",o.sRGBHex),$(`${e} #${t}`).trigger("change"),n&&"function"==typeof n&&n(o.sRGBHex),console.log("Cor selecionada:",o.sRGBHex))}catch(e){"AbortError"!==e.name&&(console.error("Erro ao usar EyeDropper:",e),alert("Ocorreu um erro ao selecionar a cor. Tente novamente."))}finally{$(this).removeClass("active"),$("body").css("cursor","default")}}));else{console.warn("EyeDropper API não é suportada neste navegador");const t=$(`${e} .eyedropper-not-supported`);t.length&&t.show()}};(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\n        <div class="text-section">\n          <h4>Font Style</h4>\n          <div class="style">\n            <button id="bold"><svg id="Capa_1" x="0px" y="0px" viewBox="-70 -70 450 450" xml:space="preserve"><path d="M218.133,144.853c20.587-14.4,35.2-37.653,35.2-59.52C253.333,37.227,216.107,0,168,0H34.667v298.667h150.187 c44.693,0,79.147-36.267,79.147-80.853C264,185.387,245.547,157.76,218.133,144.853z M98.667,53.333h64c17.707,0,32,14.293,32,32 s-14.293,32-32,32h-64V53.333z M173.333,245.333H98.667v-64h74.667c17.707,0,32,14.293,32,32S191.04,245.333,173.333,245.333z"></path></svg></button>\n            <button id="italic"><svg id="Capa_1" x="0px" y="0px" viewBox="-70 -70 450 450" xml:space="preserve"><polygon points="106.667,0 106.667,64 153.92,64 80.747,234.667 21.333,234.667 21.333,298.667 192,298.667 192,234.667 144.747,234.667 217.92,64 277.333,64 277.333,0  "></polygon></svg></button>\n            <button id="underline"><svg id="Capa_1" x="0px" y="0px" viewBox="-70 -70 450 450" xml:space="preserve"><path d="M192,298.667c70.72,0,128-57.28,128-128V0h-53.333v170.667c0,41.28-33.387,74.667-74.667,74.667 s-74.667-33.387-74.667-74.667V0H64v170.667C64,241.387,121.28,298.667,192,298.667z"></path><rect x="42.667" y="341.333" width="298.667" height="42.667"></rect></svg></button>\n            <button id="linethrough"><svg id="Capa_1" x="0px" y="0px" viewBox="-70 -70 450 450" xml:space="preserve"><polygon points="149.333,160 234.667,160 234.667,96 341.333,96 341.333,32 42.667,32 42.667,96 149.333,96"></polygon><rect x="149.333" y="288" width="85.333" height="64"></rect><rect x="0" y="202.667" width="384" height="42.667"></rect></svg></button>\n            <button id="subscript"><svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M248.257,256l103.986-103.758c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455l-49.057-48.948 c-5.765-5.753-15.098-5.753-20.863,0L178.29,186.188L74.258,82.384c-5.764-5.751-15.098-5.752-20.863,0L4.337,131.333 C1.561,134.103,0,137.865,0,141.788c0,3.923,1.561,7.684,4.337,10.455L108.324,256L4.337,359.758 C1.561,362.528,0,366.29,0,370.212c0,3.923,1.561,7.684,4.337,10.455l49.057,48.948c5.765,5.753,15.098,5.753,20.863,0 l104.033-103.804l104.032,103.804c2.883,2.876,6.657,4.315,10.432,4.315s7.549-1.438,10.432-4.315l49.056-48.948 c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455L248.257,256z"></path><path d="M497.231,384.331h-44.973l35.508-31.887c14.878-13.36,20.056-34.18,13.192-53.04 c-6.874-18.89-23.565-31.044-43.561-31.717c-0.639-0.021-1.283-0.032-1.928-0.032c-31.171,0-56.531,25.318-56.531,56.439 c0,8.157,6.613,14.769,14.769,14.769c8.156,0,14.769-6.613,14.769-14.769c0-14.833,12.109-26.901,26.992-26.901 c0.316,0,0.631,0.005,0.937,0.016c11.573,0.39,15.78,9.511,16.795,12.297c2.163,5.946,1.942,14.574-5.171,20.962l-64.19,57.643 c-4.552,4.088-6.112,10.56-3.923,16.273c2.189,5.714,7.673,9.486,13.792,9.486h83.523c8.157,0,14.769-6.613,14.769-14.769 S505.387,384.331,497.231,384.331z"></path></svg></button>\n            <button id="superscript"><svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M248.257,259.854l103.986-103.758c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455l-49.057-48.948 c-5.765-5.753-15.098-5.753-20.863,0L178.29,190.042L74.258,86.238c-5.764-5.751-15.099-5.752-20.863,0L4.337,135.187 C1.561,137.958,0,141.719,0,145.642s1.561,7.684,4.337,10.455l103.986,103.758L4.337,363.612C1.561,366.383,0,370.145,0,374.067 c0,3.922,1.561,7.684,4.337,10.455l49.057,48.948c5.765,5.753,15.098,5.753,20.863,0l104.033-103.804l104.032,103.804 c2.883,2.876,6.657,4.315,10.432,4.315s7.549-1.438,10.432-4.315l49.056-48.948c2.777-2.771,4.337-6.532,4.337-10.455 s-1.561-7.684-4.337-10.455L248.257,259.854z"></path><path d="M497.231,190.893h-44.973l35.508-31.887c14.878-13.36,20.056-34.18,13.192-53.04 c-6.874-18.89-23.565-31.044-43.561-31.717c-0.639-0.021-1.283-0.032-1.928-0.032c-31.171,0-56.531,25.318-56.531,56.439 c0,8.157,6.613,14.769,14.769,14.769c8.156,0,14.769-6.613,14.769-14.769c0-14.833,12.109-26.901,26.992-26.901 c0.316,0,0.631,0.005,0.937,0.016c11.573,0.39,15.78,9.511,16.795,12.297c2.163,5.946,1.942,14.574-5.171,20.962l-64.19,57.643 c-4.552,4.088-6.112,10.56-3.923,16.273c2.189,5.714,7.673,9.486,13.792,9.486h83.523c8.157,0,14.769-6.613,14.769-14.769 S505.387,190.893,497.231,190.893z"></path></svg></button>\n          </div>\n          <div class="family">\n            <div class="input-container">\n            <label>Font Family</label>\n            <select id="font-family">\n              <option value=""></option>\n              ${this.fonts&&this.fonts.length>0?`\n                <optgroup label="Fontes Personalizadas">\n                  ${[...new Set(this.fonts.map((e=>e.name)))].map((e=>`<option value="'${e}', sans-serif">${e}</option>`)).join("")}\n                </optgroup>\n              `:""}\n              <optgroup label="Fontes do Sistema">\n                <option value="'Open Sans', sans-serif">Open Sans</option>                \n                <option value="'Oswald', sans-serif">Oswald</option>\n                <option value="'Playfair Display', serif">Playfair Display</option>\n                <option value="'Cormorant Garamond', serif">Cormorant Garamond</option>\n                <option value="Impact, Charcoal, sans-serif">Impact</option>\n                <option value="'Lucida Console', Monaco, monospace">Lucida Console</option>\n                <option value="'Comic Sans MS', 'Comic Sans', cursive, sans-serif">Comic Sans</option>\n                <option value="'Dancing Script', cursive">Dancing Script</option>\n                <option value="'Indie Flower', cursive">Indie Flower</option>\n                <option value="'Amatic SC', cursive">Amatic SC</option>\n                <option value="'Permanent Marker', cursive">Permanent Marker</option>\n              </optgroup>\n            </select>\n            </div>\n          </div>\n          <div class="sizes">\n            <div class="input-container"><label>Font Size</label>\n              <div class="custom-number-input">\n              <button class="decrease">-</button>\n              <input type="number" min="1" value="20" id="fontSize">\n              <button class="increase">+</button>\n              </div>\n            </div>\n            <div class="input-container"><label>Line Height</label>\n              <div class="custom-number-input">\n              <button class="decrease">-</button>\n              <input type="number" min="0" max="3" value="1" step="0.1" id="lineHeight">\n              <button class="increase">+</button>\n              </div>\n            </div>\n            <div class="input-container"><label>Letter Spacing</label>\n              <div class="custom-number-input">\n              <button class="decrease">-</button>\n              <input type="number" min="0" max="2000" step="100" value="0" id="charSpacing">\n              <button class="increase">+</button>\n              </div>\n            </div>\n            </p>\n          </div>\n          <div class="align">\n            <div class="input-container">\n            <label>Text Alignment</label>\n            <select id="text-align">\n              <option value="left">Left</option>\n              <option value="center">Center</option>\n              <option value="right">Right</option>\n              <option value="justify">Justify</option>\n            </select>\n            </div>\n          </div>\n          <div class="color">\n            <div class="input-container">\n            <label>Text Color</label>\n            <div class="color-picker-container">\n              <input id="color-picker" value="black">\n              ${i(0,"color-picker")}\n            </div>\n            ${window.EyeDropper?"":'<div class="eyedropper-not-supported">Conta-gotas não suportado neste navegador</div>'}\n            </div>\n          </div>\n          <hr>\n        </div>\n      `),$(`${this.containerSelector} .toolpanel#select-panel .style button`).click((function(){switch($(this).attr("id")){case"bold":n.setActiveFontStyle(n.activeSelection,"fontWeight","bold"===n.getActiveFontStyle(n.activeSelection,"fontWeight")?"":"bold");break;case"italic":n.setActiveFontStyle(n.activeSelection,"fontStyle","italic"===n.getActiveFontStyle(n.activeSelection,"fontStyle")?"":"italic");break;case"underline":n.setActiveFontStyle(n.activeSelection,"underline",!n.getActiveFontStyle(n.activeSelection,"underline"));break;case"linethrough":n.setActiveFontStyle(n.activeSelection,"linethrough",!n.getActiveFontStyle(n.activeSelection,"linethrough"));break;case"subscript":n.getActiveFontStyle(n.activeSelection,"deltaY")>0?(n.setActiveFontStyle(n.activeSelection,"fontSize",void 0),n.setActiveFontStyle(n.activeSelection,"deltaY",void 0)):(n.activeSelection.setSubscript(),n.canvas.renderAll());break;case"superscript":n.getActiveFontStyle(n.activeSelection,"deltaY")<0?(n.setActiveFontStyle(n.activeSelection,"fontSize",void 0),n.setActiveFontStyle(n.activeSelection,"deltaY",void 0)):(n.activeSelection.setSuperscript(),n.canvas.renderAll())}n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .family #font-family`).change((function(){let e=$(this).val();n.setActiveFontStyle(n.activeSelection,"fontFamily",e),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .sizes input`).change((function(){let e=parseFloat($(this).val()),t=$(this).attr("id");n.setActiveFontStyle(n.activeSelection,t,e),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .align #text-align`).change((function(){let e=$(this).val();n.setActiveFontStyle(n.activeSelection,"textAlign",e),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .color #color-picker`).spectrum({type:"color",showInput:"true",allowEmpty:"false"}),o(this.containerSelector+" .toolpanel#select-panel .text-section","color-picker",(e=>{n.setActiveFontStyle(n.activeSelection,"fill",e),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .color #color-picker`).change((function(){let e=$(this).val();n.setActiveFontStyle(n.activeSelection,"fill",e),n.canvas.renderAll(),n.canvas.fire("object:modified")}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\n        <div class="fill-section">\n          <div class="tab-container">\n            <div class="input-container">\n              <label>\n                <h4>Fill</h4>\n              </label>\n              <label>\n                <div class="tabs">\n                  <div class="tab-label" data-value="color-fill">\n                    <button type="">Color</button>\n                  </div>\n                  <div class="tab-label" data-value="gradient-fill">\n                    <button type="">Gradient</button>\n                  </div>\n                </div>\n              </label>\n            </div>\n            <div class="tab-content" data-value="color-fill">\n              <div class="input-container">\n                <label>Color</label>\n                <div class="color-picker-container">\n                  <input id="color-picker" value="${n.activeSelection?n.activeSelection.fill:"#000000"}">\n                  ${i(0,"color-picker")}\n                </div>\n                ${window.EyeDropper?"":'<div class="eyedropper-not-supported">Conta-gotas não suportado neste navegador</div>'}\n              </div>\n            </div>\n            <div class="tab-content" data-value="gradient-fill">\n              <div id="gradient-picker"></div>\n              <div class="gradient-orientation-container">\n                <div class="input-container">\n                  <label>Orientation</label>\n                  <select id="select-orientation">\n                    <option value="linear">Linear</option>\n                    <option value="radial">Radial</option>\n                  </select>\n                </div>\n                <div id="angle-input-container" class="input-container">\n                  <label>Angle</label>\n                  <div class="custom-number-input">\n                    <button class="decrease">-</button>\n                    <input type="number" min="0" max="360" value="0" id="input-angle">\n                    <button class="increase">+</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <hr>\n        </div>\n      `),$(`${this.containerSelector} .toolpanel#select-panel .content .tab-label`).click((function(){$(`${n.containerSelector} .toolpanel#select-panel .content .tab-label`).removeClass("active"),$(this).addClass("active");let e=$(this).data("value");if($(this).closest(".tab-container").find(".tab-content").hide(),$(this).closest(".tab-container").find(`.tab-content[data-value=${e}]`).show(),"color-fill"===e){let e=$(`${n.containerSelector} .toolpanel#select-panel .fill-section #color-picker`).val();try{n.canvas.getActiveObjects().forEach((t=>t.set("fill",e))),n.canvas.renderAll(),n.canvas.fire("object:modified")}catch(e){console.log("can't update background color")}}else t()})),$(`${n.containerSelector} .toolpanel#select-panel .content .tab-label[data-value=color-fill]`).click(),$(`${this.containerSelector} .toolpanel#select-panel .fill-section #color-picker`).spectrum({showButtons:!1,type:"color",showInput:"true",allowEmpty:"false",move:function(e){let t="transparent";e&&(t=e.toRgbString()),n.canvas.getActiveObjects().forEach((e=>e.set("fill",t))),n.canvas.renderAll(),n.canvas.fire("object:modified")}}),o(this.containerSelector+" .toolpanel#select-panel .fill-section","color-picker",(e=>{n.canvas.getActiveObjects().forEach((t=>t.set("fill",e))),n.canvas.renderAll(),n.canvas.fire("object:modified")}));const e=new Grapick({el:`${this.containerSelector} .toolpanel#select-panel .fill-section #gradient-picker`,colorEl:'<input id="colorpicker"/>'});e.setColorPicker((e=>{const t=e.getEl().querySelector("#colorpicker");$(t).spectrum({showPalette:!0,showButtons:!1,type:"color",color:e.getColor(),showAlpha:!0,change(t){e.setColor(t.toRgbString())},move(t){e.setColor(t.toRgbString(),0)}})})),e.addHandler(0,"red"),e.addHandler(100,"blue");const t=()=>{let t=e.getHandlers(),i=$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #select-orientation`).val(),o=parseInt($(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #input-angle`).val()),a=n.generateFabricGradientFromColorStops(t,n.activeSelection.width,n.activeSelection.height,i,o);n.activeSelection.set("fill",a),n.canvas.renderAll()};e.on("change",(e=>{t()})),$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #select-orientation`).change((function(){let e=$(this).val();console.log("orientation",e),"radial"===e?$(this).closest(".gradient-orientation-container").find("#angle-input-container").hide():$(this).closest(".gradient-orientation-container").find("#angle-input-container").show(),t()})),$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #input-angle`).change((function(){t()}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\n        <div class="border-section">\n          <h4>Border</h4>\n          <div class="input-container"><label>Width</label>\n            <div class="custom-number-input">\n            <button class="decrease">-</button>\n            <input type="number" min="0" value="0" id="input-border-width">\n            <button class="increase">+</button>\n            </div>\n          </div>\n          <div class="input-container"><label>Style</label><select id="input-border-style">${e.map((e=>`<option value='${JSON.stringify(e.value)}'>${e.label}</option>`))}</select></div>\n          <div class="input-container"><label>Corner Type</label><select id="input-corner-type"><option value="miter" selected>Square</option><option value="round">Round</option><option value="circle">Circle</option></select></div>\n          <div class="input-container">\n            <label>Color</label>\n            <div class="color-picker-container">\n              <input id="color-picker" value="black">\n              ${i(0,"color-picker")}\n            </div>\n            ${window.EyeDropper?"":'<div class="eyedropper-not-supported">Conta-gotas não suportado neste navegador</div>'}\n          </div>\n          <hr>\n        </div>\n      `),$(`${this.containerSelector} .toolpanel#select-panel .border-section #color-picker`).spectrum({showButtons:!1,type:"color",showInput:"true",allowEmpty:"false",move:function(e){let t="transparent";e&&(t=e.toRgbString()),n.canvas.getActiveObjects().forEach((e=>e.set("stroke",t))),n.canvas.renderAll(),n.canvas.fire("object:modified")}}),o(this.containerSelector+" .toolpanel#select-panel .border-section","color-picker",(e=>{n.canvas.getActiveObjects().forEach((t=>t.set("stroke",e))),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-border-width`).change((function(){let e=parseInt($(this).val());n.canvas.getActiveObjects().forEach((t=>t.set({strokeUniform:!0,strokeWidth:e}))),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-border-style`).change((function(){try{let e=JSON.parse($(this).val());n.canvas.getActiveObjects().forEach((t=>t.set({strokeUniform:!0,strokeDashArray:e.strokeDashArray,strokeLineCap:e.strokeLineCap}))),n.canvas.renderAll(),n.canvas.fire("object:modified")}catch(e){}})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-corner-type`).change((function(){let e=$(this).val();n.canvas.getActiveObjects().forEach((t=>t.set("strokeLineJoin",e))),n.canvas.renderAll(),n.canvas.fire("object:modified")}))})(),(()=>{let e="";t.forEach((t=>{e+=`<button data-pos="${t.pos}">${t.icon}</button>`})),$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\n        <div class="alignment-section">\n          <h4>Alignment</h4>\n          ${e}\n          <hr>\n        </div>\n      `),$(`${this.containerSelector} .toolpanel#select-panel .alignment-section button`).click((function(){let e=$(this).data("pos");const t=n.canvas.getActiveObjects();if(1===t.length)n.alignObject(n.canvas,t[0],e,{alignToCanvas:!0});else if(t.length>1){const i=t[t.length-1];t.forEach((t=>{t!==i&&n.alignObject(i,t,e,{alignToObject:!0})})),n.canvas.renderAll(),n.canvas.fire("object:modified")}}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append('\n        <div class="object-options">\n          <h4>Object Options</h4>\n          <button id="flip-h" title="Flip Horizontal"><svg width="512" height="512" enable-background="new 0 0 16 16" viewBox="0 0 16 20" xml:space="preserve"><g transform="matrix(0 1.5365 1.5385 0 -5.0769 1.5495)"><rect x="5" y="8" width="1" height="1"></rect><rect x="7" y="8" width="1" height="1"></rect><rect x="9" y="8" width="1" height="1"></rect><rect x="1" y="8" width="1" height="1"></rect><rect x="3" y="8" width="1" height="1"></rect><path d="M 1,2 5.5,6 10,2 Z M 7.37,3 5.5,4.662 3.63,3 Z"></path><polygon points="10 15 5.5 11 1 15"></polygon></g></svg></button>\n          <button id="flip-v" title="Flip Vertical"><svg width="512" height="512" enable-background="new 0 0 16 16" viewBox="0 0 16 20" xml:space="preserve"><g transform="matrix(1.5365 0 0 1.5385 -.45052 -3.0769)"><rect x="5" y="8" width="1" height="1"></rect><rect x="7" y="8" width="1" height="1"></rect><rect x="9" y="8" width="1" height="1"></rect><rect x="1" y="8" width="1" height="1"></rect><rect x="3" y="8" width="1" height="1"></rect><path d="M 1,2 5.5,6 10,2 Z M 7.37,3 5.5,4.662 3.63,3 Z"></path><polygon points="5.5 11 1 15 10 15"></polygon></g></svg></button>\n          <button id="bring-fwd" title="Bring Forward"><svg x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"><g><path d="M10,10h686v686H10V10 M990,304v686H304V794h98v98h490V402h-98v-98H990z"></path></g></svg></button>\n          <button id="bring-back" title="Send Backward"><svg enable-background="new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xml:space="preserve"><path d="m990 990h-686v-686h686v686m-980-294v-686h686v680h-98v-582h-490v490h200v98z"></path><rect x="108.44" y="108" width="490" height="490" fill="#fff"></rect></svg></button>\n          <button id="duplicate" title="Duplicate"><svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><g><path d="M42.667,256c0-59.52,35.093-110.827,85.547-134.827V75.2C53.653,101.44,0,172.48,0,256s53.653,154.56,128.213,180.8 v-45.973C77.76,366.827,42.667,315.52,42.667,256z"></path><path d="M320,64c-105.92,0-192,86.08-192,192s86.08,192,192,192s192-86.08,192-192S425.92,64,320,64z M320,405.333 c-82.347,0-149.333-66.987-149.333-149.333S237.653,106.667,320,106.667S469.333,173.653,469.333,256 S402.347,405.333,320,405.333z"></path><polygon points="341.333,170.667 298.667,170.667 298.667,234.667 234.667,234.667 234.667,277.333 298.667,277.333 298.667,341.333 341.333,341.333 341.333,277.333 405.333,277.333 405.333,234.667 341.333,234.667  "></polygon></g></g></g></svg></button>\n          <button id="delete" title="Delete"><svg id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M425.298,51.358h-91.455V16.696c0-9.22-7.475-16.696-16.696-16.696H194.855c-9.22,0-16.696,7.475-16.696,16.696v34.662 H86.704c-9.22,0-16.696,7.475-16.696,16.696v51.357c0,9.22,7.475,16.696,16.696,16.696h5.072l15.26,359.906 c0.378,8.937,7.735,15.988,16.68,15.988h264.568c8.946,0,16.302-7.051,16.68-15.989l15.259-359.906h5.073 c9.22,0,16.696-7.475,16.696-16.696V68.054C441.994,58.832,434.519,51.358,425.298,51.358z M211.551,33.391h88.9v17.967h-88.9 V33.391z M372.283,478.609H139.719l-14.522-342.502h261.606L372.283,478.609z M408.602,102.715c-15.17,0-296.114,0-305.202,0 V84.749h305.202V102.715z"></path></g></g><g><g><path d="M188.835,187.304c-9.22,0-16.696,7.475-16.696,16.696v206.714c0,9.22,7.475,16.696,16.696,16.696 c9.22,0,16.696-7.475,16.696-16.696V204C205.53,194.779,198.055,187.304,188.835,187.304z"></path></g></g><g><g><path d="M255.998,187.304c-9.22,0-16.696,7.475-16.696,16.696v206.714c0,9.22,7.474,16.696,16.696,16.696 c9.22,0,16.696-7.475,16.696-16.696V204C272.693,194.779,265.218,187.304,255.998,187.304z"></path></g></g><g><g><path d="M323.161,187.304c-9.22,0-16.696,7.475-16.696,16.696v206.714c0,9.22,7.475,16.696,16.696,16.696 s16.696-7.475,16.696-16.696V204C339.857,194.779,332.382,187.304,323.161,187.304z"></path></g></g></svg></button>\n          <button id="group" title="Group Objects"><svg width="248" height="249" viewBox="0 0 248 249"><g><rect fill="none" id="canvas_background" height="251" width="250" y="-1" x="-1"></rect><g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid"><rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"></rect></g></g><g><rect id="svg_1" height="213.999997" width="213.999997" y="18.040149" x="16.8611" stroke-width="14" stroke="#000" fill="none"></rect><ellipse ry="39.5" rx="39.5" id="svg_2" cy="87.605177" cx="90.239139" stroke-opacity="null" stroke-width="5" stroke="#000" fill="#000000"></ellipse><rect id="svg_3" height="61.636373" width="61.636373" y="135.606293" x="133.750604" stroke-opacity="null" stroke-width="5" stroke="#000" fill="#000000"></rect><rect id="svg_4" height="26.016205" width="26.016205" y="4.813006" x="3.999997" stroke-opacity="null" stroke-width="8" stroke="#000" fill="#000000"></rect><rect id="svg_5" height="26.016205" width="26.016205" y="3.999999" x="217.820703" stroke-opacity="null" stroke-width="8" stroke="#000" fill="#000000"></rect><rect id="svg_7" height="26.016205" width="26.016205" y="218.633712" x="3.999997" stroke-opacity="null" stroke-width="8" stroke="#000" fill="#000000"></rect><rect id="svg_8" height="26.016205" width="26.016205" y="218.633712" x="217.820694" stroke-opacity="null" stroke-width="8" stroke="#000" fill="#000000"></rect></g></svg></button>\n          <button id="ungroup" title="Ungroup Objects"><svg width="247.99999999999997" height="248.99999999999997" viewBox="0 0 248 249"><g><rect fill="none" id="canvas_background" height="251" width="250" y="-1" x="-1"></rect><g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid"><rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"></rect></g></g><g><rect stroke-dasharray="20" id="svg_1" height="213.999997" width="213.999997" y="18.040149" x="16.8611" stroke-width="16" stroke="#000" fill="none"></rect><ellipse ry="39.5" rx="39.5" id="svg_2" cy="87.605177" cx="90.239139" stroke-opacity="null" stroke-width="5" stroke="#000" fill="#000000"></ellipse><rect id="svg_3" height="61.636373" width="61.636373" y="135.606293" x="133.750604" stroke-opacity="null" stroke-width="5" stroke="#000" fill="#000000"></rect></g></svg></button>\n          <hr>\n        </div>\n      '),$(`${this.containerSelector} .toolpanel#select-panel .object-options #flip-h`).click((()=>{this.executeAction("flipHorizontal")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #flip-v`).click((()=>{this.executeAction("flipVertical")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #bring-fwd`).click((()=>{this.executeAction("moveForward")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #bring-back`).click((()=>{this.executeAction("moveBackward")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #duplicate`).click((()=>{this.executeAction("duplicate")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #delete`).click((()=>{this.executeAction("delete")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #group`).click((()=>{this.executeAction("group")})),$(`${this.containerSelector} .toolpanel#select-panel .object-options #ungroup`).click((()=>{this.executeAction("ungroup")}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append('\n        <div class="effect-section">\n          <h4>Effect</h4>\n          <div class="input-container"><label>Opacity</label><input id="opacity" type="range" min="0" max="1" value="1" step="0.01"></div>\n          <div class="input-container"><label>Blur</label><input class="effect" id="blur" type="range" min="0" max="100" value="50"></div>\n          <div class="input-container"><label>Brightness</label><input class="effect" id="brightness" type="range" min="0" max="100" value="50"></div>\n          <div class="input-container"><label>Saturation</label><input class="effect" id="saturation" type="range" min="0" max="100" value="50"></div>\n          <h5>Gamma</h5>\n          <div class="input-container"><label>Red</label><input class="effect" id="gamma.r" type="range" min="0" max="100" value="50"></div>\n          <div class="input-container"><label>Green</label><input class="effect" id="gamma.g" type="range" min="0" max="100" value="50"></div>\n          <div class="input-container"><label>Blue</label><input class="effect" id="gamma.b" type="range" min="0" max="100" value="50"></div>\n          <hr>\n        </div>\n      '),$(`${this.containerSelector} .toolpanel#select-panel .effect-section #opacity`).change((function(){let e=parseFloat($(this).val());n.activeSelection.set("opacity",e),n.canvas.renderAll(),n.canvas.fire("object:modified")})),$(`${this.containerSelector} .toolpanel#select-panel .effect-section .effect`).change((function(){let e=$(this).attr("id"),t=parseFloat($(this).val()),i=n.getCurrentEffect(n.activeSelection);n.activeSelection.filters=n.getUpdatedFilter(i,e,t),n.activeSelection.applyFilters(),n.canvas.renderAll(),n.canvas.fire("object:modified")}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append('\n        <div class="animate-section">\n          <h4>Animate</h4>\n          <div class="animate">\n            <div class="input-container">\n              <label>Tipo</label>\n              <select id="animate-type">\n                <option value="none">None</option>           \n                <option value="slideInLeft">Slide (Deslizar) - Left</option>\n                <option value="slideInRight">Slide (Deslizar) - Right</option>\n                <option value="slideInTop">Slide (Deslizar) - Top</option>\n                <option value="slideInBottom">Slide (Deslizar) - Bottom </option>\n                <option value="fade">Fade (Desaparecer)</option>\n                <option value="zoom">Zoom</option>\n                <option value="spin">Spin (Girar)</option>\n                <option value="swing">Swing (Balanço)</option>\n                <option value="float">Float (Flutuar)</option>\n                <option value="typewriter">Typewriter (Máquina de Escrever)</option>                \n              </select>\n            </div>\n          </div>          \n          <hr>\n        </div>\n      '),$(`${this.containerSelector} .toolpanel#select-panel .animate-section #animate-type`).change((function(){const e=$(this).val(),t=n.activeSelection;t&&n.animations.animations[e]?(t.set("animation",{type:e,duration:1e3,easing:"easeInOutQuad"}),n.animations.animations[e](t)):t.set("animation",null)}))})(),this.setSelectionValues=()=>{const e=this;if(1==e.canvas.getActiveObjects().length){let t=e.activeSelection;if(t){const{strokeWidth:n,stroke:i,strokeLineCap:o,cornerStyle:a,fill:r,fontFamily:s,fontSize:l,lineHeight:c,charSpacing:d,textAlign:p,type:h,animation:u}=t,g=(t,n)=>{null!=n&&$(`${e.containerSelector} .toolpanel#select-panel ${t}`).val(n).trigger("change")};g(".fill-section #color-picker",r),g(".border-section #color-picker",i),g(".border-section #input-border-width",n),null!=o&&g(".border-section #input-border-style",JSON.stringify({strokeDashArray:t.strokeDashArray??[],strokeLineCap:o})),g(".border-section #input-corner-type",a),"textbox"!==h&&"i-text"!==h||(g(".text-section #font-family",s),g(".text-section #fontSize",l),g(".text-section #lineHeight",c),g(".text-section #charSpacing",d),g(".text-section #text-align",p),g(".text-section #color-picker",r)),u&&g(".animate-section #animate-type",u.type)}}}}}(),function(){"use strict";let e;window.ImageEditor.prototype.initializeShortcuts=function(){const t=this;function n(t){return Object.values(e).find((e=>e.name===t))}function i(){document.querySelectorAll(".menu .item[data-action]").forEach((e=>{const t=n(e.getAttribute("data-action"));if(t){const n=e.querySelector(".shortcutkey");n&&(n.textContent=t.shortcut)}}))}e=t.getAllActions(),document.addEventListener("keydown",(async n=>{const i=n.key.toUpperCase(),o=n.ctrlKey,a=n.altKey,r=n.shiftKey;let s=i;"ª"===i?s="[":"º"===i&&(s="]");let l=[];o&&l.push("Ctrl"),a&&l.push("Alt"),r&&l.push("Shift"),l.push(s);const c=l.join("+"),d=Object.values(e).find((e=>e.shortcut===c&&e.enabled));if(d)return n.preventDefault(),void t.executeAction(d.name)})),i(),this.getShortcutByAction=n,this.updateMenuShortcuts=i}}(),function(){"use strict";let e=null;const t={copy:{name:"copy",icon:"uil-copy",label:"Copiar",shortcut:"Ctrl+C",enabled:!0,handler:async t=>{e=null;const n=t.getActiveObject();if(n&&("i-text"===n.type||"textbox"===n.type)){const e=n.getSelectedText();if(e)return void await navigator.clipboard.writeText(e)}n?n.clone((n=>{e=n,t.fire("copy",{id:n.id,type:n.type})}),["id"]):t.fire("copy:failed",{message:"Nenhum objeto selecionado"})}},paste:{name:"paste",icon:"uil-clipboard",label:"Colar",shortcut:"Ctrl+V",enabled:!0,handler:async t=>{console.log("copiedObject",e),e?e.clone((e=>{t.discardActiveObject(),e.set({left:e.left+20,top:e.top+20,id:`${e.id}_copia_${Date.now()}`}),t.add(e),t.setActiveObject(e),t.renderAll(),t.fire("paste",{id:e.id,type:e.type})}),["id"]):t.fire("paste:failed",{message:"Nenhum objeto copiado"})}},duplicate:{name:"duplicate",icon:"uil-minus-path",label:"Duplicar",shortcut:"Ctrl+D",enabled:!0,handler:function(e){const t=e.getActiveObjects();if(t.locked)return void alert("Objeto bloqueado");const n=[];if(t.forEach((i=>{i.clone((o=>{e.add(o.set({strokeUniform:!0,left:i.aCoords.tl.x+20,top:i.aCoords.tl.y+20})),1===t.length&&e.setActiveObject(o),n.push(o)}))})),n.length>1){let t=new fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(t)}e.requestRenderAll(),e.fire("object:modified")}},delete:{name:"delete",icon:"uil-trash-alt",label:"Excluir",shortcut:"DELETE",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(e.remove(t),e.requestRenderAll(),e.fire("object:modified"))}},group:{name:"group",icon:"uil-object-group",label:"Agrupar",shortcut:"Ctrl+G",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&"activeSelection"===t.type&&t.getObjects().length>1&&(t.toGroup(),e.requestRenderAll(),e.fire("object:modified"),e.fire("group:added"))}},ungroup:{name:"ungroup",icon:"uil-object-ungroup",label:"Desagrupar",shortcut:"Ctrl+Shift+G",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&"group"===t.type&&(t.toActiveSelection(),e.requestRenderAll(),e.fire("object:modified"),e.fire("group:removed"))}},moveForward:{name:"move-forward",icon:"uil-top-arrow-to-top",label:"Mover para frente",shortcut:"Ctrl+]",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.bringForward(),e.requestRenderAll(),e.fire("object:modified"))}},moveFullForward:{name:"move-full-forward",icon:"uil-top-arrow-to-top",label:"Trazer para frente",shortcut:"Ctrl+Alt+]",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.bringToFront(),e.requestRenderAll(),e.fire("object:modified"))}},moveBackward:{name:"move-backward",icon:"uil-arrow-to-bottom",label:"Mover para trás",shortcut:"Ctrl+[",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.sendBackwards(),e.requestRenderAll(),e.fire("object:modified"))}},moveFullBackward:{name:"move-full-backward",icon:"uil-arrow-to-bottom",label:"Enviar para trás",shortcut:"Ctrl+Alt+[",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.sendToBack(),e.requestRenderAll(),e.fire("object:modified"))}},showLayers:{name:"show-layers",icon:"uil-layers",label:"Mostrar camadas",shortcut:"Alt+1",enabled:!1,handler:function(e){alert("coming soon")}},comment:{name:"comment",icon:"uil-comment-plus",label:"Comentar",shortcut:"Ctrl+Alt+N",enabled:!1,handler:function(e){alert("coming soon")}},addLink:{name:"add-link",icon:"uil-link",label:"Adicionar link",shortcut:"Ctrl+K",enabled:!1,handler:function(e){alert("coming soon")}},flipHorizontal:{name:"flip-horizontal",icon:"uil-flip-horizontal",label:"Inverter horizontalmente",shortcut:"Ctrl+H",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.set("flipX",!t.flipX),e.requestRenderAll(),e.fire("object:modified"))}},flipVertical:{name:"flip-vertical",icon:"uil-flip-vertical",label:"Inverter verticalmente",shortcut:"Ctrl+V",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.set("flipY",!t.flipY),e.requestRenderAll(),e.fire("object:modified"))}},lock:{name:"lock",icon:"uil-lock-open-alt",label:"Bloquear",shortcut:!1,enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.lockMovementX=!0,t.lockMovementY=!0,t.lockScalingX=!0,t.lockScalingY=!0,t.lockRotation=!0,t.lockUniScaling=!0,t.lockSkewingX=!0,t.lockSkewingY=!0,t.hasControls=!0,t.hasRotatingPoint=!0,t.locked=!0,e.requestRenderAll(),e.fire("object:modified"),e.setActiveObject(t))}},unlock:{name:"unlock",icon:"uil-lock-alt",label:"Desbloquear",shortcut:!1,enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.lockMovementX=!1,t.lockMovementY=!1,t.lockScalingX=!1,t.lockScalingY=!1,t.lockRotation=!1,t.evented=!0,t.locked=!1,e.requestRenderAll(),e.fire("object:modified"))}},showDuration:{name:"show-duration",icon:"uil-clock",label:"Show duration",shortcut:!1,enabled:!1,handler:function(e){alert("coming soon")}},addLink:{name:"add-link",icon:"uil-link",label:"Add link",shortcut:"Ctrl+K",enabled:!1,handler:function(e){alert("coming soon")}},removeLink:{name:"remove-link",icon:"uil-link-broken",label:"Remove link",shortcut:"Ctrl+Shift+K",enabled:!1,handler:function(e){alert("coming soon")}},editLink:{name:"edit-link",icon:"uil-link",label:"Edit link",shortcut:"Ctrl+K",enabled:!1,handler:function(e){alert("coming soon")}}};window.ImageEditor.prototype.initializeCanvasActions=function(){const e=this.canvas;let n=null;this.executeAction=function(i){const o=t[i];o&&o.handler&&(o.handler(e),n&&n())},this.getAction=function(e){return t[e]},this.getAllActions=function(){return t},this.registerMenuUpdateFunction=function(e){n=e}}}(),function(){"use strict";const e='\n      <div class="actions">\n        <div class="actions-item" data-action="group" title="Group">\n          <span>Group</span>\n        </div>\n        <div class="actions-item" data-action="ungroup" title="Ungroup">\n          <span>Ungroup</span>\n        </div>\n        <div class="actions-item" data-action="comment" title="Comment">\n          <i class="uil uil-comment-plus"></i>\n        </div>\n        <div class="actions-item" data-action="lock" title="Lock">\n          <i class="uil uil-lock-open-alt"></i>\n        </div>\n        <div class="actions-item" data-action="unlock" title="Unlock">\n          <i class="uil uil-lock-alt"></i>\n        </div>        \n        <div class="actions-item" data-action="duplicate" title="Duplicate">\n          <i class="uil uil-minus-path"></i>\n        </div>\n        <div class="actions-item" data-action="delete" title="Delete">\n          <i class="uil uil-trash-alt"></i>\n        </div>\n        <div class="actions-item" id="action-menu" title="Actions">\n          <i class="uil uil-ellipsis-h"></i>\n        </div>\n      </div>\n    ',t='\n      <div class="menu-wrapper" style="visibility: hidden;">\n        <div class="content">\n          <ul class="menu">\n            <li class="item" data-action="copy">\n              <i class="uil uil-copy"></i>\n              <span>Copy</span>\n              <span class="shortcutkey">Ctrl+C</span>\n            </li>\n            <li class="item" data-action="paste">\n              <i class="uil uil-clipboard"></i>\n              <span>Paste</span>\n              <span class="shortcutkey">Ctrl+V</span>\n            </li>\n            <li class="item" data-action="duplicate">\n              <i class="uil uil-minus-path"></i>\n              <span>Duplicate</span>\n              <span class="shortcutkey">Ctrl+D</span>\n            </li>\n            <li class="item" data-action="delete">\n              <i class="uil uil-trash-alt"></i>\n              <span>Delete</span>\n              <span class="shortcutkey">DELETE</span>\n            </li>\n\n            <div class="divisor"></div>\n            <li class="item sub-nivel">\n              <div>\n                <i class="uil uil-layers"></i>\n                <span>Layers</span>\n              </div>\n              <i class="uil uil-angle-right"></i>\n              <ul class="sub-nivel-menu">\n                <li class="item" data-action="moveForward">\n                  <i class="uil uil-top-arrow-to-top"></i>\n                  <span>Forward</span>\n                  <span class="shortcutkey">Ctrl+]</span>\n                </li>\n                <li class="item" data-action="moveFullForward">\n                  <i class="uil uil-top-arrow-to-top"></i>\n                  <span>Bring to Front</span>\n                  <span class="shortcutkey">Ctrl+]</span>\n                </li>\n                <li class="item" data-action="moveBackward">\n                  <i class="uil uil-arrow-to-bottom"></i>\n                  <span>Backward</span>\n                  <span class="shortcutkey">Ctrl+Alt+[</span>\n                </li>\n                <li class="item" data-action="moveFullBackward">\n                  <i class="uil uil-arrow-to-bottom"></i>\n                  <span>Send Backward</span>\n                  <span class="shortcutkey">Ctrl+Alt[</span>\n                </li>\n                <div class="divisor"></div>\n                <li class="item" data-action="showLayers">\n                  <i class="uil uil-layers"></i>\n                  <span>Show Layers</span>\n                  <span class="shortcutkey">Alt+1</span>\n                </li>\n              </ul>\n            </li>\n            <li class="item sub-nivel">\n              <div>\n                <i class="uil uil-horizontal-align-left"></i>\n                <span>Align to Page</span>\n              </div>\n              <i class="uil uil-angle-right"></i>\n              <ul class="sub-nivel-menu">\n                <li class="item" data-action="alignLeft">\n                  <i class="uil uil-horizontal-align-left"></i>\n                  <span>Align Left</span>\n                </li>\n                <li class="item" data-action="alignCenter">\n                  <i class="uil uil-horizontal-align-center"></i>\n                  <span>Align Center</span>\n                </li>\n                <li class="item" data-action="alignRight">\n                  <i class="uil uil-horizontal-align-right"></i>\n                  <span>Align Right</span>\n                </li>\n                <div class="divisor"></div>\n\n                <li class="item" data-action="alignTop">\n                  <i class="uil uil-vertical-align-top"></i>\n                  <span>Align Top</span>\n                </li>\n                <li class="item" data-action="alignCenterVertical">\n                  <i class="uil uil-vertical-align-center"></i>\n                  <span>Align Center</span>\n                </li>\n                <li class="item" data-action="alignBottom">\n                  <i class="uil uil-vertical-align-bottom"></i>\n                  <span>Align Bottom</span>\n                </li>\n              </ul>\n            </li>\n            <div class="divisor"></div>\n            <li class="item" data-action="group">\n              <i class="uil uil-object-group"></i>\n              <span>Group</span>\n              <span class="shortcutkey">Ctrl+G</span>\n            </li>\n            <li class="item" data-action="ungroup">\n              <i class="uil uil-object-ungroup"></i>\n              <span>Ungroup</span>\n              <span class="shortcutkey">Ctrl+Shift+G</span>\n            </li>\n            <li class="item" data-action="lock">\n              <i class="uil uil-lock-open-alt"></i>\n              <span>Lock</span>\n            </li>\n            <li class="item" data-action="unlock">\n              <i class="uil uil-lock-alt"></i>\n              <span>Unlock</span>\n            </li>\n            <li class="item" data-action="showDuration">\n              <i class="uil uil-clock"></i>\n              <span>Show Duration</span>\n            </li>\n            <li class="item" data-action="comment">\n              <i class="uil uil-comment-plus"></i>\n              <span>Comment</span>\n              <span class="shortcutkey">Ctrl+Alt+N</span>\n            </li>\n            <li class="item" data-action="addLink">\n              <i class="uil uil-link-add"></i>\n              <span>Add Link</span>\n              <span class="shortcutkey">Ctrl+K</span>\n            </li>\n            <li class="item" data-action="removeLink">\n              <i class="uil uil-link-broken"></i>\n              <span>Remove Link</span>\n              <span class="shortcutkey">Ctrl+Shift+K</span>\n            </li>\n            <li class="item" data-action="editLink">\n              <i class="uil uil-link"></i>\n              <span>Edit Link</span>\n              <span class="shortcutkey">Ctrl+K</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    ';window.ImageEditor.prototype.initializeCanvasActionsMenu=function(){const n=this,i=this.canvas;this.containerEl[0];let o=document.querySelector("#obj-menu"),a=document.querySelector(".canvas-container"),r=null;this.initializeCanvasActions(),this.registerMenuUpdateFunction(g),o||(o=document.createElement("div"),o.id="obj-menu",o.innerHTML=e,a.appendChild(o));const s=document.createElement("div");s.innerHTML=t,document.body.appendChild(s);const l=document.querySelector("#obj-menu"),c=document.querySelector(".menu-wrapper"),d=document.querySelectorAll(".sub-nivel"),p=document.querySelector("#action-menu");function h(){const e=document.querySelectorAll("[data-action]");if(!r)return l.style.display="none",e.forEach((e=>{"paste"===e.getAttribute("data-action")||"comment"===e.getAttribute("data-action")?e.style.display="":e.style.display="none"})),void u();l.style.display="block",p.style.display="block",r.locked&&(p.style.display="none"),e.forEach((e=>{const t=e.getAttribute("data-action");if(r.locked&&"unlock"!==t)e.style.display="none";else switch(t){case"group":e.style.display=!r.isType("group")&&i.getActiveObjects().length>1?"":"none";break;case"ungroup":e.style.display=r.isType("group")?"":"none";break;case"lock":case"delete":e.style.display=r.locked?"none":"";break;case"unlock":e.style.display=r.locked?"":"none";break;case"moveForward":case"moveFullForward":case"moveBackward":case"moveFullBackward":const t=!r.isType("group")||r.isType("group")&&!r.locked;e.style.display=t?"":"none";break;case"addLink":e.style.display=r.link?"none":"";break;case"removeLink":case"editLink":e.style.display=r.link?"":"none";break;case"showDuration":case"comment":case"addLink":case"removeLink":case"editLink":e.style.display="function"==typeof r.getObjects&&r.getObjects().length>1&&!r.isType("group")?"none":"";break;default:e.style.display=""}})),u()}function u(){const e=document.querySelectorAll(".sub-nivel"),t=document.querySelectorAll(".divisor");let n=!0;e.forEach((e=>{const t=e.querySelectorAll(".sub-nivel-menu .item");let i=!0;t.forEach((e=>{"none"!==e.style.display&&(i=!1)})),i?e.style.display="none":(e.style.display="",n=!1)})),n?t.forEach((e=>{e.style.display="none"})):t.forEach((e=>{e.style.display=""}))}function g(){if(!r)return;const e=i.getActiveObject();e&&"activeSelection"===e.type&&e.getObjects().length>1&&(r=e),h();const t=r.getBoundingRect(),n=i.getZoom();i._offset;let a=r.left*n,s=r.top*n;"left"===r.originX&&"top"===r.originY?(a=a+t.width/2-o.offsetWidth/2,s=s+t.height/2-o.offsetHeight-10):(a-=o.offsetWidth/2,s=s-t.height/2-o.offsetHeight-10),o.style.left=`${a}px`,o.style.top=`${s}px`,o.style.display="block"}function v(e){if(e.preventDefault(),"contextmenu"===e.type&&(l.style.display="none",i.discardActiveObject(),i.renderAll(),r=null),"contextmenu"===e.type){i.getPointer(e);const t=i.findTarget(e,!1);t&&(i.setActiveObject(t),i.renderAll(),r=t)}if(h(),d.forEach((e=>e.classList.remove("active"))),e.target.closest("#action-menu")&&"visible"===c.style.visibility)return void(c.style.visibility="hidden");c.querySelector(".content");const{clientX:t,clientY:n}=e,o=window.innerWidth,a=window.innerHeight,s=c.offsetWidth,p=c.offsetHeight;let u=t>o-s?o-s-5:t,g=n>a-p?a-p-5:n;c.style.left=`${u}px`,c.style.top=`${g}px`,c.style.visibility="visible",c.querySelectorAll(".sub-nivel-menu").forEach((e=>{const n=e.getBoundingClientRect();e.style.transform=t>o-s-n.width?`translateX(-${s+15}px)`:`translateX(${s-5}px)`,n.top+n.height>a?e.style.top=`-${n.height-(a-n.top)+5}px`:e.style.top="0"}))}i.on("layer:locked",(e=>{console.log("layer:locked",e),g()})),i.on("selection:created",(e=>{r=e.selected[0],g()})),i.on("selection:updated",(e=>{r=e.selected[0],g()})),i.on("selection:cleared",(()=>{r=null,o.style.display="none"})),i.on("object:scaling",(()=>{r&&(l.style.display="none")})),i.on("object:modified",(e=>{console.log("object:modified",e,r),r&&"activeSelection"===r.type&&(r=i.getActiveObject(),g()),!r||"rotate"!==e.action&&"scale"!==e.action&&"drag"!==e.action||(l.style.display="",g())})),i.on("object:moving",(()=>{r&&(l.style.display="none")})),i.on("object:rotating",(()=>{r&&(l.style.display="none")})),i.on("group:added",(e=>{console.log("group:added",r),r=i.getActiveObject(),r&&g()})),i.on("group:removed",(e=>{console.log("group:removed",e),r=i.getActiveObject(),r&&g()})),a.addEventListener("contextmenu",v),l.addEventListener("click",v),document.querySelectorAll("[data-action]").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.closest("[data-action]").getAttribute("data-action");n.executeAction(t),c.style.visibility="hidden"}))})),document.addEventListener("click",(e=>{e.target.closest("#action-menu")||e.target.closest(".sub-nivel")||(c.style.visibility="hidden"),e.target.closest(".sub-nivel.active")||document.querySelectorAll(".sub-nivel").forEach((e=>e.classList.remove("active"))),e.target.closest(".sub-nivel")&&e.target.closest(".sub-nivel").classList.toggle("active")})),a.querySelector("#obj-menu").addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation()})),a.querySelectorAll("#obj-menu *").forEach((e=>{e.addEventListener("contextmenu",(e=>{e.preventDefault(),e.stopPropagation()}))})),this.initializeShortcuts()}}(),window.ImageEditor.prototype.initializeLineDrawing=function(e){let t,n,i,o=!1;e.on("mouse:down",(a=>{e.isDrawingLineMode&&(o=!0,n=e.getPointer(a.e),i=[n.x,n.y,n.x,n.y],t=new fabric.Line(i,{strokeWidth:2,stroke:"#000000"}),t.selectable=!1,t.evented=!1,t.strokeUniform=!0,e.add(t))})),e.on("mouse:move",(a=>{if(o){if(n=e.getPointer(a.e),a.e.shiftKey){let e=i[0],o=i[1],a=n.x-e,r=n.y-o,s=Math.sqrt(a*a+r*r),l=Math.atan2(r,a)/Math.PI*180;l=15*parseInt((l+7.5)%360/15);let c=s*Math.cos(l*Math.PI/180),d=s*Math.sin(l*Math.PI/180);t.set({x2:c+e,y2:d+o})}else t.set({x2:n.x,y2:n.y});e.renderAll()}})),e.on("mouse:up",(()=>{o&&(t.setCoords(),o=!1,e.fire("object:modified"))}))},function(){const e=(e,t,n,i,o)=>Math.abs(t-i)<=e&&Math.abs(n-o)<=e;window.ImageEditor.prototype.initializePathDrawing=t=>{let n,i,o,a,r,s=!1,l=!1,c=!1;t.on("mouse:down",(e=>{if(t.isDrawingPathMode){if(l=!0,s=!0,i=t.getPointer(e.e),!n)return n=new fabric.Path(`M${i.x} ${i.y} L${i.x} ${i.y}`,{strokeWidth:2,stroke:"#000000",fill:!1}),n.selectable=!1,n.evented=!1,n.strokeUniform=!0,void t.add(n);if(n){n.path.push(["L",i.x,i.y]);let e=n._calcDimensions();return n.set({width:e.width,height:e.height,left:e.left,top:e.top,pathOffset:{x:e.width/2+e.left,y:e.height/2+e.top},dirty:!0}),n.setCoords(),void t.renderAll()}}})),t.on("mouse:move",(d=>{if(!t.isDrawingPathMode)return;if(!s)return;if(i=t.getPointer(d.e),c||(o=["L",i.x,i.y]),n.path.pop(),d.e.shiftKey&&!c){let e=[...n.path].pop(),t=e[1],a=e[2],r=i.x-t,s=i.y-a,l=Math.sqrt(r*r+s*s),c=Math.atan2(s,r)/Math.PI*180;c=15*parseInt((c+7.5)%360/15);let d=l*Math.cos(c*Math.PI/180),p=l*Math.sin(c*Math.PI/180);o[1]=d+t,o[2]=p+a}if(n.path.length>1&&!c){let t=[...n.path];t.pop();for(let n of t){if(("L"===n[0]||"M"===n[0])&&e(10,i.x,i.y,n[1],n[2])){o[1]=n[1],o[2]=n[2];break}if("Q"===n[0]&&e(10,i.x,i.y,n[3],n[4])){o[1]=n[3],o[2]=n[4];break}}}if(l)if(!c&&n.path.length>1){c=!0;let e=n.path.pop();"Q"===e[0]?(o=["Q",e[3],e[4],e[3],e[4]],a=e[3],r=e[4]):(o=["Q",e[1],e[2],e[1],e[2]],a=e[1],r=e[2])}else if(c){let e=i.x-o[3],t=i.y-o[4];o=["Q",a-e,r-t,a,r]}n.path.push(o);let p=n._calcDimensions();n.set({width:p.width,height:p.height,left:p.left,top:p.top,pathOffset:{x:p.width/2+p.left,y:p.height/2+p.top},dirty:!0}),t.renderAll()})),t.on("mouse:up",(e=>{if(!t.isDrawingPathMode)return l=!1,void(c=!1);if(l=!1,c){i=t.getPointer(e.e),n.path.push(["L",i.x,i.y]);let o=n._calcDimensions();n.set({width:o.width,height:o.height,left:o.left,top:o.top,pathOffset:{x:o.width/2+o.left,y:o.height/2+o.top},dirty:!0}),n.setCoords(),t.renderAll()}c=!1}));const d=()=>{if(n.path.pop(),n.path.length>1){let e=n._calcDimensions();n.set({width:e.width,height:e.height,left:e.left,top:e.top,pathOffset:{x:e.width/2+e.left,y:e.height/2+e.top},dirty:!0})}else t.remove(n);t.renderAll(),t.fire("object:modified"),n=null,s=!1};document.addEventListener("keydown",(e=>{s&&27===(e.which||e.keyCode)&&d()})),document.addEventListener("mousedown",(e=>{s&&(document.querySelector(".canvas-container").contains(e.target)||d())}))}}(),window.ImageEditor.prototype.initializeRectDrawing=function(e){let t,n,i,o=!1;e.on("mouse:down",(a=>{e.isDrawingRectMode&&(o=!0,i=e.getPointer(a.e),t=i.x,n=i.y,boxRect=new fabric.Rect({left:t,top:n,width:i.x-t,height:i.y-n,strokeWidth:1,stroke:"#C00000",fill:"rgba(192, 0, 0, 0.2)",transparentCorners:!1,originX:"left",originY:"top",isTemporary:!0}),e.add(boxRect))})),e.on("mouse:move",(a=>{if(!o)return;i=e.getPointer(a.e);const r=a.e.shiftKey;t>i.x&&boxRect.set({left:Math.abs(i.x)}),n>i.y&&boxRect.set({top:Math.abs(i.y)});let s=Math.abs(t-i.x),l=Math.abs(n-i.y);if(r){const e=Math.max(s,l);s=e,l=e}boxRect.set({width:s,height:l}),e.renderAll()})),e.on("mouse:up",(()=>{if(!o)return;let t;const n={left:boxRect.left,top:boxRect.top,width:boxRect.width<80?80:boxRect.width,height:boxRect.height<80?80:boxRect.height,fill:"#000000",strokeWidth:0,stroke:"transparent",selectable:!0,originX:"left",originY:"top"};o=!1,t=new fabric.Rect(n),e.remove(boxRect),e.add(t).setActiveObject(t),t.set({originX:"center",originY:"center",left:t.left+t.width/2,top:t.top+t.height/2}),e.fire("object:modified")}))},window.ImageEditor.prototype.initializeCircleDrawing=function(e){let t,n,i,o=!1;e.on("mouse:down",(a=>{e.isDrawingCircleMode&&(o=!0,i=e.getPointer(a.e),t=i.x,n=i.y,boxRect=new fabric.Ellipse({left:t,top:n,rx:i.x-t,ry:i.y-n,strokeWidth:1,stroke:"#C00000",fill:"rgba(192, 0, 0, 0.2)",transparentCorners:!1,originX:"left",originY:"top",isTemporary:!0}),e.add(boxRect))})),e.on("mouse:move",(a=>{if(!o)return;i=e.getPointer(a.e);const r=a.e.shiftKey;t>i.x&&boxRect.set({left:Math.abs(i.x)}),n>i.y&&boxRect.set({top:Math.abs(i.y)});let s=Math.abs(t-i.x),l=Math.abs(n-i.y);if(r){const e=Math.max(s,l);s=e,l=e}boxRect.set({rx:s/2,ry:l/2}),e.renderAll()})),e.on("mouse:up",(()=>{if(!o)return;if(boxRect.width<20||boxRect.height<20)return e.remove(boxRect),void(o=!1);let t;const n={left:boxRect.left,top:boxRect.top,rx:boxRect.width/2,ry:boxRect.height/2,originX:"left",originY:"top",fill:"#000000",stroke:"transparent",strokeWidth:0,selectable:!0};t=new fabric.Ellipse(n),o=!1,e.remove(boxRect),e.add(t).setActiveObject(t),t.set({originX:"center",originY:"center",left:t.left+t.rx,top:t.top+t.ry}),e.fire("object:modified")}))},window.ImageEditor.prototype.initializeTriangleDrawing=function(e){let t,n,i,o=!1;e.on("mouse:down",(a=>{e.isDrawingTriangleMode&&(o=!0,i=e.getPointer(a.e),t=i.x,n=i.y,boxTriangle=new fabric.Triangle({left:t,top:n,width:i.x-t,height:i.y-n,strokeWidth:1,stroke:"#C00000",fill:"rgba(192, 0, 0, 0.2)",transparentCorners:!1,originX:"left",originY:"top",isTemporary:!0}),e.add(boxTriangle))})),e.on("mouse:move",(a=>{if(!o)return;i=e.getPointer(a.e);const r=a.e.shiftKey;t>i.x&&boxTriangle.set({left:Math.abs(i.x)}),n>i.y&&boxTriangle.set({top:Math.abs(i.y)});let s=Math.abs(t-i.x),l=Math.abs(n-i.y);if(r){const e=Math.max(s,l);s=e,l=e}boxTriangle.set({width:s,height:l}),e.renderAll()})),e.on("mouse:up",(()=>{if(!o)return;let t;const n={left:boxTriangle.left,top:boxTriangle.top,width:boxTriangle.width<80?80:boxTriangle.width,height:boxTriangle.height<80?80:boxTriangle.height,fill:"#000000",strokeWidth:0,stroke:"transparent",selectable:!0,originX:"left",originY:"top"};o=!1,t=new fabric.Triangle(n),e.remove(boxTriangle),e.add(t).setActiveObject(t),t.set({originX:"center",originY:"center",left:t.left+t.width/2,top:t.top+t.height/2}),e.fire("object:modified")}))},window.ImageEditor.prototype.initializeTextBoxDrawing=function(e){let t,n,i,o,a=!1;e.on("mouse:down",(r=>{e.isDrawingTextMode&&(a=!0,o=e.getPointer(r.e),n=o.x,i=o.y,t=new fabric.Rect({left:n,top:i,width:o.x-n,height:o.y-i,strokeWidth:1,stroke:"#C00000",fill:"rgba(192, 0, 0, 0.2)",transparentCorners:!1,originX:"left",originY:"top"}),e.add(t))})),e.on("mouse:move",(r=>{a&&(o=e.getPointer(r.e),n>o.x&&t.set({left:Math.abs(o.x)}),i>o.y&&t.set({top:Math.abs(o.y)}),t.set({width:Math.abs(n-o.x)}),t.set({height:Math.abs(i-o.y)}),e.renderAll())})),e.on("mouse:up",(()=>{if(!a)return;let n;const i={left:t.left,top:t.top,width:t.width<80?80:t.width,fontSize:30,fontFamily:"'Open Sans', sans-serif",lineHeight:1.2,letterSpacing:0};a=!1,n=t.width>80?new fabric.Textbox("Your text goes here...",i):new fabric.IText("Your text goes here...",i),e.remove(t),e.add(n).setActiveObject(n),e.fire("object:modified")}))},function(){"use strict";window.ImageEditor.prototype.initializeTipSection=function(){const e=["Tip: use arrows to move a selected object by 1 pixel!","Tip: Shift + Click to select and modify multiple objects!","Tip: hold Shift when rotating an object for 15° angle jumps!","Tip: hold Shift when drawing a line for 15° angle jumps!","Tip: Ctrl +/-, Ctrl + wheel to zoom in and zoom out!","Tip: Shift + R to toggle rulers!","Tip: hold Shift when drawing a circle or rectangle to keep the 1:1 ratio!"],t=this;$(`${this.containerSelector} #footerbar`).prepend(`\n    <div id="tip-container">${e[parseInt(Math.random()*e.length)]}</div>`),this.hideTip=function(){$(`${t.containerSelector} #footerbar #tip-container`).hide()},this.showTip=function(){$(`${t.containerSelector} #footerbar #tip-container`).show()},this.updateTip=function(e){"string"==typeof e&&$(`${t.containerSelector} #footerbar #tip-container`).html(e)},this.updateTipRandom=function(){const t=e[parseInt(Math.random()*e.length)];this.updateTip(t)}}}(),window.ImageEditor.prototype.initializeUpload=function(){const e=this,t=$(e.containerSelector).find(".canvas-holder"),n=$(e.containerSelector);n.on("click",".drag-drop-input",(function(){console.log("click drag drop"),$(`${e.containerSelector} #btn-image-upload`).click()})),t.on("dragover",".canvas-container",(function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")})),t.on("dragleave",".canvas-container",(function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")})),t.on("drop",".canvas-container",(function(e){if(e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length){let t=e.originalEvent.dataTransfer.files;i(t),$(".custom-modal-container").remove()}})),n.on("dragover",".drag-drop-input",(function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("dragging")})),n.on("dragleave",".drag-drop-input",(function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging")})),n.on("drop",".drag-drop-input",(function(e){if(e.preventDefault(),e.stopPropagation(),$(this).removeClass("dragging"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length){let t=e.originalEvent.dataTransfer.files;i(t),$(".custom-modal-container").remove()}})),this.openDragDropPanel=function(){console.log("open drag drop panel"),n.append('<div class="custom-modal-container">\n        <div class="custom-modal-content">\n          <div class="drag-drop-input">\n            <div>Drag & drop files<br>or click to browse.<br>JPG, PNG, WEBP or SVG only!</div>\n          </div>\n        </div>\n      </div>'),n.on("click",".custom-modal-container",(function(){$(this).remove()}))};const i=t=>{if(0===t.length)return;const n=["image/jpeg","image/png","image/svg+xml","image/webp"];for(let i of t){if(!n.includes(i.type))continue;if("image/svg+xml"!==i.type&&void 0!==e.api.upload&&null!==e.api.upload){o(i);continue}let t=new FileReader;"image/svg+xml"!==i.type?(t.onload=t=>{e.addImageFromUrl(t.target.result)},t.readAsDataURL(i)):(t.onload=t=>{fabric.loadSVGFromString(t.target.result,((t,n)=>{let i=fabric.util.groupSVGElements(t,n);i.set({left:0,top:0}).setCoords(),e.canvas.add(i),e.canvas.renderAll(),e.canvas.fire("object:modified")}))},t.readAsText(i))}},o=t=>{var n=new FormData;n.append("file",t),fetch(e.api.upload,{method:"POST",body:n}).then((e=>e.json())).then((t=>{t.success?(e.images.push(t.url),$(`${e.containerSelector} .toolpanel#Images-panel .content .list-images`).prepend(`<div class="button"><img src="${t.url}" /></div>`),e.addImageFromUrl(t.url)):console.error("Failed uploading file")})).catch((e=>{console.error("Error uploading file:",e)}))};this.containerEl.append('<input id="btn-image-upload" type="file" accept="image/*" multiple hidden>'),document.querySelector(`${this.containerSelector} #btn-image-upload`).addEventListener("change",(function(e){0!==e.target.files.length&&i(e.target.files)}))},function(){"use strict";window.ImageEditor.prototype.initializeCopyPaste=e=>{document.addEventListener("copy",(t=>{e.getActiveObject()&&("image"===e.getActiveObject().type&&(t.preventDefault(),t.clipboardData.setData("text/plain",e.getActiveObject().toDataURL())),"image"!==e.getActiveObject().type&&(t.preventDefault(),e.getActiveObject().clone((e=>{t.clipboardData.setData("text/plain",JSON.stringify(e.toJSON()))}))))})),document.addEventListener("paste",(t=>{let n=t.clipboardData.getData("text");if(n&&(e=>{try{return e=e.split("base64,").pop(),window.atob(e),!0}catch(e){return!1}})(n))return void fabric.Image.fromURL(n,(t=>{t.set({left:0,top:0,crossOrigin:"anonymous"}),t.scaleToHeight(100),t.scaleToWidth(100),e.add(t),e.setActiveObject(t),e.fire("object:modified")}),{crossorigin:"anonymous"});if(t.clipboardData.items.length>0)for(let n=0;n<t.clipboardData.items.length;n++)if(0===t.clipboardData.items[n].type.indexOf("image")){let i=t.clipboardData.items[n].getAsFile();if(null!==i){let t=new FileReader;t.onload=t=>{fabric.Image.fromURL(t.target.result,(t=>{t.set({left:0,top:0,crossOrigin:"anonymous"}),t.scaleToHeight(100),t.scaleToWidth(100),e.add(t),e.setActiveObject(t),e.fire("object:modified")}),{crossorigin:"anonymous"})},t.readAsDataURL(i)}}let i=["rect","circle","line","path","polygon","polyline","textbox","group"];if((e=>{try{const t=JSON.parse(e);return!!t&&"object"==typeof t&&!Array.isArray(t)}catch{return!1}})(n)){let t=JSON.parse(n);if(!i.includes(t.type))return;fabric.util.enlivenObjects([t],(function(t){t.forEach((function(t){t.set({left:0,top:0}),e.add(t),t.setCoords(),e.setActiveObject(t)})),e.renderAll(),e.fire("object:modified")}))}}))}}(),function(){"use strict";window.ImageEditor.prototype.initializeZoomEvents=function(){const e=this;$(`${this.containerSelector} #footerbar`).append('<div class="zoom-level-container"></div>'),$(`${this.containerSelector} #footerbar .zoom-level-container`).append(`\n          <button id="zoom-fit">\n           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M344 0H488c13.3 0 24 10.7 24 24V168c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39-87 87c-9.4 9.4-24.6 9.4-33.9 0l-32-32c-9.4-9.4-9.4-24.6 0-33.9l87-87L327 41c-6.9-6.9-8.9-17.2-5.2-26.2S334.3 0 344 0zM168 512H24c-13.3 0-24-10.7-24-24V344c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39 87-87c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8z"/></svg> \n          </button>\n          <input type="range" id="input-zoom-level" min="0.1" max="3" step="0.05" value="1" oninput="updateZoomValue(this.value)">\n          <div id="zoom-value">${Math.round(100)}%</div>\n        `),$(`${this.containerSelector} #footerbar .zoom-level-container button`).click((function(){"function"==typeof e.fitZoom&&e.fitZoom()})),window.updateZoomValue=function(t){if("fit"===t)"function"==typeof e.fitZoom&&e.fitZoom();else{let n=parseFloat(t);"function"==typeof e.applyZoom&&e.applyZoom(n)}},"function"==typeof e.applyZoom&&e.applyZoom(1);const t=.05;this.applyZoom=e=>{this.canvas.setZoom(e),this.canvas.setWidth(this.canvas.originalW*this.canvas.getZoom()),this.canvas.setHeight(this.canvas.originalH*this.canvas.getZoom()),this.inputZoomLevel(e)},this.fitZoom=()=>{const e=document.querySelector(this.containerSelector+" .canvas-holder"),n=e.clientWidth,i=e.clientHeight,o=n/this.canvas.originalW,a=i/this.canvas.originalH,r=Math.min(o,a)-.05,s=Math.max(t,Math.min(3,r)).toFixed(2);this.applyZoom(s)},document.addEventListener("keydown",(e=>{const n=e.which||e.keyCode;if(189===n&&e.ctrlKey){if(e.preventDefault(),this.canvas.getZoom()===t)return;let n=parseInt(100*this.canvas.getZoom());if(n%25!=0)for(;n%25!=0;)n-=1;else n-=25;n/=100,n=n<=0?t:n,this.applyZoom(n)}if(187===n&&e.ctrlKey){if(e.preventDefault(),3===this.canvas.getZoom())return;let t=parseInt(100*this.canvas.getZoom());if(t%25!=0)for(;t%25!=0;)t+=1;else t+=25;t/=100,t=t>3?3:t,this.applyZoom(t)}96!==n&&48!==n&&192!==n||!e.ctrlKey||(e.preventDefault(),this.applyZoom(1))})),document.addEventListener("wheel",(e=>{if(!e.ctrlKey)return;e.preventDefault();let n=this.canvas.getZoom();n=(100*n+(e.deltaY>0?-5:5))/100,n<t||n>3||this.applyZoom(n)}),{passive:!1}),this.inputZoomLevel=e=>{const t=document.querySelector(this.containerSelector+" #input-zoom-level");t&&(t.value=e,document.getElementById("zoom-value").textContent=Math.round(100*e)+"%")}}}(),function(){"use strict";window.ImageEditor&&(window.ImageEditor.prototype.initializeLayers=function(){const e=this,t=document.createElement("div");t.className="image-editor-layers";const n=document.createElement("div");n.innerHTML="<p>Layers</p>",t.appendChild(n);const i=document.createElement("div");i.className="layers-list",t.appendChild(i),e.containerEl.find(".main-panel").append(t);let o=null,a=null;function r(){e.canvas.getObjects().forEach(((e,t)=>{!function(e){if(!e.id){const t=(new Date).getTime();e.id=`${e.type}-${t}`}}(e),e.zIndex=t})),i.innerHTML="",e.canvas.getObjects().filter((e=>!(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)||e.id&&(e.id.startsWith("vertical-")||e.id.startsWith("horizontal-"))||e.isTemporary))).reverse().forEach((t=>{const n=function(t){const n=document.createElement("div");n.className="layer-item",n.dataset.objectId=t.id,n.draggable=!0;let r="📄";"image"===t.type?r="🖼️":"text"===t.type?r="📝":"rect"===t.type?r="⬜":"circle"===t.type||"ellipse"===t.type?r="⚪":"triangle"===t.type?r="📐":"path"===t.type&&(r="🤍");let s=t.type?t.type.charAt(0).toUpperCase()+t.type.slice(1):"Object";return n.innerHTML=`\n        <div class="layer-info">\n          <span class="layer-icon">${r}</span> <span class="layer-name">${s}</span>\n        </div>\n        <div class="layer-controls">\n          <button class="layer-lock" style="opacity: ${t.locked?"1":"0.5"}; ">🔒</button>\n          <button class="layer-visibility" style="opacity: ${t.visible?"1":"0.5"}; ">👁️</button>\n          <button class="layer-delete">🗑️</button>\n        </div>\n      `,n.addEventListener("dragstart",(e=>{o=n,n.style.opacity="0.5",e.dataTransfer.effectAllowed="move",a=document.createElement("div"),a.className="layer-item-placeholder",a.style.cssText=`height: ${n.offsetHeight}px;`})),n.addEventListener("dragend",(()=>{n.style.opacity="1",a&&a.parentNode&&a.parentNode.removeChild(a),o=null,a=null})),n.addEventListener("dragover",(e=>{if(e.preventDefault(),o!==n){const t=n.getBoundingClientRect(),i=t.top+t.height/2;e.clientY<i?n.parentNode.insertBefore(a,n):n.parentNode.insertBefore(a,n.nextSibling)}})),n.querySelector(".layer-visibility").addEventListener("click",(n=>{n.stopPropagation(),t.visible=!t.visible,n.target.style.opacity=t.visible?"1":"0.5",e.canvas.renderAll()})),n.querySelector(".layer-lock").addEventListener("click",(n=>{n.stopPropagation(),t.lockMovementX=!t.lockMovementX,t.lockMovementY=!t.lockMovementY,t.lockScalingX=!t.lockScalingX,t.lockScalingY=!t.lockScalingY,t.lockRotation=!t.lockRotation,t.lockUniScaling=!t.lockUniScaling,t.lockSkewingX=!t.lockSkewingX,t.lockSkewingY=!t.lockSkewingY,t.hasControls=!t.hasControls,t.hasRotatingPoint=!t.hasRotatingPoint,t.locked=!t.locked,n.target.style.opacity=t.locked?"1":"0.5",e.canvas.fire("layer:locked"),e.canvas.renderAll()})),n.querySelector(".layer-delete").addEventListener("click",(i=>{i.stopPropagation(),e.canvas.remove(t),n.remove(),e.canvas.renderAll()})),n.addEventListener("click",(()=>{e.canvas.setActiveObject(t),e.canvas.renderAll()})),i.appendChild(n),n}(t);e.canvas.getActiveObject()===t&&(n.style.background="#e4e4e4")}))}i.addEventListener("dragover",(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"})),i.addEventListener("drop",(t=>{if(t.preventDefault(),console.log("drop in container",o),o){const t=Array.from(i.children),n=t.indexOf(a);if(t.indexOf(o),-1!==n){const t=e.canvas.getObjects().filter((e=>!e.id||!e.id.startsWith("vertical-")&&!e.id.startsWith("horizontal-"))),i=o.dataset.objectId,a=t.find((e=>e.id===i));if(a){console.log("Object to move:",a),e.canvas.remove(a);const i=fabric.util.object.clone(a);e.canvas.insertAt(i,t.length-1-n),e.canvas.renderAll(),r()}else console.warn("Object to be moved not found in canvas with ID:",i)}}})),e.canvas.on("object:added",r),e.canvas.on("object:removed",r),e.canvas.on("object:modified",r),e.canvas.on("selection:created",r),e.canvas.on("selection:updated",r),e.canvas.on("selection:cleared",r),r()})}(),function(){"use strict";window.ImageEditor.prototype.initializeRuler=function(){const e=this,t=20,n="rgba(0, 162, 255, 0.5)",i="rgba(0, 162, 255, 0.8)",o="rgba(255, 0, 0, 0.5)",a="imageEditor_rulersVisible",r="imageEditor_marginsConfig";this.margins={show:!1,top:70,right:70,bottom:70,left:70},this.saveRulerSettings=function(){if(window.saveInBrowser)try{window.saveInBrowser.save(a,this.isRulersVisible),window.saveInBrowser.save(r,this.margins)}catch(e){console.error("Erro ao salvar configurações de réguas:",e)}},this.loadRulerSettings=function(){if(window.saveInBrowser)try{const e=window.saveInBrowser.load(a);null!=e&&(this.isRulersVisible=e);const t=window.saveInBrowser.load(r);t&&(this.margins=t)}catch(e){console.error("Erro ao carregar configurações de réguas:",e)}},this.initRulers=function(){$(`${this.containerSelector} .canvas-holder`).append('<canvas id="ruler-horizontal" class="ruler horizontal-ruler"></canvas>\n         <canvas id="ruler-vertical" class="ruler vertical-ruler"></canvas>\n         <div id="ruler-corner" class="ruler-corner"></div>\n         <div id="ruler-menu" class="ruler-menu" style="display: none;">\n           <button id="toggle-margins">Mostrar margens</button>\n           <button id="clear-guides">Limpar guias</button>\n         </div>'),$(`${this.containerSelector} .horizontal-ruler`).css({position:"absolute",top:"0",left:"20px",height:"20px",right:"0","background-color":"#f0f0f0","border-bottom":"1px solid #ccc",display:"none"}),$(`${this.containerSelector} .vertical-ruler`).css({position:"absolute",top:"20px",left:"0",width:"20px",bottom:"0","background-color":"#f0f0f0","border-right":"1px solid #ccc",display:"none"}),$(`${this.containerSelector} .ruler-corner`).css({position:"absolute",top:"0",left:"0",width:"20px",height:"20px","background-color":"#f0f0f0","border-right":"1px solid #ccc","border-bottom":"1px solid #ccc",display:"none",cursor:"pointer"}),$(`${this.containerSelector} .ruler-menu`).css({position:"absolute",top:"25px",left:"25px",padding:"5px","background-color":"#fff",border:"1px solid #ccc","border-radius":"4px","box-shadow":"0px 2px 5px rgba(0,0,0,0.2)","z-index":"1000"}),$(`${this.containerSelector} .ruler-menu button`).css({display:"block",margin:"5px 0",padding:"5px 10px",width:"100%","text-align":"left",background:"none",border:"none",cursor:"pointer"}),$(`${this.containerSelector} .ruler-menu button:hover`).css({"background-color":"#f0f0f0"}),this.horizontalRuler=document.getElementById("ruler-horizontal"),this.verticalRuler=document.getElementById("ruler-vertical"),this.horizontalRuler&&this.verticalRuler&&(this.ctxH=this.horizontalRuler.getContext("2d"),this.ctxV=this.verticalRuler.getContext("2d")),$(`${this.containerSelector} .ruler-corner`).click((function(t){const n=$(`${e.containerSelector} .ruler-menu`);n.is(":visible")?n.hide():n.show(),t.stopPropagation()})),$(document).click((function(t){$(t.target).closest(".ruler-corner, .ruler-menu").length||$(`${e.containerSelector} .ruler-menu`).hide()})),$(`${this.containerSelector} #toggle-margins`).click((function(){e.margins.show=!e.margins.show,$(this).text(e.margins.show?"Ocultar margens":"Mostrar margens"),e.drawCanvasElements(),$(`${e.containerSelector} .ruler-menu`).hide(),e.saveRulerSettings()})),$(`${this.containerSelector} #clear-guides`).click((function(){e.clearGuides(),$(`${e.containerSelector} .ruler-menu`).hide()}))},this.resizeRulers=function(){if(this.canvas)try{const e=document.querySelector(this.containerSelector+" .canvas-holder"),n=e.clientWidth,i=e.clientHeight,o=document.querySelector(this.containerSelector+" .canvas-container"),a=o?o.getBoundingClientRect():null;a&&a.left,this.horizontalRuler.width=n-t,this.horizontalRuler.height=t,this.verticalRuler.width=t,this.verticalRuler.height=i-t,this.horizontalRuler.style.left="20px",this.horizontalRuler.style.top="0",this.verticalRuler.style.left="0",this.verticalRuler.style.top="20px",this.drawRulers()}catch(e){console.error("Erro ao redimensionar réguas:",e)}},this.drawMargins=function(){if(!this.margins.show||!this.canvas)return;this.logCanvasDimensions("drawMargins");const e=this.dimensions?this.dimensions.width:this.canvas.width||1e3,t=this.dimensions?this.dimensions.height:this.canvas.height||1e3;console.log("Dimensões do canvas para margens:",e,"x",t);const n=this.margins.left,i=e-this.margins.right,o=this.margins.top,a=t-this.margins.bottom;this.updateOrCreateMargin("marginTop",[0,o,e,o]),this.updateOrCreateMargin("marginRight",[i,0,i,t]),this.updateOrCreateMargin("marginBottom",[0,a,e,a]),this.updateOrCreateMargin("marginLeft",[n,0,n,t])},this.updateOrCreateMargin=function(e,t){if(!this.canvas)return null;let n=this.canvas.getObjects().find((t=>t.metadata&&t.metadata.isMargin&&t.metadata.id===e));return n?n.set({x1:t[0],y1:t[1],x2:t[2],y2:t[3],excludeFromExport:!0}):(n="marginTop"===e||"marginBottom"===e?new fabric.Line(t,{stroke:o,strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockMovementX:!0,lockMovementY:!1,hasControls:!1,hasBorders:!0,hoverCursor:"ns-resize",moveCursor:"ns-resize",padding:5,originX:"center",originY:"center",excludeFromExport:!0,metadata:{isMargin:!0,id:e,isHorizontal:!0}}):new fabric.Line(t,{stroke:o,strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!0,hasControls:!1,hasBorders:!0,hoverCursor:"ew-resize",moveCursor:"ew-resize",padding:5,originX:"center",originY:"center",excludeFromExport:!0,metadata:{isMargin:!0,id:e,isHorizontal:!1}}),this.canvas.add(n)),n},this.clearGuides=function(){this.canvas&&(this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide)).forEach((e=>{this.canvas.remove(e)})),this.canvas.renderAll())},this.clearMargins=function(){this.canvas&&(this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isMargin)).forEach((e=>{this.canvas.remove(e)})),this.canvas.renderAll())},this.drawRulers=function(){if(this.ctxH&&this.ctxV&&this.canvas)try{const e=this.canvas.getZoom(),n=this.canvas.viewportTransform;this.ctxH.clearRect(0,0,this.horizontalRuler.width,this.horizontalRuler.height),this.ctxV.clearRect(0,0,this.verticalRuler.width,this.verticalRuler.height),this.ctxH.font="9px Arial",this.ctxH.fillStyle="#666",this.ctxH.strokeStyle="#666",this.ctxV.font="9px Arial",this.ctxV.fillStyle="#666",this.ctxV.strokeStyle="#666";const i=e>=1?10:50,o=document.querySelector(this.containerSelector+" .canvas-container"),a=o?o.getBoundingClientRect():null,r=(a&&a.left,Math.floor(-n[4]/e/i)*i),s=Math.floor(-n[5]/e/i)*i;for(let o=r;o<=r+this.horizontalRuler.width/e;o+=i){const i=(o-r)*e+n[4],a=o%100==0,s=a?15:10;this.ctxH.beginPath(),this.ctxH.moveTo(i,t),this.ctxH.lineTo(i,t-s),this.ctxH.stroke(),a&&this.ctxH.fillText(o.toString(),i+2,10)}for(let o=s;o<=s+this.verticalRuler.height/e;o+=i){const i=(o-s)*e+n[5],a=o%100==0,r=a?15:10;this.ctxV.beginPath(),this.ctxV.moveTo(t,i),this.ctxV.lineTo(t-r,i),this.ctxV.stroke(),a&&(this.ctxV.save(),this.ctxV.translate(10,i+10),this.ctxV.rotate(-Math.PI/2),this.ctxV.fillText(o.toString(),0,0),this.ctxV.restore())}this.lastMousePosition&&this.drawCursorOnly(this.lastMousePosition.x,this.lastMousePosition.y)}catch(e){console.error("Erro ao desenhar réguas:",e)}},this.drawCursorOnly=function(e,n){if(this.isRulersVisible&&this.ctxH&&this.ctxV)try{const i=document.querySelector(`${this.containerSelector} .canvas-holder`);if(!i)return;const o=i.getBoundingClientRect(),a=e-o.left,r=n-o.top;a>t&&(this.ctxH.fillStyle="rgba(255, 0, 0, 0.5)",this.ctxH.fillRect(a-t,0,1,t)),r>t&&(this.ctxV.fillStyle="rgba(255, 0, 0, 0.5)",this.ctxV.fillRect(0,r-t,t,1))}catch(e){console.error("Erro ao desenhar cursor nas réguas:",e)}},this.drawCanvasElements=function(){this.canvas&&(this.margins.show?this.drawMargins():this.clearMargins(),this.canvas.renderAll())},this.addGuide=function(e,t){if(!this.canvas)return console.error("Canvas não está disponível para adicionar guia"),null;try{this.logCanvasDimensions("addGuide início");const i=this.dimensions?this.dimensions.width:this.canvas.width||1e3,o=this.dimensions?this.dimensions.height:this.canvas.height||1e3,a=this.canvas.getElement().getBoundingClientRect(),r=this.canvas.getZoom(),s=this.canvas.viewportTransform;let l,c;return e?(l=(t-a.top)/r-s[5]/r,l<0&&(l=0),l>o&&(l=o)):(l=(t-a.left)/r-s[4]/r,l<0&&(l=0),l>i&&(l=i)),c=e?new fabric.Line([0,l,i,l],{stroke:n,strokeWidth:3,selectable:!0,evented:!0,lockMovementX:!0,lockMovementY:!1,hasControls:!1,hasBorders:!0,hoverCursor:"ns-resize",moveCursor:"ns-resize",padding:5,originX:"center",originY:"center",opacity:.7,excludeFromExport:!0,metadata:{isGuide:!0,isHorizontal:!0}}):new fabric.Line([l,0,l,o],{stroke:n,strokeWidth:3,selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!0,hasControls:!1,hasBorders:!0,hoverCursor:"ew-resize",moveCursor:"ew-resize",padding:5,originX:"center",originY:"center",opacity:.7,excludeFromExport:!0,metadata:{isGuide:!0,isHorizontal:!1}}),c.active=!1,this.canvas.add(c),c.bringToFront(),this.canvas.renderAll(),this.canvas.setActiveObject(c),c}catch(e){return console.error("Erro ao adicionar guia:",e),null}},this.checkSnapping=function(e){if(!this.canvas||!e)return!1;if(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))return!1;try{const t=10/this.canvas.getZoom(),o=e.getBoundingRect(),a=o.left,r=o.top,s=o.left+o.width,l=o.top+o.height,c=a+o.width/2,d=r+o.height/2,p=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));let h=null,u=t;if(p.forEach((e=>{if(e.metadata.isGuide&&e.metadata.isHorizontal||e.metadata.isMargin&&("marginTop"===e.metadata.id||"marginBottom"===e.metadata.id)){const t=e.y1,n=Math.abs(t-r);n<u&&(u=n,h={axis:"y",target:r,value:t,guide:e});const i=Math.abs(t-d);i<u&&(u=i,h={axis:"y",target:d,value:t,guide:e});const o=Math.abs(t-l);o<u&&(u=o,h={axis:"y",target:l,value:t,guide:e})}else if(e.metadata.isGuide&&!e.metadata.isHorizontal||e.metadata.isMargin&&("marginLeft"===e.metadata.id||"marginRight"===e.metadata.id)){const t=e.x1,n=Math.abs(t-a);n<u&&(u=n,h={axis:"x",target:a,value:t,guide:e});const i=Math.abs(t-c);i<u&&(u=i,h={axis:"x",target:c,value:t,guide:e});const o=Math.abs(t-s);o<u&&(u=o,h={axis:"x",target:s,value:t,guide:e})}})),h){if(h.guide.metadata.isGuide&&(h.guide.stroke,h.guide.strokeWidth,h.guide.opacity,h.guide.set({stroke:i,strokeWidth:2,opacity:1})),"y"===h.axis){const t=h.value-h.target;e.set({top:e.top+t})}else{const t=h.value-h.target;e.set({left:e.left+t})}return setTimeout((()=>{h.guide&&h.guide.metadata&&h.guide.metadata.isGuide&&(h.guide.active||h.guide.set({stroke:n,strokeWidth:3,opacity:.7}),this.canvas.renderAll())}),300),!0}}catch(e){console.error("Erro ao verificar snapping:",e)}return!1},this.toggleRulers=function(){this.isRulersVisible=!this.isRulersVisible;const e=this.isRulersVisible?"block":"none";$(`${this.containerSelector} .ruler`).css("display",e),$(`${this.containerSelector} .ruler-corner`).css("display",e),$(`${this.containerSelector} .ruler-menu`).hide(),this.isRulersVisible?($(`${this.containerSelector} .canvas-holder .content`).css({"padding-top":"20px","padding-left":"20px"}),this.logCanvasDimensions("toggleRulers - mostrar"),setTimeout((()=>this.forceGuidesMovable()),100)):($(`${this.containerSelector} .canvas-holder .content`).css({"padding-top":"0","padding-left":"0"}),this.margins&&this.margins.show&&(this.margins.show=!1,this.clearMargins())),this.isRulersVisible&&this.canvas&&(this.resizeRulers(),this.drawCanvasElements(),this.updateGuidesAfterCanvasChange()),this.saveRulerSettings(),this.fitZoom()},this.setupRulerInteractions=function(){const e=this;$(`${this.containerSelector} .canvas-holder`).mousemove((function(t){if(!e.isRulersVisible||!e.canvas)return;this.getBoundingClientRect();const n=t.clientX,i=t.clientY;e.drawRulerCursors(n,i)})),$(`${this.containerSelector} .horizontal-ruler`).mousedown((function(t){if(!e.canvas)return;const n=t.clientY;this.getBoundingClientRect(),e.addGuide(!0,n)?console.log("Horizontal guide added at Y:",n):console.error("Failed to add horizontal guide")})),$(`${this.containerSelector} .vertical-ruler`).mousedown((function(t){if(!e.canvas)return;const n=t.clientX;this.getBoundingClientRect(),e.addGuide(!1,n)?console.log("Vertical guide added at X:",n):console.error("Failed to add vertical guide")})),this.canvas&&(this.canvas.on("object:moving",(function(t){if(t.target)if(t.target.metadata&&t.target.metadata.isGuide)try{const n=e.dimensions?e.dimensions.width:e.canvas.width||1e3,i=e.dimensions?e.dimensions.height:e.canvas.height||1e3;t.target.metadata.isHorizontal?(t.target.top<0&&(t.target.top=0),t.target.top>i&&(t.target.top=i),t.target.set({x1:0,y1:t.target.top,x2:n,y2:t.target.top,opacity:1})):(t.target.left<0&&(t.target.left=0),t.target.left>n&&(t.target.left=n),t.target.set({x1:t.target.left,y1:0,x2:t.target.left,y2:i,opacity:1}))}catch(e){console.error("Erro ao mover guia:",e)}else e.isRulersVisible&&e.checkSnapping(t.target)})),this.canvas.on("mouse:dblclick",(function(t){t.target&&t.target.metadata&&t.target.metadata.isGuide&&(e.canvas.remove(t.target),e.canvas.renderAll())})),this.canvas.on("mouse:wheel",(function(){e.isRulersVisible&&(e.drawRulers(),e.updateGuidesAfterCanvasChange())})),this.canvas.on("mouse:down",(function(t){(t.e.altKey||t.e.metaKey)&&(e.isPanning=!0)})),this.canvas.on("mouse:up",(function(){e.isPanning&&(e.isPanning=!1,e.isRulersVisible&&e.updateGuidesAfterCanvasChange())})),this.canvas.on("object:modified",(function(t){const n=t.target;n&&n.metadata&&n.metadata.isGuide&&(n.active||n.set({opacity:.7}),setTimeout((()=>e.forceGuidesMovable()),100),e.canvas.renderAll())}))),$(document).keydown((function(t){t.shiftKey&&"R"===t.key&&(e.toggleRulers(),$(`${e.containerSelector} #toolbar button#ruler`).toggleClass("active"),t.preventDefault())})),this.canvas.on("selection:created",(function(t){if(t.selected&&1===t.selected.length&&t.selected[0].metadata&&t.selected[0].metadata.isGuide){const n=t.selected[0];n.set({stroke:i,strokeWidth:2,opacity:1}),n.active=!0,e.canvas.renderAll()}})),this.canvas.on("selection:updated",(function(t){if(e.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide)).forEach((e=>{e.active=!1,e.set({stroke:n,strokeWidth:3,opacity:.7})})),t.selected&&1===t.selected.length&&t.selected[0].metadata&&t.selected[0].metadata.isGuide){const n=t.selected[0];n.set({stroke:i,strokeWidth:2,opacity:1}),n.active=!0,e.canvas.renderAll()}})),this.canvas.on("selection:cleared",(function(){const t=e.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));t.length>0&&(t.forEach((e=>{e.active=!1,e.set({stroke:n,strokeWidth:3,opacity:.7})})),e.canvas.renderAll())})),this.canvas.on("mouse:down",(function(t){if(t.target&&!t.target.metadata?.isGuide){const n=e.canvas.getActiveObject();n&&n.metadata&&n.metadata.isGuide&&(e.canvas.discardActiveObject(),setTimeout((()=>{e.canvas.setActiveObject(t.target),e.canvas.renderAll()}),50))}}))},this.initRulerComponent=function(){this.isRulersVisible=!1,this.loadRulerSettings(),this.initRulers()},this.setupRulerAfterCanvasReady=function(){if(this.canvas){if(this.setupRulerInteractions(),this.resizeRulers(),this.logCanvasDimensions("setupRulerAfterCanvasReady"),this.forceGuidesMovable(),this.canvas.on("after:render",(function(){e.calcOffset&&e.calcOffset()})),this.forceGuidesMovable(),this.canvas.on("mouse:up",(function(){e.isRulersVisible&&setTimeout((()=>e.forceGuidesMovable()),100)})),this.isRulersVisible){const e="block";$(`${this.containerSelector} .ruler`).css("display",e),$(`${this.containerSelector} .ruler-corner`).css("display",e),$(`${this.containerSelector} .canvas-holder .content`).css({"padding-top":"20px","padding-left":"20px"}),$(`${this.containerSelector} #toggle-margins`).text(this.margins.show?"Ocultar margens":"Mostrar margens"),this.margins.show&&this.drawCanvasElements()}}else console.error("Canvas ainda não está pronto para configurar réguas")},this.drawRulerCursors=function(e,t){if(this.isRulersVisible)try{this.lastMousePosition={x:e,y:t},this.drawRulers()}catch(e){console.error("Erro ao desenhar cursores nas réguas:",e)}},this.logCanvasDimensions=function(e){if(!this.canvas)return;const t=this.dimensions?this.dimensions.width:this.canvas.width||1e3,n=this.dimensions?this.dimensions.height:this.canvas.height||1e3,i=this.canvas.getZoom(),o=this.canvas.viewportTransform;console.log(`--- Dimensões do Canvas (${e}) ---`),console.log("Dimensões:",t,"x",n),console.log("this.dimensions:",this.dimensions),console.log("this.canvas.width/height:",this.canvas.width,"x",this.canvas.height),console.log("Zoom atual:",i),console.log("ViewportTransform:",o),console.log("---------------------------------------")},this.updateGuidesAfterCanvasChange=function(){if(!this.canvas)return;const e=this.dimensions?this.dimensions.width:this.canvas.width||1e3,t=this.dimensions?this.dimensions.height:this.canvas.height||1e3,n=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==n.length&&(n.forEach((n=>{try{if(n.metadata.isHorizontal){const t=void 0!==n.top?n.top:void 0!==n.y1?n.y1:0;n.set({x1:0,y1:t,x2:e,y2:t})}else{const e=void 0!==n.left?n.left:void 0!==n.x1?n.x1:0;n.set({x1:e,y1:0,x2:e,y2:t})}}catch(e){console.error("Erro ao atualizar guia:",e)}})),this.canvas.renderAll(),setTimeout((()=>this.forceGuidesMovable()),100))},this.forceGuidesMovable=function(){if(!this.canvas)return;const e=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==e.length?(e.forEach(((t,n)=>{try{const i=t.metadata.isHorizontal;console.log(`Configurando guia ${n+1}/${e.length} (${i?"horizontal":"vertical"})`),console.log("Propriedades atuais:",{selectable:t.selectable,lockMovementX:t.lockMovementX,lockMovementY:t.lockMovementY}),t.set({selectable:!0,evented:!0,lockMovementX:i,lockMovementY:!i,hasControls:!1,hasBorders:!0,padding:8,strokeWidth:2,hoverCursor:i?"ns-resize":"ew-resize",moveCursor:i?"ns-resize":"ew-resize",excludeFromExport:!0,opacity:t.active?1:.7})}catch(e){console.error(`Erro ao configurar guia ${n+1}:`,e)}})),this.canvas.renderAll()):console.log("Nenhuma guia encontrada para tornar movível")}},window.addEventListener("resize",(function(){window.app&&window.app.ruler&&window.app.ruler.resizeRulers()})),window.app?window.app.setupRulerAfterCanvasReady=function(){try{if(!window.app.canvas)return void console.error("Canvas ainda não está inicializado");if(!window.app.ruler)return void console.error("Objeto ruler não foi inicializado");window.app.ruler.setupRulerAfterCanvasReady()}catch(e){console.error("Erro ao configurar réguas após inicialização do canvas:",e)}}:console.warn("window.app não está disponível para configurar setupRulerAfterCanvasReady")}(),function(){"use strict";window.ImageEditor.prototype.initializeFullscreenEvents=function(){const e=document.querySelector(`${this.containerSelector}`),t=document.querySelector(`${this.containerSelector} #fullscreen`),n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"/></svg>';t&&t.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen().then((()=>t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>')):e.webkitSupportsFullscreen?e.webkitEnterFullscreen().then((()=>t.innerHTML=n)):e.requestFullscreen().then((()=>t.innerHTML=n))}))}}(),function(){"use strict";window.ImageEditor.prototype.initializeNotification=function(){try{const e=document.querySelector(`${this.containerSelector} .main-panel`),t=e=>{switch(e){case"Danger":return"#eb3b5a";case"Warning":return"#fdcb6e";default:return"#00b894"}};class n{constructor(t,n,i){this.message=t,this.color=n,this.time=i,this.element=null;var o=document.createElement("div");o.className="toast-notification",this.element=o;var a=document.getElementsByClassName("toast-notification");o.style.opacity=.8,o.style.marginTop=55*a.length+"px",o.style.backgroundColor=this.color,(t=document.createElement("div")).className="message-container",t.textContent=this.message,o.appendChild(t);var r=document.createElement("div");r.className="close-notification",r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>',o.append(r),e.appendChild(o),setTimeout((function(){o.remove()}),this.time),r.addEventListener("click",(()=>{o.remove()}))}}this.toast=(e,i,o)=>{o=null!=o?o:5e3,i=t(i),new n(e,i,o)}}catch(e){console.error(e)}}}(),window.ImageEditor.prototype.initializeAnimations=function(e){this.animations=new class{constructor(e){this.canvas=e,this.animations={slideInLeft:e=>this.slideIn(e,"left",this.canvas),slideInRight:e=>this.slideIn(e,"right",this.canvas),slideInTop:e=>this.slideIn(e,"top",this.canvas),slideInBottom:e=>this.slideIn(e,"bottom",this.canvas),fade:e=>this.fade(e,1,this.canvas),zoom:e=>this.zoom(e,1,this.canvas),spin:e=>this.spin(e,360,this.canvas),swing:e=>this.swing(e,this.canvas),float:e=>this.float(e,30,this.canvas),typewriter:e=>this.typewriter(e,this.canvas)}}runAnimation(){this.canvas.renderAll.bind(this.canvas),this.canvas.getObjects().forEach((e=>{if(e.animation){const{type:t,duration:n,easing:i}=e.animation;this.animations[t]&&(this.animations[t](e),console.log("Animação carregada:",e.animation))}}))}slideIn(e,t="left"){const n={left:e.left,top:e.top};"left"===t&&(e.left=-e.width),"right"===t&&(e.left=this.canvas.width+e.width),"top"===t&&(e.top=-e.height),"bottom"===t&&(e.top=this.canvas.height+e.height),e.animate({left:n.left,top:n.top},{duration:1e3,easing:fabric.util.ease.easeOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}fade(e,t=1){e.opacity=1===t?0:e.opacity,e.animate("opacity",t,{duration:1e3,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas)})}zoom(e,t=2){const n=e.scaleX,i=e.getCenterPoint();e.set({originX:"center",originY:"center",left:i.x,top:i.y}),e.animate({scaleX:t,scaleY:t},{duration:1e3,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate({scaleX:n,scaleY:n},{duration:1e3,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}})}spin(e,t=360){const n=e.angle,i=e.getCenterPoint();e.set({originX:"center",originY:"center",left:i.x,top:i.y}),e.animate("angle",n+t,{duration:1e3,easing:fabric.util.ease.easeOutBack,onChange:this.canvas.renderAll.bind(this.canvas)})}swing(e){const t=e.angle,n=e.getCenterPoint();e.set({originX:"center",originY:"center",left:n.x,top:n.y}),e.animate("angle",t+10,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate("angle",t-10,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate("angle",t,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}})}})}float(e,t=20){const n=e.top;e.animate("top",n-t,{duration:1e3,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate("top",n,{duration:1e3,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas)})}})}typewriter(e){const t=e.text;e.text="";let n=0;const i=setInterval((()=>{n<t.length?(e.text+=t[n],n++,this.canvas.renderAll()):clearInterval(i)}),100)}}(e)},function(){"use strict";if(void 0!==window.ImageEditor&&void 0!==window.ImageEditor.prototype.initializeToolbar){const e={name:"frames",title:"Molduras",icon:'<svg viewBox="0 0 512 512"><path d="M448 128v288H64V128h384m0-64H64C28.65 64 0 92.65 0 128v288c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V128c0-35.35-28.65-64-64-64z"/><path d="M128 384h256v-32H128zM128 288h256v-32H128zM128 192h256v-32H128z"/></svg>'};window.ImageEditor.prototype.initializeToolbar.defaultButtons||(window.ImageEditor.prototype.initializeToolbar.defaultButtons=[]);let t=!1;for(let e=0;e<window.ImageEditor.prototype.initializeToolbar.defaultButtons.length;e++)if("frames"===window.ImageEditor.prototype.initializeToolbar.defaultButtons[e].name){t=!0;break}t||window.ImageEditor.prototype.initializeToolbar.defaultButtons.push(e)}const e={rectangle:function(e){return new fabric.Rect({width:e,height:e,originX:"center",originY:"center"})},circle:function(e){return new fabric.Circle({radius:e/2,originX:"center",originY:"center"})},triangle:function(e){return new fabric.Triangle({width:e,height:e,originX:"center",originY:"center"})},ellipse:function(e){return new fabric.Ellipse({rx:e/2,ry:e/3,originX:"center",originY:"center"})},diamond:function(e){const t=[{x:0,y:-e/2},{x:e/2,y:0},{x:0,y:e/2},{x:-e/2,y:0}];return new fabric.Polygon(t,{originX:"center",originY:"center"})},heart:function(e){const t=e/100,n=[{x:0,y:-25*t},{x:-25*t,y:-10*t},{x:-40*t,y:10*t},{x:-25*t,y:30*t},{x:0,y:50*t},{x:25*t,y:30*t},{x:40*t,y:10*t},{x:25*t,y:-10*t}];return new fabric.Polygon(n,{originX:"center",originY:"center"})},star:function(e){const t=[],n=e/2,i=e/5;for(let e=0;e<10;e++){const o=e%2==0?n:i,a=Math.PI/5*e+Math.PI/2;t.push({x:Math.cos(a)*o,y:Math.sin(a)*o})}return new fabric.Polygon(t,{originX:"center",originY:"center"})},hexagon:function(e){const t=[],n=e/2;for(let e=0;e<6;e++){const i=2*Math.PI*e/6;t.push({x:n*Math.cos(i),y:n*Math.sin(i)})}return new fabric.Polygon(t,{originX:"center",originY:"center"})},cloud:function(e){return new fabric.Path("M25,60 a20,20 0 0,1 0,-40 a20,20 0 0,1 35,-15 a25,25 0 0,1 45,0 a20,20 0 0,1 0,40 a20,20 0 0,1 -35,15 a25,25 0 0,1 -45,0 z",{originX:"center",originY:"center",scaleX:e/100,scaleY:e/100})},speech:function(e){return new fabric.Path("M10,80 C10,50 30,20 60,20 C90,20 110,50 110,80 C110,110 90,140 60,140 C50,140 30,140 25,150 C20,160 20,170 15,170 C11,170 10,160 15,150 C20,140 10,110 10,80 z",{originX:"center",originY:"center",scaleX:e/120,scaleY:e/170})},octagon:function(e){const t=[],n=e/2;for(let e=0;e<8;e++){const i=2*Math.PI*e/8;t.push({x:n*Math.cos(i),y:n*Math.sin(i)})}return new fabric.Polygon(t,{originX:"center",originY:"center"})},flowerFrame:function(e){return new fabric.Path("M50,0 C60,30 90,40 100,50 C90,60 60,70 50,100 C40,70 10,60 0,50 C10,40 40,30 50,0 Z",{originX:"center",originY:"center",scaleX:e/100,scaleY:e/100})},drop:function(e){return new fabric.Path("M50,0 C80,40 100,80 100,110 C100,150 80,180 50,180 C20,180 0,150 0,110 C0,80 20,40 50,0 Z",{originX:"center",originY:"center",scaleX:e/180,scaleY:e/180})},cross:function(e){return new fabric.Path("M35,0 L65,0 L65,35 L100,35 L100,65 L65,65 L65,100 L35,100 L35,65 L0,65 L0,35 L35,35 Z",{originX:"center",originY:"center",scaleX:e/100,scaleY:e/100})}};function t(e,t){const n=e.getActiveObject();n&&n.clipPath&&(n.clipPath.set({stroke:t.stroke||n.clipPath.stroke,strokeWidth:t.strokeWidth||n.clipPath.strokeWidth,strokeDashArray:t.strokeDashArray||n.clipPath.strokeDashArray}),n.frameOptions={...n.frameOptions,...t},e.fire&&e.fire("object:modified",{target:n}),e.renderAll())}window.ImageEditor.prototype.initializeFrames=function(){const n=this;function i(e){if(e&&"image"===e.type&&e.clipPath){$(`${n.containerSelector} .frame-properties`).show(),$(`${n.containerSelector} #frame-border-color`).spectrum("set",e.clipPath.stroke||"#000000"),$(`${n.containerSelector} #frame-border-width`).val(e.clipPath.strokeWidth||0);let t="";e.clipPath.strokeDashArray&&(t=e.clipPath.strokeDashArray.join(",")),$(`${n.containerSelector} #frame-border-style`).val(t)}else $(`${n.containerSelector} .frame-properties`).hide()}$(`${this.containerSelector} .main-panel`).append('\n      <div class="toolpanel" id="frames-panel">\n        <div class="content">\n          <p class="title">Molduras</p>\n          <div class="frames-container">\n            <div class="frames-list"></div>\n          </div>\n          <div class="frame-properties" style="display: none;">\n            <h4>Propriedades da Moldura</h4>\n            <div class="input-container">\n              <label>Cor da Borda</label>\n              <input id="frame-border-color" type="text" value="#000000">\n            </div>\n            <div class="input-container">\n              <label>Espessura da Borda</label>\n              <div class="custom-number-input">\n                <button class="decrease">-</button>\n                <input type="number" min="0" max="20" value="0" step="1" id="frame-border-width">\n                <button class="increase">+</button>\n              </div>\n            </div>\n            <div class="input-container">\n              <label>Estilo da Borda</label>\n              <select id="frame-border-style">\n                <option value="">Sólida</option>\n                <option value="5,5">Tracejada</option>\n                <option value="10,10">Pontilhada</option>\n                <option value="15,10,5,10">Traço-Ponto</option>\n              </select>\n            </div>\n          </div>\n          <hr>\n          <div class="toolpanel-item frames-actions">\n            <button id="remove-frame" class="btn btn-danger btn-sm btn-block">Remover Moldura</button>\n          </div>\n        </div>\n        <div class="hide-show-handler"></div>\n      </div>\n    '),$(`${this.containerSelector} #frame-border-color`).spectrum({color:"#000000",showInput:!0,preferredFormat:"hex",change:function(e){t(n.canvas,{stroke:e.toHexString()})}}),$(`${this.containerSelector} #frame-border-width`).on("change",(function(){t(n.canvas,{strokeWidth:parseFloat($(this).val())})})),$(`${this.containerSelector} #frame-border-style`).on("change",(function(){const e=$(this).val();let i=null;e&&(i=e.split(",").map(Number)),t(n.canvas,{strokeDashArray:i})})),this.canvas.on("selection:created",(function(e){i(e.selected[0])})),this.canvas.on("selection:updated",(function(e){i(e.selected[0])})),this.canvas.on("selection:cleared",(function(){$(`${n.containerSelector} .frame-properties`).hide()}));const o=$(`${this.containerSelector} .frames-list`);Object.keys(e).forEach((t=>{const i=$(`<div class="frame-item" data-shape="${t}">\n        <div class="frame-preview">\n          <canvas width="60" height="60"></canvas>\n        </div>\n        <div class="frame-name">${t.charAt(0).toUpperCase()+t.slice(1)}</div>\n      </div>`);o.append(i);const a=i.find("canvas")[0],r=new fabric.StaticCanvas(a),s=e[t](40);s.set({left:30,top:30,fill:"rgba(0, 0, 0, 0.1)",stroke:"#666",strokeWidth:1}),r.add(s),r.renderAll(),i.on("click",(function(){!function(t,n,i={}){const o=t.getActiveObject();if(!o||!o.type||"image"!==o.type)return void(t.fire?t.fire("notification:show",{message:"Por favor, selecione uma imagem primeiro",type:"error"}):alert("Por favor, selecione uma imagem primeiro"));if(!e[n])return void(t.fire?t.fire("notification:show",{message:"Erro: forma não encontrada",type:"error"}):alert("Erro: forma não encontrada"));const a=e[n](200),r=o.width*o.scaleX,s=o.height*o.scaleY,l=o.angle;o.scaleX,o.scaleY,o.set({angle:0});const c={left:0,top:0,scaleX:1,scaleY:1,originX:"center",originY:"center",fill:"transparent",stroke:i.stroke||"#000000",strokeWidth:i.strokeWidth||0,strokeDashArray:i.strokeDashArray||null};a.set(c);const d=a.width/a.height;d>r/s?(a.scaleToHeight(s),a.scaleToWidth(s*d)):(a.scaleToWidth(r),a.scaleToHeight(r/d)),o.clipPath=a,o.clipPath.set({originX:"center",originY:"center",left:0,top:0}),o.set({angle:l}),o.frameType=n,o.frameOptions=c,t.fire&&t.fire("object:modified",{target:o}),t.renderAll(),t.fire&&t.fire("notification:show",{message:"Moldura aplicada com sucesso",type:"success"})}(n.canvas,t,{stroke:$(`${n.containerSelector} #frame-border-color`).spectrum("get").toHexString(),strokeWidth:parseFloat($(`${n.containerSelector} #frame-border-width`).val()),strokeDashArray:$(`${n.containerSelector} #frame-border-style`).val()?$(`${n.containerSelector} #frame-border-style`).val().split(",").map(Number):null})}))})),$(`${this.containerSelector} #remove-frame`).on("click",(function(){!function(e){const t=e.getActiveObject();t&&t.type&&"image"===t.type&&t.clipPath?(t.clipPath=null,t.frameType=null,t.frameOptions=null,e.fire&&e.fire("object:modified",{target:t}),e.renderAll(),e.fire&&e.fire("notification:show",{message:"Moldura removida com sucesso",type:"success"})):e.fire?e.fire("notification:show",{message:"Selecione uma imagem com moldura para remover",type:"warning"}):alert("Selecione uma imagem com moldura para remover")}(n.canvas)})),$("head").append("\n      <style>\n        .frames-container {\n          padding: 10px 0;\n          max-height: 400px;\n          overflow-y: auto;\n        }\n        .frames-list {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 10px;\n        }\n        .frame-item {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          padding: 5px;\n          border-radius: 4px;\n          transition: background-color 0.2s;\n        }\n        .frame-item:hover {\n          background-color: #f0f0f0;\n        }\n        .frame-preview {\n          width: 60px;\n          height: 60px;\n          border: 1px solid #ddd;\n          margin-bottom: 5px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background-color: #fff;\n          border-radius: 4px;\n          overflow: hidden;\n        }\n        .frame-name {\n          font-size: 12px;\n          text-align: center;\n        }\n        .frame-properties h4 {\n          margin-top: 15px;\n          margin-bottom: 10px;\n          font-size: 16px;\n        }\n        #remove-frame {\n          width: 100%;\n          background-color: #ff3860;\n          color: white;\n          border: none;\n          padding: 8px 15px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.3s;\n          margin-top: 15px;\n        }\n        #remove-frame:hover {\n          background-color: #e71a48;\n        }\n      </style>\n    ")};const n=window.ImageEditor.prototype.init;window.ImageEditor.prototype.init=function(){n&&"function"==typeof n&&n.call(this),this.initializeFrames()}}(),(()=>{"use strict";var e=n(72),t=n.n(e),i=n(825),o=n.n(i),a=n(659),r=n.n(a),s=n(56),l=n.n(s),c=n(159),d=n.n(c),p=n(113),h=n.n(p),u=n(687),g={};g.styleTagTransform=h(),g.setAttributes=l(),g.insert=r().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),t()(u.A,g),u.A&&u.A.locals&&u.A.locals})()})();